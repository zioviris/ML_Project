"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[532],{84069:function(e,o,r){r.d(o,{m:function(){return a}});var s=r(3293),n=r(50111);var t={name:"gmowil",styles:"height:calc(100% - 60px)"};const a=e=>{let{children:o,className:r}=e;return(0,n.Y)(s.ffj,{css:t,className:r,children:o})}},62448:function(e,o){class r{}r.mlflowServices={MODEL_REGISTRY:"Model Registry",EXPERIMENTS:"Experiments",MODEL_SERVING:"Model Serving",RUN_TRACKING:"Run Tracking"},o.A=r},20109:function(e,o,r){r.d(o,{X:function(){return c}});r(31014);var s=r(28486),n=r(3293),t=r(17319),a=r(88443),l=r(50111);function i(){return(0,l.Y)(n.SvL,{"data-testid":"fallback",title:(0,l.Y)(a.A,{id:"qAdWdK",defaultMessage:"Error"}),description:(0,l.Y)(a.A,{id:"RzZVxC",defaultMessage:"An error occurred while rendering this component."}),image:(0,l.Y)(t._,{})})}function d(e){let{children:o,customFallbackComponent:r}=e;function n(e,o){console.error("Caught Unexpected Error: ",e,o.componentStack)}return r?(0,l.Y)(s.tH,{onError:n,FallbackComponent:r,children:o}):(0,l.Y)(s.tH,{onError:n,fallback:(0,l.Y)(i,{}),children:o})}function c(e,o,r,s){return function(e){return(0,l.Y)(d,{customFallbackComponent:s,children:(0,l.Y)(o,{...e})})}}},38235:function(e,o,r){r.d(o,{i:function(){return c}});var s=r(89555),n=(r(31014),r(17319)),t=r(3293),a=r(37616),l=r(56412),i=r(50111);var d={name:"bjn8wh",styles:"position:relative"};const c=e=>{let{code:o}=e;const{theme:r}=(0,n.a)();return(0,i.FD)("div",{css:d,children:[(0,i.Y)(l.i,{css:(0,s.AH)({zIndex:1,position:"absolute",top:r.spacing.xs,right:r.spacing.xs},""),showLabel:!1,copyText:o,icon:(0,i.Y)(t.TdU,{})}),(0,i.Y)(a.z7,{language:"python",showLineNumbers:!1,style:{padding:r.spacing.sm,color:r.colors.textPrimary,backgroundColor:r.colors.backgroundSecondary,whiteSpace:"pre-wrap"},wrapLongLines:!0,children:o})]})}},80532:function(e,o,r){r.r(o),r.d(o,{default:function(){return Ae}});var s=r(89555),n=r(4877),t=r.n(n),a=r(1888),l=r(44479);const i=async e=>{var o;let{queryKey:r}=e;const[,{promptName:s}]=r,[n,t]=await Promise.all([l.M.getPromptDetails(s),l.M.getPromptVersions(s)]);return{prompt:n.registered_model,versions:null!==(o=t.model_versions)&&void 0!==o?o:[]}};var d=r(93215),c=r(84069),m=r(17319),p=r(3293),u=r(50400),g=r(88443),f=r(84565),v=r(31014),h=r(58481),M=r(70724),b=r(77020),Y=r(50111);var y=r(70618),w=r(9856),A=r(88464),S=r(76010),x=r(30922),k=r(91164);const D=e=>{let{getValue:o,row:{original:r},table:{options:{meta:s}}}=e;const{showEditAliasesModal:n,aliasesByVersion:t,registeredPrompt:a}=s,l=t[r.version]||[];return a?(0,Y.Y)(k.Y,{modelName:null===a||void 0===a?void 0:a.name,version:r.version,aliases:l,onAddEdit:()=>{null===n||void 0===n||n(r.version)}}):null},E=e=>{let{isSelectedFirstToCompare:o,isSelectedSecondToCompare:r,onSelectFirst:n,onSelectSecond:t}=e;const{theme:a}=(0,m.a)(),l=(0,A.A)();return(0,Y.Y)("div",{css:(0,s.AH)({width:a.general.buttonHeight,display:"flex",alignItems:"center",paddingRight:a.spacing.sm},""),children:(0,Y.FD)("div",{css:(0,s.AH)({display:"flex",height:a.general.buttonInnerHeight+a.spacing.xs,gap:0,flex:1},""),children:[(0,Y.Y)(u.T,{componentId:"mlflow.prompts.details.select_baseline.tooltip",content:(0,Y.Y)(g.A,{id:"KV3BXl",defaultMessage:"Select as baseline version"}),delayDuration:0,side:"left",children:(0,Y.Y)("button",{onClick:n,role:"radio","aria-checked":o,"aria-label":l.formatMessage({id:"KV3BXl",defaultMessage:"Select as baseline version"}),css:(0,s.AH)({flex:1,border:`1px solid ${o?a.colors.actionDefaultBorderFocus:a.colors.actionDefaultBorderDefault}`,borderRight:0,marginLeft:1,borderTopLeftRadius:a.borders.borderRadiusMd,borderBottomLeftRadius:a.borders.borderRadiusMd,backgroundColor:o?a.colors.actionDefaultBackgroundPress:a.colors.actionDefaultBackgroundDefault,cursor:"pointer","&:hover":{backgroundColor:a.colors.actionDefaultBackgroundHover}},"")})}),(0,Y.Y)(u.T,{componentId:"mlflow.prompts.details.select_compared.tooltip",content:(0,Y.Y)(g.A,{id:"9IN1I8",defaultMessage:"Select as compared version"}),delayDuration:0,side:"right",children:(0,Y.Y)("button",{onClick:t,role:"radio","aria-checked":r,"aria-label":l.formatMessage({id:"9IN1I8",defaultMessage:"Select as compared version"}),css:(0,s.AH)({flex:1,border:`1px solid ${r?a.colors.actionDefaultBorderFocus:a.colors.actionDefaultBorderDefault}`,borderLeft:`1px solid ${o||r?a.colors.actionDefaultBorderFocus:a.colors.actionDefaultBorderDefault}`,borderTopRightRadius:a.borders.borderRadiusMd,borderBottomRightRadius:a.borders.borderRadiusMd,backgroundColor:r?a.colors.actionDefaultBackgroundPress:a.colors.actionDefaultBackgroundDefault,cursor:"pointer","&:hover":{backgroundColor:a.colors.actionDefaultBackgroundHover}},"")})})]})})};var C={name:"inxa61",styles:"flex:1;overflow:hidden"},V={name:"1h3rtzg",styles:"align-items:center"};const _=e=>{let{promptVersions:o,onUpdateComparedVersion:r,isLoading:n,onUpdateSelectedVersion:t,comparedVersion:a,selectedVersion:l,mode:i,registeredPrompt:d,showEditAliasesModal:c,aliasesByVersion:u}=e;const h=(0,A.A)(),{theme:M}=(0,m.a)(),b=(0,v.useMemo)((()=>{const e=[{id:"version",header:h.formatMessage({id:"Vn+uJi",defaultMessage:"Version"}),accessorKey:"version",cell:x.q}];return i===f.Dp.TABLE&&(e.push({id:"creation_timestamp",header:h.formatMessage({id:"1tRtls",defaultMessage:"Registered at"}),accessorFn:e=>{let{creation_timestamp:o}=e;return S.A.formatTimestamp(o,h)}}),e.push({id:"commit_message",header:h.formatMessage({id:"ZaQ42C",defaultMessage:"Commit message"}),accessorKey:"description"}),e.push({id:"aliases",header:h.formatMessage({id:"M0zIfe",defaultMessage:"Aliases"}),accessorKey:"aliases",cell:D})),e}),[i,h]),k=(0,y.N4)({data:null!==o&&void 0!==o?o:[],getRowId:e=>e.version,columns:b,getCoreRowModel:(0,w.HT)(),meta:{showEditAliasesModal:c,aliasesByVersion:u,registeredPrompt:d}});return(0,Y.Y)("div",{css:C,children:(0,Y.FD)(p.XIK,{scrollable:!0,empty:n||0!==(null===o||void 0===o?void 0:o.length)?null:(0,Y.Y)(p.SvL,{title:(0,Y.Y)(g.A,{id:"9pJlQd",defaultMessage:"No prompt versions created"}),description:(0,Y.Y)(g.A,{id:"7zgX/l",defaultMessage:'Use "Create prompt version" button in order to create a new prompt version'})}),"aria-label":"Prompt versions table",children:[(0,Y.Y)(p.Hjg,{isHeader:!0,children:k.getLeafHeaders().map((e=>(0,Y.Y)(p.A0N,{componentId:"mlflow.prompts.versions.table.header",children:(0,y.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),n?(0,Y.Y)(p.BAM,{table:k}):k.getRowModel().rows.map((e=>{const o=[f.Dp.PREVIEW].includes(i)&&l===e.original.version,n=[f.Dp.COMPARE].includes(i)&&l===e.original.version,d=[f.Dp.COMPARE].includes(i)&&a===e.original.version,c=i===f.Dp.PREVIEW;return(0,Y.FD)(p.Hjg,{css:(0,s.AH)({height:M.general.heightBase,backgroundColor:o?M.colors.actionDefaultBackgroundPress:n||d?M.colors.actionDefaultBackgroundHover:"transparent",cursor:c?"pointer":"default"},""),onClick:()=>{i===f.Dp.PREVIEW&&t(e.original.version)},children:[e.getAllCells().map((e=>(0,Y.Y)(p.nA6,{css:V,children:(0,y.Kv)(e.column.columnDef.cell,e.getContext())},e.id))),o&&(0,Y.Y)("div",{css:(0,s.AH)({width:2*M.spacing.md,display:"flex",alignItems:"center",paddingRight:M.spacing.sm},""),children:(0,Y.Y)(m.o,{})}),i===f.Dp.COMPARE&&(0,Y.Y)(E,{onSelectFirst:()=>t(e.original.version),onSelectSecond:()=>r(e.original.version),isSelectedFirstToCompare:n,isSelectedSecondToCompare:d})]},e.id)}))]})})};var T=r(30311),R=r(9133);const P=(e,o)=>"setTableMode"===o.type?{...e,mode:f.Dp.TABLE}:"switchSides"===o.type?{...e,selectedVersion:e.comparedVersion,comparedVersion:e.selectedVersion}:"setPreviewMode"===o.type?{...e,mode:f.Dp.PREVIEW,selectedVersion:o.selectedVersion}:"setCompareMode"===o.type?{...e,mode:f.Dp.COMPARE,selectedVersion:o.selectedVersion,comparedVersion:o.comparedVersion}:"setSelectedVersion"===o.type?{...e,selectedVersion:o.selectedVersion}:"setComparedVersion"===o.type?{...e,comparedVersion:o.comparedVersion}:e;var I=r(77735),F=r(63515),N=r(63528);var B={name:"1pzk433",styles:"width:100px"};const H=e=>{let{isLoadingRuns:o,runIds:r,runInfoMap:s}=e;const[n,t]=(0,v.useState)(!1),{theme:a}=(0,m.a)(),l=n?r.length:Math.min(3,r.length||0),i=r.length>3;return(0,Y.FD)(Y.FK,{children:[(0,Y.Y)(m.r.Text,{bold:!0,children:(0,Y.Y)(g.A,{id:"9ZHB3D",defaultMessage:"MLflow runs:"})}),(0,Y.Y)("div",{children:o?(0,Y.Y)(p.I_K,{css:B}):(0,Y.Y)(Y.FK,{children:(0,Y.FD)("div",{style:{display:"flex",flexWrap:"wrap",gap:a.spacing.sm},children:[r.slice(0,l).map(((e,o)=>{const r=s[e];if(!(0,R.isNil)(null===r||void 0===r?void 0:r.experimentId)&&null!==r&&void 0!==r&&r.runUuid&&null!==r&&void 0!==r&&r.runName){const{experimentId:e,runUuid:s,runName:n}=r;return(0,Y.FD)(m.r.Text,{children:[(0,Y.Y)(d.N_,{to:h.h.getRunPageRoute(e,s),children:n}),o<l-1&&","]})}return(0,Y.Y)("span",{children:(null===r||void 0===r?void 0:r.runName)||(null===r||void 0===r?void 0:r.runUuid)})})),i&&(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.runs.show_more",size:"small",type:"link",onClick:()=>t(!n),children:n?(0,Y.Y)(g.A,{id:"pVF+2s",defaultMessage:"Show less"}):(0,Y.Y)(g.A,{id:"fh6RWb",defaultMessage:"{count} more...",values:{count:r.length-l}})})]})})})]})};var L=r(98590),O=r(98597);var z={name:"ti75j2",styles:"margin:0"};const W=e=>{let{tags:o,onEditVersionMetadata:r}=e;const[s,n]=(0,v.useState)(!1),{theme:t}=(0,m.a)(),a=s?o.length:Math.min(3,o.length||0),l=o.length>3,i=!(0,R.isNil)(r),d=o.length>0?(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.version.edit_tags",size:"small",icon:(0,Y.Y)(p.R2l,{}),onClick:r}):(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.version.add_tags",size:"small",type:"link",onClick:r,children:(0,Y.Y)(g.A,{id:"JGQ5B2",defaultMessage:"Add"})});return(0,Y.FD)(Y.FK,{children:[(0,Y.Y)(m.r.Text,{bold:!0,children:(0,Y.Y)(g.A,{id:"GgPNAZ",defaultMessage:"Metadata:"})}),(0,Y.Y)("div",{children:(0,Y.Y)(Y.FK,{children:(0,Y.FD)("div",{style:{display:"flex",flexWrap:"wrap",gap:t.spacing.xs},children:[o.slice(0,a).map((e=>(0,Y.Y)(O.t,{css:z,tag:e},e.key))),i&&d,!i&&0===o.length&&(0,Y.Y)(m.r.Hint,{children:"\u2014"}),l&&(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.version.tags.show_more",size:"small",type:"link",onClick:()=>n(!s),children:s?(0,Y.Y)(g.A,{id:"pVF+2s",defaultMessage:"Show less"}):(0,Y.Y)(g.A,{id:"fh6RWb",defaultMessage:"{count} more...",values:{count:o.length-a}})})]})})})]})};var U={name:"wjlmq0",styles:"max-width:none"};const K=e=>{var o;let{registeredPromptVersion:r,registeredPrompt:n,showEditAliasesModal:t,onEditVersion:a,showEditPromptVersionMetadataModal:l,aliasesByVersion:i,isBaseline:d}=e;const{theme:c}=(0,m.a)(),p=(0,v.useMemo)((()=>{var e,o;const s=null===r||void 0===r||null===(e=r.tags)||void 0===e||null===(o=e.find((e=>e.key===f.xd)))||void 0===o?void 0:o.value;return s?s.split(",").map((e=>e.trim())):[]}),[r]),{isLoading:u,runInfoMap:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const o=(0,I.E)({queries:e.map((e=>({queryKey:["prompt_associated_runs",e],queryFn:async e=>{let{queryKey:[,o]}=e;try{const e=await N.x.getRun({run_id:o});return(0,F.LJ)(e)}catch(r){return null}}})))}),r={};return o.forEach(((o,s)=>{var n,t;const a=e[s];r[a]=null===(n=o.data)||void 0===n||null===(t=n.run)||void 0===t?void 0:t.info})),{isLoading:e.length>0&&o.some((e=>e.isLoading)),runInfoMap:r}}(p||[]);if(!n||!r)return null;const M=(null===r||void 0===r||null===(o=r.tags)||void 0===o?void 0:o.filter((e=>(0,L.oD)(e.key))))||[],b=(0,Y.Y)(g.A,{id:"loe2Ov",defaultMessage:"Version {version}",values:{version:r.version}}),y=l?()=>{l(r)}:void 0;return(0,Y.FD)("div",{css:(0,s.AH)({display:"grid",gridTemplateColumns:"120px 1fr",gridAutoRows:`minmax(${c.typography.lineHeightLg}, auto)`,alignItems:"flex-start",rowGap:c.spacing.xs,columnGap:c.spacing.sm},""),children:[a&&(0,Y.FD)(Y.FK,{children:[(0,Y.Y)(m.r.Text,{bold:!0,children:"Version:"}),(0,Y.FD)(m.r.Text,{children:[(0,Y.Y)(m.r.Link,{componentId:"mlflow.prompts.details.version.goto",onClick:()=>a(r),children:b})," ",d&&(0,Y.Y)(g.A,{id:"FTx+Hi",defaultMessage:"(baseline)"})]})]}),(0,Y.Y)(m.r.Text,{bold:!0,children:(0,Y.Y)(g.A,{id:"wFvyI1",defaultMessage:"Registered at:"})}),(0,Y.Y)(m.r.Text,{children:S.A.formatTimestamp(r.creation_timestamp)}),(0,Y.Y)(m.r.Text,{bold:!0,children:(0,Y.Y)(g.A,{id:"h3vlVA",defaultMessage:"Aliases:"})}),(0,Y.Y)("div",{children:(0,Y.Y)(k.Y,{css:U,modelName:n.name,version:r.version,aliases:i[r.version]||[],onAddEdit:()=>{null===t||void 0===t||t(r.version)}})}),r.description&&(0,Y.FD)(Y.FK,{children:[(0,Y.Y)(m.r.Text,{bold:!0,children:(0,Y.Y)(g.A,{id:"KGMbzq",defaultMessage:"Commit message:"})}),(0,Y.Y)(m.r.Text,{children:r.description})]}),(0,Y.Y)(W,{onEditVersionMetadata:y,tags:M}),(u||p.length>0)&&(0,Y.Y)(H,{isLoadingRuns:u,runIds:p,runInfoMap:h})]})};var Q=r(38235);const q=/\{\{\s*(.*?)\s*\}\}/g;var G={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},j={name:"1089mxj",styles:"white-space:pre-wrap"};const $=e=>{let{promptVersion:o,onUpdatedContent:r,onDeletedVersion:n,aliasesByVersion:t,registeredPrompt:a,showEditAliasesModal:i,showEditPromptVersionMetadataModal:d}=e;const c=(0,v.useMemo)((()=>o?(0,f.dv)(o):""),[o]),{DeletePromptModal:h,openModal:M}=(e=>{let{promptVersion:o,onSuccess:r}=e;const[s,n]=(0,v.useState)(!1),{mutate:t}=(0,b.n)({mutationFn:async e=>{let{promptName:o,version:r}=e;await l.M.deleteRegisteredPromptVersion(o,r)}});return{DeletePromptModal:(0,Y.Y)(u.M,{componentId:"mlflow.prompts.delete_version_modal",visible:s,onCancel:()=>n(!1),title:(0,Y.Y)(g.A,{id:"WfY+Gj",defaultMessage:"Delete prompt version"}),okText:(0,Y.Y)(g.A,{id:"orKoPo",defaultMessage:"Delete"}),okButtonProps:{danger:!0},onOk:async()=>{null!==o&&void 0!==o&&o.name?(t({promptName:o.name,version:o.version},{onSuccess:()=>{null===r||void 0===r||r(),n(!1)}}),n(!1)):n(!1)},cancelText:(0,Y.Y)(g.A,{id:"VpFZR/",defaultMessage:"Cancel"}),children:(0,Y.Y)(g.A,{id:"x2+7hZ",defaultMessage:"Are you sure you want to delete the prompt version?"})}),openModal:()=>n(!0)}})({promptVersion:o,onSuccess:()=>null===n||void 0===n?void 0:n()}),[y,w]=(0,v.useState)(!1),A=(0,v.useMemo)((()=>{if(!c)return[];const e=[];let o;for(;null!==(o=q.exec(c));)e.push(o[1]);return e.some((e=>e.includes("{")||e.includes("}")))?null:(0,R.uniq)(e)}),[c]),{theme:S}=(Z(o,A),(0,m.a)());return(0,Y.FD)("div",{css:(0,s.AH)({flex:1,padding:S.spacing.md,paddingTop:0,borderRadius:S.borders.borderRadiusSm,overflow:"auto",display:"flex",flexDirection:"column"},""),children:[(0,Y.FD)("div",{css:G,children:[(0,Y.FD)(m.r.Title,{level:3,children:["Viewing version ",null===o||void 0===o?void 0:o.version]}),(0,Y.FD)("div",{css:(0,s.AH)({display:"flex",gap:S.spacing.sm},""),children:[(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.delete_version",icon:(0,Y.Y)(p.ucK,{}),type:"primary",danger:!0,onClick:M,children:(0,Y.Y)(g.A,{id:"H7JwOl",defaultMessage:"Delete version"})}),(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.preview.use",icon:(0,Y.Y)(p.udU,{}),onClick:()=>w(!0),children:(0,Y.Y)(g.A,{id:"8EK+SZ",defaultMessage:"Use"})})]})]}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.Y)(K,{aliasesByVersion:t,registeredPrompt:a,registeredPromptVersion:o,showEditAliasesModal:i,showEditPromptVersionMetadataModal:d}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.Y)("div",{css:(0,s.AH)({backgroundColor:S.colors.backgroundSecondary,padding:S.spacing.md,overflow:"auto"},""),children:(0,Y.Y)(m.r.Text,{css:j,children:c||"Empty"})}),(0,Y.Y)(u.M,{componentId:"mlflow.prompts.details.preview.usage_example_modal",title:(0,Y.Y)(g.A,{id:"VrxfuC",defaultMessage:"Usage example"}),visible:y,onCancel:()=>w(!1),cancelText:(0,Y.Y)(g.A,{id:"cmYzGP",defaultMessage:"Dismiss"}),children:(0,Y.Y)(Q.i,{code:Z(o,A)})}),h]})},Z=(e,o)=>{let r=`from openai import OpenAI\nimport mlflow\nclient = OpenAI(api_key="<YOUR_API_KEY>")\n\n# Set MLflow tracking URI\nmlflow.set_tracking_uri("<YOUR_TRACKING_URI>")\n\n# Example of loading and using the prompt\nprompt = mlflow.load_prompt("prompts:/${null===e||void 0===e?void 0:e.name}/${null===e||void 0===e?void 0:e.version}")`;return r+=null===o?'\n\n# Replace the variables with the actual values\nvariables = {\n   "key": "value",\n   ...\n}\n\nresponse = client.chat.completions.create(\n    messages=[{\n        "role": "user",\n        "content": prompt.format(**variables),\n    }],\n    model="gpt-4o-mini",\n)':`\nresponse = client.chat.completions.create(\n    messages=[{\n        "role": "user",\n        "content": prompt.format(${o.map((e=>`${e}="<${e}>"`)).join(", ")}),\n    }],\n    model="gpt-4o-mini",\n)`,r+="\n\nprint(response.choices[0].message.content)",r};var X=r(21678);var J={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},ee={name:"zjik7",styles:"display:flex"},oe={name:"82a6rk",styles:"flex:1"},re={name:"82a6rk",styles:"flex:1"},se={name:"ppz665",styles:"display:flex;flex:1;overflow:auto;align-items:flex-start"},ne={name:"1089mxj",styles:"white-space:pre-wrap"},te={name:"h55e3f",styles:"svg{rotate:90deg;}"},ae={name:"1089mxj",styles:"white-space:pre-wrap"};const le=e=>{let{baselineVersion:o,comparedVersion:r,onSwitchSides:n,onEditVersion:t,registeredPrompt:a,aliasesByVersion:l,showEditAliasesModal:i}=e;const{theme:d}=(0,m.a)(),c=(0,A.A)(),h=(0,v.useMemo)((()=>o?(0,f.dv)(o):""),[o]),M=(0,v.useMemo)((()=>r?(0,f.dv)(r):""),[r]),b=(0,v.useMemo)((()=>{var e;return null!==(e=(0,X.b2)(null!==h&&void 0!==h?h:"",null!==M&&void 0!==M?M:""))&&void 0!==e?e:[]}),[h,M]),y=(0,v.useMemo)((()=>({addedBackground:d.isDarkMode?d.colors.green700:d.colors.green300,removedBackground:d.isDarkMode?d.colors.red700:d.colors.red300})),[d]);return(0,Y.FD)("div",{css:(0,s.AH)({flex:1,padding:d.spacing.md,paddingTop:0,borderRadius:d.borders.borderRadiusSm,overflow:"hidden",display:"flex",flexDirection:"column"},""),children:[(0,Y.Y)("div",{css:J,children:(0,Y.Y)(m.r.Title,{level:3,children:(0,Y.Y)(g.A,{id:"B8RvlZ",defaultMessage:"Comparing version {baseline} with version {compared}",values:{baseline:null===o||void 0===o?void 0:o.version,compared:null===r||void 0===r?void 0:r.version}})})}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.FD)("div",{css:ee,children:[(0,Y.Y)("div",{css:oe,children:(0,Y.Y)(K,{aliasesByVersion:l,onEditVersion:t,registeredPrompt:a,registeredPromptVersion:o,showEditAliasesModal:i,isBaseline:!0})}),(0,Y.Y)("div",{css:(0,s.AH)({paddingLeft:d.spacing.sm,paddingRight:d.spacing.sm},""),children:(0,Y.Y)("div",{css:(0,s.AH)({width:d.general.heightSm},"")})}),(0,Y.Y)("div",{css:re,children:(0,Y.Y)(K,{aliasesByVersion:l,onEditVersion:t,registeredPrompt:a,registeredPromptVersion:r,showEditAliasesModal:i})})]}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.FD)("div",{css:se,children:[(0,Y.Y)("div",{css:(0,s.AH)({backgroundColor:d.colors.backgroundSecondary,padding:d.spacing.md,flex:1},""),children:(0,Y.Y)(m.r.Text,{css:ne,children:h||"Empty"})}),(0,Y.Y)("div",{css:(0,s.AH)({paddingLeft:d.spacing.sm,paddingRight:d.spacing.sm},""),children:(0,Y.Y)(u.T,{componentId:"mlflow.prompts.details.switch_sides.tooltip",content:(0,Y.Y)(g.A,{id:"Cbgg9B",defaultMessage:"Switch sides"}),side:"top",children:(0,Y.Y)(m.B,{"aria-label":c.formatMessage({id:"Cbgg9B",defaultMessage:"Switch sides"}),componentId:"mlflow.prompts.details.switch_sides",icon:(0,Y.Y)(p.rf3,{css:te}),onClick:n})})}),(0,Y.Y)("div",{css:(0,s.AH)({backgroundColor:d.colors.backgroundSecondary,padding:d.spacing.md,flex:1},""),children:(0,Y.Y)(m.r.Text,{css:ae,children:b.map(((e,o)=>(0,Y.Y)("span",{css:(0,s.AH)({backgroundColor:e.added?y.addedBackground:e.removed?y.removedBackground:void 0,textDecoration:e.removed?"line-through":"none"},""),children:e.value},o)))})})]})]})};var ie=r(20109),de=r(62448),ce=r(72282),me=r(83090);const pe=e=>{let{promptEntity:o,onTagsUpdated:r}=e;const n=(0,A.A)(),{theme:t}=(0,m.a)(),{EditTagsModal:a,showEditPromptTagsModal:l}=(0,me.i)({onSuccess:r}),i=(null===o||void 0===o?void 0:o.tags.filter((e=>(0,L.oD)(e.key))))||[],d=i.length>0;return(0,Y.FD)("div",{css:(0,s.AH)({paddingTop:t.spacing.xs,paddingBottom:t.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:t.spacing.xs},""),children:[null===i||void 0===i?void 0:i.map((e=>(0,Y.Y)(O.t,{tag:e},e.key))),(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.tags.edit",size:"small",icon:d?(0,Y.Y)(p.R2l,{}):void 0,onClick:()=>o&&l(o),"aria-label":n.formatMessage({id:"DHO5TT",defaultMessage:"Edit tags"}),children:d?void 0:(0,Y.Y)(g.A,{id:"Nlm9bK",defaultMessage:"Add tags"}),type:"tertiary"}),a]})};var ue=r(82214);function ge(e){let{promptName:o}=e;return(0,Y.Y)(ue.E,{statusCode:404,subMessage:`Prompt name '${o}' does not exist`,fallbackHomePageReactRoute:h.h.promptsPageRoute})}var fe=r(43683);const ve=e=>(0,Y.Y)(g.A,{id:"b0KTgh",defaultMessage:"Add/edit alias for prompt version {version}",values:{version:e}});var he={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},Me={name:"1rtaly3",styles:"flex:1;display:flex;overflow:hidden"},be={name:"1t91kdm",styles:"flex:1;display:flex;flex-direction:column"};const Ye=()=>{var e;const{promptName:o}=(0,d.g)(),{theme:r}=(0,m.a)(),n=(0,d.Zp)();t()(o,"Prompt name should be defined");const{data:y,refetch:w,isLoading:A,error:S}=function(e){var o;let{promptName:r}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,a.I)(["prompt_details",{promptName:r}],{queryFn:i,retry:!1,...s});return{data:n.data,error:null!==(o=n.error)&&void 0!==o?o:void 0,isLoading:n.isLoading,refetch:n.refetch}}({promptName:o}),{CreatePromptModal:x,openModal:k}=(0,M.z)({mode:M.v.CreatePromptVersion,registeredPrompt:null===y||void 0===y?void 0:y.prompt,latestVersion:(0,R.first)(null===y||void 0===y?void 0:y.versions),onSuccess:async e=>{let{promptVersion:o}=e;await w(),o&&F({version:o})}}),{DeletePromptModal:D,openModal:E}=(e=>{let{registeredPrompt:o,onSuccess:r}=e;const[s,n]=(0,v.useState)(!1),{mutate:t}=(0,b.n)({mutationFn:async e=>{let{promptName:o}=e;await l.M.deleteRegisteredPrompt(o)}});return{DeletePromptModal:(0,Y.Y)(u.M,{componentId:"mlflow.prompts.delete_modal",visible:s,onCancel:()=>n(!1),title:(0,Y.Y)(g.A,{id:"p2po2x",defaultMessage:"Delete prompt"}),okText:(0,Y.Y)(g.A,{id:"kgJSBI",defaultMessage:"Delete"}),okButtonProps:{danger:!0},onOk:async()=>{null!==o&&void 0!==o&&o.name?(t({promptName:o.name},{onSuccess:()=>{null===r||void 0===r||r(),n(!1)}}),n(!1)):n(!1)},cancelText:(0,Y.Y)(g.A,{id:"ZlokCq",defaultMessage:"Cancel"}),children:(0,Y.Y)(g.A,{id:"WVUF2N",defaultMessage:"Are you sure you want to delete the prompt?"})}),openModal:()=>n(!0)}})({registeredPrompt:null===y||void 0===y?void 0:y.prompt,onSuccess:()=>n(h.h.promptsPageRoute)}),{EditPromptVersionMetadataModal:C,showEditPromptVersionMetadataModal:V}=(e=>{let{onSuccess:o}=e;const r=(0,b.n)({mutationFn:async e=>{let{toAdd:o,toDelete:r,promptName:s,promptVersion:n}=e;return Promise.all([...o.map((e=>{let{key:o,value:r}=e;return l.M.setRegisteredPromptVersionTag(s,n,o,r)})),...r.map((e=>{let{key:o}=e;return l.M.deleteRegisteredPromptVersionTag(s,n,o)}))])}}),{EditTagsModal:s,showEditTagsModal:n,isLoading:t}=(0,fe.Q)({title:(0,Y.Y)(g.A,{id:"zxfWCx",defaultMessage:"Add/Edit Prompt Version Metadata"}),valueRequired:!0,saveTagsHandler:(e,s,n)=>{const{addedOrModifiedTags:t,deletedTags:a}=(0,L.Rf)(s,n);return new Promise(((s,n)=>{if(!e.name)return n();r.mutate({promptName:e.name,promptVersion:e.version,toAdd:t,toDelete:a},{onSuccess:()=>{s(),null===o||void 0===o||o()},onError:n})}))}});return{EditPromptVersionMetadataModal:s,showEditPromptVersionMetadataModal:(0,v.useCallback)((e=>{var o;return n({name:e.name,version:e.version,tags:null===(o=e.tags)||void 0===o?void 0:o.filter((e=>(0,L.oD)(e.key)))})}),[n]),isLoading:t}})({onSuccess:w}),{setCompareMode:I,setPreviewMode:F,setTableMode:N,switchSides:B,viewState:H,setSelectedVersion:O,setComparedVersion:z}=(e=>{const[o,r]=(0,v.useReducer)(P,{mode:f.Dp.PREVIEW}),s=(0,v.useCallback)((()=>{r({type:"setTableMode"})}),[]),n=(0,v.useCallback)((o=>{var s;const n=null===(s=null!==o&&void 0!==o?o:(0,R.first)(null===e||void 0===e?void 0:e.versions))||void 0===s?void 0:s.version;r({type:"setPreviewMode",selectedVersion:n})}),[e]),t=(0,v.useCallback)((e=>{r({type:"setSelectedVersion",selectedVersion:e})}),[]),a=(0,v.useCallback)((e=>{r({type:"setComparedVersion",comparedVersion:e})}),[]),l=(0,v.useCallback)((()=>{var o,s;const n=null===(o=(0,R.first)(null===e||void 0===e?void 0:e.versions))||void 0===o?void 0:o.version,t=null===e||void 0===e||null===(s=e.versions[1])||void 0===s?void 0:s.version;r({type:"setCompareMode",selectedVersion:t,comparedVersion:n})}),[e]),i=(0,v.useCallback)((()=>r({type:"switchSides"})),[]);return(0,R.first)(null===e||void 0===e?void 0:e.versions)&&o.mode===f.Dp.PREVIEW&&!o.selectedVersion&&n((0,R.first)(null===e||void 0===e?void 0:e.versions)),{viewState:o,setTableMode:s,setPreviewMode:n,setCompareMode:l,switchSides:i,setSelectedVersion:t,setComparedVersion:a}})(y),{mode:W}=H,U=!A&&!(null!==y&&void 0!==y&&y.versions.length),K=!A&&!U&&[f.Dp.PREVIEW,f.Dp.COMPARE].includes(W),Q=null===y||void 0===y?void 0:y.versions.find((e=>{let{version:o}=e;return o===H.selectedVersion})),q=null===y||void 0===y?void 0:y.versions.find((e=>{let{version:o}=e;return o===H.comparedVersion})),G=(0,v.useMemo)((()=>{var e,o;const r={};return null===y||void 0===y||null===(e=y.prompt)||void 0===e||null===(o=e.aliases)||void 0===o||o.forEach((e=>{let{alias:o,version:s}=e;r[s]||(r[s]=[]),r[s].push(o)})),r}),[y]),{EditAliasesModal:j,showEditAliasesModal:Z}=(0,T.o)({model:(null===y||void 0===y?void 0:y.prompt)||null,onSuccess:w,modalTitle:ve,modalDescription:(0,Y.Y)(g.A,{id:"4GPLHq",defaultMessage:"Aliases allow you to assign a mutable, named reference to a particular prompt version."})});if(S)return(0,Y.Y)(ge,{promptName:o});const X=(0,Y.Y)(p.QpV,{children:(0,Y.Y)(p.QpV.Item,{children:(0,Y.Y)(d.N_,{to:h.h.promptsPageRoute,children:"Prompts"})})});return A?(0,Y.Y)(c.m,{children:(0,Y.Y)(Ye.Skeleton,{breadcrumbs:X})}):(0,Y.FD)(c.m,{css:he,children:[(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.Y)(p.Y9Y,{breadcrumbs:X,title:null===y||void 0===y||null===(e=y.prompt)||void 0===e?void 0:e.name,buttons:(0,Y.FD)(Y.FK,{children:[(0,Y.FD)(p.rId.Root,{children:[(0,Y.Y)(p.rId.Trigger,{asChild:!0,children:(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.actions",icon:(0,Y.Y)(p.ssM,{}),"aria-label":"More actions"})}),(0,Y.Y)(p.rId.Content,{children:(0,Y.Y)(p.rId.Item,{componentId:"mlflow.prompts.details.actions.delete",onClick:E,children:(0,Y.Y)(g.A,{id:"BwgPX0",defaultMessage:"Delete"})})})]}),(0,Y.Y)(m.B,{componentId:"mlflow.prompts.details.create",type:"primary",onClick:k,children:(0,Y.Y)(g.A,{id:"RJenO+",defaultMessage:"Create prompt version"})})]})}),(0,Y.Y)(pe,{onTagsUpdated:w,promptEntity:null===y||void 0===y?void 0:y.prompt}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.FD)("div",{css:Me,children:[(0,Y.FD)("div",{css:(0,s.AH)({flex:K?"0 0 320px":1,display:"flex",flexDirection:"column"},""),children:[(0,Y.Y)("div",{css:(0,s.AH)({display:"flex",gap:r.spacing.sm},""),children:(0,Y.FD)(p.d98,{name:"mlflow.prompts.details.mode",componentId:"mlflow.prompts.details.mode",value:W,disabled:A,children:[(0,Y.Y)(p.EPn,{value:f.Dp.PREVIEW,onClick:()=>F(),children:(0,Y.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs},""),children:[(0,Y.Y)(p.ioF,{}),(0,Y.Y)(g.A,{id:"wrNl6F",defaultMessage:"Preview"})]})}),(0,Y.Y)(p.EPn,{value:f.Dp.TABLE,onClick:N,children:(0,Y.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs},""),children:[(0,Y.Y)(p.KbA,{})," ",(0,Y.Y)(g.A,{id:"guBsqD",defaultMessage:"List"})]})}),(0,Y.Y)(p.EPn,{disabled:Boolean(!(null!==y&&void 0!==y&&y.versions.length)||(null===y||void 0===y?void 0:y.versions.length)<2),value:f.Dp.COMPARE,onClick:I,children:(0,Y.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs},""),children:[(0,Y.Y)(p.jng,{})," ",(0,Y.Y)(g.A,{id:"SI6n4L",defaultMessage:"Compare"})]})})]})}),(0,Y.Y)(u.S,{shrinks:!1,size:"sm"}),(0,Y.Y)(_,{isLoading:A,registeredPrompt:null===y||void 0===y?void 0:y.prompt,promptVersions:null===y||void 0===y?void 0:y.versions,selectedVersion:H.selectedVersion,comparedVersion:H.comparedVersion,showEditAliasesModal:Z,aliasesByVersion:G,onUpdateSelectedVersion:O,onUpdateComparedVersion:z,mode:W})]}),K&&(0,Y.Y)("div",{css:be,children:(0,Y.FD)("div",{css:(0,s.AH)({borderLeft:`1px solid ${r.colors.border}`,flex:1,overflow:"hidden",display:"flex"},""),children:[W===f.Dp.PREVIEW&&(0,Y.Y)($,{promptVersion:Q,onUpdatedContent:w,onDeletedVersion:async()=>{await w().then((e=>{let{data:o}=e;!(0,R.isEmpty)(null===o||void 0===o?void 0:o.versions)&&null!==o&&void 0!==o&&o.versions[0].version?O(null===o||void 0===o?void 0:o.versions[0].version):N()}))},aliasesByVersion:G,showEditAliasesModal:Z,registeredPrompt:null===y||void 0===y?void 0:y.prompt,showEditPromptVersionMetadataModal:V}),W===f.Dp.COMPARE&&(0,Y.Y)(le,{baselineVersion:Q,comparedVersion:q,onSwitchSides:B,onEditVersion:F,showEditAliasesModal:Z,registeredPrompt:null===y||void 0===y?void 0:y.prompt,aliasesByVersion:G})]})})]}),(0,Y.Y)(u.S,{shrinks:!1}),j,x,D,C]})};var ye={name:"1gt3dvv",styles:"flex:0 0 320px"},we={name:"82a6rk",styles:"flex:1"};Ye.Skeleton=function(e){let{breadcrumbs:o}=e;const{theme:r}=(0,m.a)();return(0,Y.FD)(Y.FK,{children:[(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.Y)(p.Y9Y,{breadcrumbs:o,title:(0,Y.Y)(p.xUE,{css:(0,s.AH)({height:r.general.heightBase,width:200},"")}),buttons:(0,Y.Y)(p.xUE,{css:(0,s.AH)({height:r.general.heightBase,width:120},"")})}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.Y)(p.QvX,{lines:4}),(0,Y.Y)(u.S,{shrinks:!1}),(0,Y.FD)("div",{css:(0,s.AH)({display:"flex",gap:r.spacing.lg},""),children:[(0,Y.Y)("div",{css:ye,children:(0,Y.Y)(p.QvX,{lines:6})}),(0,Y.Y)("div",{css:we,children:(0,Y.Y)(p.QvX,{lines:4})})]})]})};var Ae=(0,ie.X)(de.A.mlflowServices.EXPERIMENTS,Ye,void 0,ce.u)},72282:function(e,o,r){r.d(o,{u:function(){return d}});var s=r(3293),n=r(17319),t=r(88443),a=r(84069),l=r(50111);var i={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const d=e=>{var o;let{error:r}=e;return(0,l.Y)(a.m,{css:i,children:(0,l.Y)(s.SvL,{"data-testid":"fallback",title:(0,l.Y)(t.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(o=null===r||void 0===r?void 0:r.message)&&void 0!==o?o:(0,l.Y)(t.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,l.Y)(n._,{})})})}},30922:function(e,o,r){r.d(o,{q:function(){return a}});var s=r(17319),n=r(88443),t=r(50111);const a=e=>{let{row:{original:o},getValue:r}=e;const a=r();return a?(0,t.Y)(s.r.Text,{children:(0,t.Y)(n.A,{id:"sM0MBJ",defaultMessage:"Version {version}",values:{version:a}})}):null}},70724:function(e,o,r){r.d(o,{v:function(){return u},z:function(){return g}});var s=r(50400),n=r(3293),t=r(31014),a=r(13369),l=r(88464),i=r(88443),d=r(77020),c=r(44479),m=r(84565);var p=r(50111);let u=function(e){return e.CreatePrompt="CreatePrompt",e.CreatePromptVersion="CreatePromptVersion",e}({});const g=e=>{let{mode:o=u.CreatePromptVersion,registeredPrompt:r,latestVersion:g,onSuccess:f}=e;const[v,h]=(0,t.useState)(!1),M=(0,l.A)(),b=(0,a.mN)({defaultValues:{draftName:"",draftValue:"",commitMessage:"",tags:[]}}),Y=o===u.CreatePrompt,y=o===u.CreatePromptVersion,{mutate:w,error:A,reset:S,isLoading:x}=(0,d.n)({mutationFn:async e=>{var o;let{promptName:r,createPromptEntity:s,content:n,commitMessage:t,tags:a}=e;s&&await c.M.createRegisteredPrompt(r);const l=await c.M.createRegisteredPromptVersion(r,[{key:m.Dh,value:n},...a],t),i=null===l||void 0===l||null===(o=l.model_version)||void 0===o?void 0:o.version;if(!i)throw new Error("Failed to create a new prompt version");return{version:i}}});return{CreatePromptModal:(0,p.FD)(s.M,{componentId:"mlflow.prompts.create.modal",visible:v,onCancel:()=>h(!1),title:y?(0,p.Y)(i.A,{id:"XLSmZx",defaultMessage:"Create prompt version"}):(0,p.Y)(i.A,{id:"wh+Eos",defaultMessage:"Create prompt"}),okText:(0,p.Y)(i.A,{id:"TSXmaB",defaultMessage:"Create"}),okButtonProps:{loading:x},onOk:b.handleSubmit((async e=>{const o=y&&null!==r&&void 0!==r&&r.name?null===r||void 0===r?void 0:r.name:e.draftName;w({createPromptEntity:Y,content:e.draftValue,commitMessage:e.commitMessage,promptName:o,tags:e.tags},{onSuccess:e=>{const r=null===e||void 0===e?void 0:e.version;null===f||void 0===f||f({promptName:o,promptVersion:r}),h(!1)}})})),cancelText:(0,p.Y)(i.A,{id:"WP50re",defaultMessage:"Cancel"}),size:"wide",children:[(null===A||void 0===A?void 0:A.message)&&(0,p.FD)(p.FK,{children:[(0,p.Y)(n.FcD,{componentId:"mlflow.prompts.create.error",closable:!1,message:A.message,type:"error"}),(0,p.Y)(s.S,{})]}),Y&&(0,p.FD)(p.FK,{children:[(0,p.Y)(n.D$Q.Label,{htmlFor:"mlflow.prompts.create.name",children:"Name:"}),(0,p.Y)(n.tc_.Input,{control:b.control,id:"mlflow.prompts.create.name",componentId:"mlflow.prompts.create.name",name:"draftName",rules:{required:{value:!0,message:M.formatMessage({id:"Rlwm5V",defaultMessage:"Name is required"})},pattern:{value:/^[a-zA-Z0-9_\-.]+$/,message:M.formatMessage({id:"HZdpLU",defaultMessage:"Only alphanumeric characters, underscores, hyphens, and dots are allowed"})}},placeholder:M.formatMessage({id:"zAuZ2j",defaultMessage:"Provide an unique prompt name"}),validationState:b.formState.errors.draftName?"error":void 0}),b.formState.errors.draftName&&(0,p.Y)(n.D$Q.Message,{type:"error",message:b.formState.errors.draftName.message}),(0,p.Y)(s.S,{})]}),(0,p.Y)(n.D$Q.Label,{htmlFor:"mlflow.prompts.create.content",children:"Prompt:"}),(0,p.Y)(n.tc_.TextArea,{control:b.control,id:"mlflow.prompts.create.content",componentId:"mlflow.prompts.create.content",name:"draftValue",autoSize:{minRows:3,maxRows:10},rules:{required:{value:!0,message:M.formatMessage({id:"wq+WyH",defaultMessage:"Prompt content is required"})}},placeholder:M.formatMessage({id:"2JfWh3",defaultMessage:"Type prompt content here. Wrap variables with double curly brace e.g. '{{' name '}}'."}),validationState:b.formState.errors.draftValue?"error":void 0}),b.formState.errors.draftValue&&(0,p.Y)(n.D$Q.Message,{type:"error",message:b.formState.errors.draftValue.message}),(0,p.Y)(s.S,{}),(0,p.Y)(n.D$Q.Label,{htmlFor:"mlflow.prompts.create.commit_message",children:"Commit message (optional):"}),(0,p.Y)(n.tc_.Input,{control:b.control,id:"mlflow.prompts.create.commit_message",componentId:"mlflow.prompts.create.commit_message",name:"commitMessage"})]}),openModal:()=>{var e;(S(),o===u.CreatePromptVersion&&g)&&b.reset({commitMessage:"",draftName:"",draftValue:null!==(e=(0,m.dv)(g))&&void 0!==e?e:"",tags:[]});h(!0)}}}},83090:function(e,o,r){r.d(o,{i:function(){return i}});var s=r(77020),n=r(43683),t=r(44479),a=r(31014),l=r(98590);const i=e=>{let{onSuccess:o}=e;const r=(0,s.n)({mutationFn:async e=>{let{toAdd:o,toDelete:r,promptId:s}=e;return Promise.all([...o.map((e=>{let{key:o,value:r}=e;return t.M.setRegisteredPromptTag(s,o,r)})),...r.map((e=>{let{key:o}=e;return t.M.deleteRegisteredPromptTag(s,o)}))])}}),{EditTagsModal:i,showEditTagsModal:d,isLoading:c}=(0,n.Q)({valueRequired:!0,saveTagsHandler:(e,s,n)=>{const{addedOrModifiedTags:t,deletedTags:a}=(0,l.Rf)(s,n);return new Promise(((s,n)=>{if(!e.name)return n();r.mutate({promptId:e.name,toAdd:t,toDelete:a},{onSuccess:()=>{s(),null===o||void 0===o||o()},onError:n})}))}});return{EditTagsModal:i,showEditPromptTagsModal:(0,a.useCallback)((e=>d({name:e.name,tags:e.tags.filter((e=>(0,l.oD)(e.key)))})),[d]),isLoading:c}}},64756:function(e,o,r){r.d(o,{m:function(){return l}});var s=r(89555),n=r(17319),t=r(3293),a=r(50111);const l=e=>{let{value:o,closable:r,onClose:l,className:i,compact:d=!1}=e;const{theme:c}=(0,n.a)();return(0,a.Y)(t.vwO,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversionaliastag.tsx_23",css:(0,s.AH)({fontWeight:c.typography.typographyBoldFontWeight,marginRight:c.spacing.xs},""),className:i,closable:r,onClose:l,title:o,children:(0,a.FD)("span",{css:(0,s.AH)({display:"block",whiteSpace:"nowrap",maxWidth:d?160:300,textOverflow:"ellipsis",overflow:"hidden"},""),children:["@","\xa0",o]})})}},91164:function(e,o,r){r.d(o,{Y:function(){return d}});var s=r(89555),n=r(17319),t=r(3293),a=r(64756),l=r(88443),i=r(50111);const d=e=>{let{aliases:o=[],onAddEdit:r,className:d}=e;const{theme:c}=(0,n.a)();return(0,i.Y)("div",{css:(0,s.AH)({maxWidth:300,display:"flex",flexWrap:"wrap",alignItems:"flex-start","> *":{marginRight:"0 !important"},rowGap:c.spacing.xs/2,columnGap:c.spacing.xs},""),children:o.length<1?(0,i.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_30",size:"small",type:"link",onClick:r,children:(0,i.Y)(l.A,{id:"pU6cxH",defaultMessage:"Add"})}):(0,i.FD)(i.FK,{children:[o.map((e=>(0,i.Y)(a.m,{value:e,css:(0,s.AH)({marginTop:c.spacing.xs/2},"")},e))),(0,i.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_41",size:"small",icon:(0,i.Y)(t.R2l,{}),onClick:r})]})})}},81866:function(e,o,r){r.d(o,{$0:function(){return c},$p:function(){return m},BE:function(){return Y},CG:function(){return h},Gs:function(){return v},IP:function(){return p},QQ:function(){return d},Qs:function(){return b},SF:function(){return M},Tm:function(){return A},UA:function(){return f},e3:function(){return l},gL:function(){return w},jI:function(){return i},uB:function(){return y},zA:function(){return u},zr:function(){return g}});r(31014);var s=r(3293),n=r(88443),t=r(24478),a=r(50111);const l={NONE:"None",STAGING:"Staging",PRODUCTION:"Production",ARCHIVED:"Archived"},i=[l.STAGING,l.PRODUCTION],d={[l.NONE]:"None",[l.STAGING]:"Staging",[l.PRODUCTION]:"Production",[l.ARCHIVED]:"Archived"},c={[l.NONE]:(0,a.Y)(s.vwO,{componentId:"codegen_mlflow_app_src_model-registry_constants.tsx_37",children:d[l.NONE]}),[l.STAGING]:(0,a.Y)(s.vwO,{componentId:"codegen_mlflow_app_src_model-registry_constants.tsx_38",color:"lemon",children:d[l.STAGING]}),[l.PRODUCTION]:(0,a.Y)(s.vwO,{componentId:"codegen_mlflow_app_src_model-registry_constants.tsx_39",color:"lime",children:d[l.PRODUCTION]}),[l.ARCHIVED]:(0,a.Y)(s.vwO,{componentId:"codegen_mlflow_app_src_model-registry_constants.tsx_40",color:"charcoal",children:d[l.ARCHIVED]})};let m=function(e){return e.APPLIED_TRANSITION="APPLIED_TRANSITION",e.REQUESTED_TRANSITION="REQUESTED_TRANSITION",e.SYSTEM_TRANSITION="SYSTEM_TRANSITION",e.CANCELLED_REQUEST="CANCELLED_REQUEST",e.APPROVED_REQUEST="APPROVED_REQUEST",e.REJECTED_REQUEST="REJECTED_REQUEST",e.NEW_COMMENT="NEW_COMMENT",e}({});(0,a.Y)("div",{style:{marginTop:-12},children:"_"});const p={READY:"READY"},u={[p.READY]:(0,a.Y)(n.A,{id:"f/An1W",defaultMessage:"Ready."})},g={[p.READY]:(0,a.Y)(n.A,{id:"zAvilr",defaultMessage:"Ready"})},f={[p.READY]:(0,a.Y)(t.vV,{})},v=1e4,h=25,M=75,b="name",Y="timestamp",y={ASC:"ascend",DESC:"descend"},w=e=>(0,a.Y)(n.A,{id:"Ll6vbT",defaultMessage:"Model versions in the `{currentStage}` stage will be moved to the `Archived` stage.",values:{currentStage:e}}),A="https://mlflow.org/docs/latest/model-registry.html#using-registered-model-aliases"},30311:function(e,o,r){r.d(o,{o:function(){return y}});var s=r(89555),n=r(9133),t=r(31014),a=r(3293),l=r(17319),i=r(50400),d=r(64756),c=r(88464),m=r(88443),p=r(50111);var u={name:"1d3w5wq",styles:"width:100%"},g={name:"s079uh",styles:"margin-top:2px"},f={name:"82a6rk",styles:"flex:1"},v={name:"82a6rk",styles:"flex:1"};const h=e=>{let{renderKey:o,setDraftAliases:r,existingAliases:n,draftAliases:i,version:h,aliasToVersionMap:M,disabled:b}=e;const Y=(0,c.A)(),[y,w]=(0,t.useState)(!1),{theme:A}=(0,l.a)(),S=(0,t.useCallback)((e=>{r((o=>o.filter((o=>o!==e))))}),[r]),x=(0,t.useCallback)((e=>{const o=e.map((e=>e.replace(/[^\w-]/g,"").toLowerCase().substring(0,255))).filter((e=>e.length>0)),s=Array.from(new Set(o));r(s),w(!1)}),[r]);return(0,p.FD)(a._vn,{disabled:b,filterOption:(e,o)=>null===o||void 0===o?void 0:o.value.toLowerCase().startsWith(e.toLowerCase()),placeholder:Y.formatMessage({id:"bQZDSv",defaultMessage:"Enter aliases (champion, challenger, etc)"}),allowClear:!0,css:u,mode:"tags",onChange:x,dangerouslySetAntdProps:{dropdownMatchSelectWidth:!0,tagRender:e=>{let{value:o}=e;return(0,p.Y)(d.m,{compact:!0,css:g,closable:!0,onClose:()=>S(o.toString()),value:o.toString()})}},onDropdownVisibleChange:w,open:y,value:i||[],children:[n.map((e=>(0,p.Y)(a._vn.Option,{value:e,"data-testid":"model-alias-option",children:(0,p.FD)("div",{css:(0,s.AH)({display:"flex",marginRight:A.spacing.xs},""),children:[(0,p.Y)("div",{css:f,children:e}),(0,p.Y)("div",{children:(0,p.Y)(m.A,{id:"4OcdLd",defaultMessage:"This version"})})]},e)},e))),Object.entries(M).filter((e=>{let[,o]=e;return o!==h})).map((e=>{let[o,r]=e;return(0,p.Y)(a._vn.Option,{value:o,"data-testid":"model-alias-option",children:(0,p.FD)("div",{css:(0,s.AH)({display:"flex",marginRight:A.spacing.xs},""),children:[(0,p.Y)("div",{css:v,children:o}),(0,p.Y)("div",{children:(0,p.Y)(m.A,{id:"Boj6Fm",defaultMessage:"Version {version}",values:{version:r}})})]},o)},o)}))]},JSON.stringify(o))};var M=r(10811),b=r(69708),Y=r(81866);const y=e=>{let{model:o,onSuccess:r,modalTitle:d,modalDescription:c}=e;const[u,g]=(0,t.useState)(!1),[f]=a.SQ4.useForm(),[v,y]=(0,t.useState)(""),{theme:w}=(0,l.a)(),[A,S]=(0,t.useState)([]),[x,k]=(0,t.useState)([]),[D,E]=(0,t.useState)("0"),C=(0,M.wA)(),V=(0,t.useCallback)((e=>{var r;if(!o)return;const s=(null===(r=o.aliases)||void 0===r?void 0:r.filter((o=>{let{version:r}=o;return r===e})).map((e=>{let{alias:o}=e;return o})))||[];e&&(S(s),k(s),E(e),g(!0))}),[o]),_=(0,t.useMemo)((()=>{if(null===o||void 0===o||!o.aliases)return[];const e=o.aliases.reduce(((e,o)=>{var r;return e.some((e=>{let{version:r}=e;return r===o.version}))?(null===(r=e.find((e=>{let{version:r}=e;return r===o.version})))||void 0===r||r.aliases.push(o.alias),e):[...e,{version:o.version,aliases:[o.alias]}]}),[]),r=e.filter((e=>{let{version:o}=e;return o!==D}));return x.map((e=>({alias:e,otherVersion:r.find((o=>{var r;return null===(r=o.aliases)||void 0===r?void 0:r.find((o=>o===e))}))}))).filter((e=>{let{otherVersion:o}=e;return o}))}),[null===o||void 0===o?void 0:o.aliases,x,D]),T=(0,t.useMemo)((()=>{var e;return(null===o||void 0===o||null===(e=o.aliases)||void 0===e?void 0:e.reduce(((e,o)=>{let{alias:r,version:s}=o;return{...e,[r]:s}}),{}))||{}}),[o]),R=(0,n.isEqual)(A.slice().sort(),x.slice().sort()),P=x.length>10,I=R||P;return{EditAliasesModal:(0,p.FD)(i.M,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_127",visible:u,footer:(0,p.FD)("div",{children:[(0,p.Y)(l.B,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_131",onClick:()=>g(!1),children:(0,p.Y)(m.A,{id:"97hGxL",defaultMessage:"Cancel"})}),(0,p.Y)(l.B,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_137",loading:!1,type:"primary",disabled:I,onClick:()=>{o&&(y(""),C((0,b.mq)(o.name,D,A,x)).then((()=>{g(!1),null===r||void 0===r||r()})).catch((e=>{const o=e.getMessageField()||e.getUserVisibleError().toString()||e.text;y(o)})))},children:(0,p.Y)(m.A,{id:"cruwL4",defaultMessage:"Save aliases"})})]}),destroyOnClose:!0,title:d?d(D):(0,p.Y)(m.A,{id:"4Jyn2b",defaultMessage:"Add/Edit alias for model version {version}",values:{version:D}}),onCancel:()=>g(!1),confirmLoading:!1,children:[(0,p.Y)(l.r.Paragraph,{children:null!==c&&void 0!==c?c:(0,p.Y)(m.A,{id:"2DNVN4",defaultMessage:"Aliases allow you to assign a mutable, named reference to a particular model version. <link>Learn more</link>",values:{link:e=>(0,p.Y)("a",{href:Y.Tm,rel:"noreferrer",target:"_blank",children:e})}})}),(0,p.FD)(a.SQ4,{form:f,layout:"vertical",children:[(0,p.Y)(a.SQ4.Item,{children:(0,p.Y)(h,{disabled:!1,renderKey:_,aliasToVersionMap:T,version:D,draftAliases:x,existingAliases:A,setDraftAliases:k})}),(0,p.FD)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",gap:w.spacing.xs},""),children:[P&&(0,p.Y)(a.FcD,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_192",role:"alert",message:(0,p.Y)(m.A,{id:"q/Z61H",defaultMessage:"You are exceeding a limit of {limit} aliases assigned to the single model version",values:{limit:10}}),type:"error",closable:!1}),_.map((e=>{let{alias:o,otherVersion:r}=e;return(0,p.Y)(a.FcD,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_206",role:"alert",message:(0,p.Y)(m.A,{id:"EBQwqu",defaultMessage:'The "{alias}" alias is also being used on version {otherVersion}. Adding it to this version will remove it from version {otherVersion}.',values:{otherVersion:null===r||void 0===r?void 0:r.version,alias:o}}),type:"info",closable:!1},o)})),v&&(0,p.Y)(a.FcD,{componentId:"codegen_mlflow_app_src_model-registry_hooks_useeditregisteredmodelaliasesmodal.tsx_220",role:"alert",message:v,type:"error",closable:!1})]})]})]}),showEditAliasesModal:V}}},37616:function(e,o,r){r.d(o,{z7:function(){return p}});var s=r(17729),n=r(74702),t=r(42346);var a={'code[class*="language-"]':{fontFamily:'Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace',fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC"},'pre[class*="language-"]':{fontFamily:'Consolas, Menlo, Monaco, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", "Courier New", Courier, monospace',fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC",padding:"1em",margin:".5em 0",overflow:"auto"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},':not(pre) > code[class*="language-"]':{padding:".1em",borderRadius:".3em"},comment:{color:"#6c6783"},prolog:{color:"#6c6783"},doctype:{color:"#6c6783"},cdata:{color:"#6c6783"},punctuation:{color:"#6c6783"},namespace:{Opacity:".7"},tag:{color:"#3AACE2"},operator:{color:"#3AACE2"},number:{color:"#3AACE2"},property:{color:"#5DFAFC"},function:{color:"#5DFAFC"},"tag-id":{color:"#eeebff"},selector:{color:"#eeebff"},"atrule-id":{color:"#eeebff"},"code.language-javascript":{color:"#c4b9fe"},"attr-name":{color:"#c4b9fe"},"code.language-css":{color:"#ffffff"},"code.language-scss":{color:"#ffffff"},boolean:{color:"#ffffff"},string:{color:"#ffffff"},entity:{color:"#ffffff",cursor:"help"},url:{color:"#ffffff"},".language-css .token.string":{color:"#ffffff"},".language-scss .token.string":{color:"#ffffff"},".style .token.string":{color:"#ffffff"},"attr-value":{color:"#ffffff"},keyword:{color:"#ffffff"},control:{color:"#ffffff"},directive:{color:"#ffffff"},unit:{color:"#ffffff"},statement:{color:"#ffffff"},regex:{color:"#ffffff"},atrule:{color:"#ffffff"},placeholder:{color:"#ffffff"},variable:{color:"#ffffff"},deleted:{textDecoration:"line-through"},inserted:{borderBottom:"1px dotted #eeebff",textDecoration:"none"},italic:{fontStyle:"italic"},important:{fontWeight:"bold",color:"#c4b9fe"},bold:{fontWeight:"bold"},"pre > code.highlight":{Outline:".4em solid #8a75f5",OutlineOffset:".4em"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#2c2937"},".line-numbers .line-numbers-rows > span:before":{color:"#3c3949"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(224, 145, 66, 0.2) 70%, rgba(224, 145, 66, 0))"}};var l={'code[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",overflow:"auto",position:"relative",margin:"0.5em 0",padding:"1.25em 1em"},'code[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},':not(pre) > code[class*="language-"]':{whiteSpace:"normal",borderRadius:"0.2em",padding:"0.1em"},".language-css > code":{color:"#f5871f"},".language-sass > code":{color:"#f5871f"},".language-scss > code":{color:"#f5871f"},'[class*="language-"] .namespace':{Opacity:"0.7"},atrule:{color:"#7c4dff"},"attr-name":{color:"#39adb5"},"attr-value":{color:"#f6a434"},attribute:{color:"#f6a434"},boolean:{color:"#7c4dff"},builtin:{color:"#39adb5"},cdata:{color:"#39adb5"},char:{color:"#39adb5"},class:{color:"#39adb5"},"class-name":{color:"#6182b8"},comment:{color:"#8e908c"},constant:{color:"#7c4dff"},deleted:{color:"#e53935"},doctype:{color:"#aabfc9"},entity:{color:"#e53935"},function:{color:"#4271ae"},hexcode:{color:"#f5871f"},id:{color:"#7c4dff",fontWeight:"bold"},important:{color:"#7c4dff",fontWeight:"bold"},inserted:{color:"#39adb5"},keyword:{color:"#8959a8"},number:{color:"#f5871f"},operator:{color:"#3e999f"},prolog:{color:"#aabfc9"},property:{color:"#39adb5"},"pseudo-class":{color:"#f6a434"},"pseudo-element":{color:"#f6a434"},punctuation:{color:"rgb(77, 77, 76)"},regex:{color:"#6182b8"},selector:{color:"#e53935"},string:{color:"#3ba85f"},symbol:{color:"#7c4dff"},tag:{color:"#e53935"},unit:{color:"#f5871f"},url:{color:"#e53935"},variable:{color:"#c72d4c"}},i=r(9133),d=r(50111);s.A.registerLanguage("python",n.A),s.A.registerLanguage("json",t.A);const c="24px",m={light:l,duotoneDark:a};function p(e){let{theme:o="light",language:r,actions:n,style:t,children:a,showLineNumbers:l,lineNumberStyle:p,wrapLongLines:u}=e;const g={border:"none",borderRadius:0,margin:0,padding:c,...t};return(0,d.Y)(s.A,{showLineNumbers:l,lineNumberStyle:p,language:r,style:m[o],customStyle:g,codeTagProps:{style:(0,i.pick)(t,"backgroundColor")},wrapLongLines:u,children:a})}}}]);
//# sourceMappingURL=532.1ef66316.chunk.js.map