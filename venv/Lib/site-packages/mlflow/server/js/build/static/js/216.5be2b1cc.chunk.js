"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[216],{98597:function(e,a,t){t.d(a,{t:function(){return v}});var o=t(89555),n=t(3293),s=t(17319),l=t(31014),r=t(88464),i=t(50400),d=t(56412),c=t(50111);const{Paragraph:u}=s.r;var g={name:"zjik7",styles:"display:flex"},f={name:"1ff36h2",styles:"flex-grow:1"};const m=l.memo((e=>{const{theme:a}=(0,s.a)();return(0,c.Y)(i.M,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:g,children:[(0,c.Y)(u,{css:f,children:(0,c.Y)("pre",{css:(0,o.AH)({backgroundColor:a.colors.backgroundPrimary,marginTop:a.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,o.AH)({marginTop:a.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(n.TdU,{}),"aria-label":"Copy"})})]})})})),h=30;function p(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const v=e=>{let{isClosable:a=!1,onClose:t,tag:i,enableFullViewModal:d=!1,charLimit:u=h,maxWidth:g=300,className:f}=e;const v=(0,r.A)(),[y,_]=(0,l.useState)(!1),{shouldTruncateKey:C,shouldTruncateValue:w}=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;const{key:t,value:o}=e,n=t.length+o.length,s=t.length>o.length,l=s?o.length:t.length;return n<=a?{shouldTruncateKey:!1,shouldTruncateValue:!1}:l>a/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:s,shouldTruncateValue:!s}}(i,u),k=d&&(C||w),M=v.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(n.vwO,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:a,onClose:t,title:i.key,className:f,children:(0,c.Y)(n.paO,{title:k?M:"",children:(0,c.FD)("span",{css:(0,o.AH)({maxWidth:g,display:"inline-flex"},""),onClick:()=>k?_(!0):void 0,children:[(0,c.Y)(s.r.Text,{bold:!0,title:i.key,css:p(C),children:i.key}),i.value&&(0,c.FD)(s.r.Text,{title:i.value,css:p(w),children:[": ",i.value]})]})})}),(0,c.Y)("div",{children:y&&(0,c.Y)(m,{tagKey:i.key,tagValue:i.value,isKeyValueTagFullViewModalVisible:y,setIsKeyValueTagFullViewModalVisible:_})})]})}},43683:function(e,a,t){t.d(a,{Q:function(){return k}});var o=t(89555),n=t(9133),s=t(31014),l=t(17319),r=t(50400),i=t(3293),d=t(88464),c=t(88443),u=t(13369),g=t(50111);var f={name:"4zleql",styles:"display:block"};function m(e){return a=>function(e,a){const t=(0,d.A)(),{theme:r}=(0,l.a)(),c=e.props.searchValue.toLowerCase();return(0,s.useMemo)((()=>{if(!c)return e;if((0,n.sortedIndexOf)(a,c)>=0)return e;const l=/^[^,.:/=\-\s]+$/.test(c);return s.cloneElement(e,{flattenOptions:[{data:{value:c,disabled:!l,style:{color:l?r.colors.actionTertiaryTextDefault:r.colors.actionDisabledText},children:(0,g.Y)(i.paO,{title:l?void 0:t.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,g.FD)("span",{css:f,children:[(0,g.Y)(i.c11,{css:(0,o.AH)({marginRight:r.spacing.sm},"")}),t.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:c})]})})},key:c,groupOption:!1},...e.props.flattenOptions]})}),[a,e,c,t,r])}(a,e)}var h={name:"1d3w5wq",styles:"width:100%"};function p(e){let{allAvailableTags:a,control:t,onKeyChangeCallback:o}=e;const n=(0,d.A)(),[l,r]=(0,s.useState)(!1),c=(0,s.useRef)(null),{field:f,fieldState:p}=(0,u.as)({control:t,name:"key",rules:{required:{message:n.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,g.Y)(i._vn,{allowClear:!0,ref:c,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:m(a)},css:h,placeholder:n.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:f.value,defaultValue:f.value,open:l,onDropdownVisibleChange:e=>{r(e)},filterOption:(e,a)=>null===a||void 0===a?void 0:a.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{f.onChange(e),null===o||void 0===o||o(e)},onClear:()=>{f.onChange(void 0),null===o||void 0===o||o(void 0)},validationState:p.error?"error":void 0,children:a.map((e=>(0,g.Y)(i._vn.Option,{value:e,children:e},e)))})}var v=t(98597),y=t(52350);function _(e){return new Map(e.map((e=>[e.key,e])))}var C={name:"82a6rk",styles:"flex:1"},w={name:"82a6rk",styles:"flex:1"};const k=e=>{let{onSuccess:a,saveTagsHandler:t,allAvailableTags:f,valueRequired:m=!1,title:h}=e;const k=(0,s.useRef)(),[M,b]=(0,s.useState)(""),{theme:x}=(0,l.a)(),[Y,S]=(0,s.useState)(new Map),[T,V]=(0,s.useState)(new Map),[F,I]=(0,s.useState)(!1),D=(0,u.mN)({defaultValues:{key:void 0,value:""}}),B=()=>I(!1),O=(0,s.useCallback)((e=>{k.current=e,S(_(e.tags||[])),V(_(e.tags||[])),D.reset(),I(!0)}),[D]),K=async()=>{k.current&&(b(""),U(!0),t(k.current,Array.from(Y.values()),Array.from(T.values())).then((()=>{B(),null===a||void 0===a||a(),U(!1)})).catch((e=>{var a;U(!1),b(e instanceof y.s?null===(a=e.getUserVisibleError())||void 0===a?void 0:a.message:e.message)})))},L=(0,d.A)(),H=D.watch(),[P,U]=(0,s.useState)(!1),W=(0,s.useMemo)((()=>!(0,n.isEqual)((0,n.sortBy)(Array.from(Y.values()),"key"),(0,n.sortBy)(Array.from(T.values()),"key"))),[Y,T]),$=H.key||H.value,E=W&&$;return{EditTagsModal:(0,g.FD)(r.M,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:F,title:null!==h&&void 0!==h?h:(0,g.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:B,footer:(0,g.FD)(l.R,{children:[(0,g.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:B,css:(0,o.AH)({marginRight:W?0:x.spacing.sm},""),children:L.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),E?(0,g.Y)(A,{formValues:H,isLoading:P,onSaveTask:K}):(0,g.Y)(i.paO,{title:W?void 0:L.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,g.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!W,loading:P,type:"primary",onClick:K,children:L.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,g.FD)("form",{onSubmit:D.handleSubmit((()=>{if(m&&!H.value.trim())return;const e=new Map(T);e.set(H.key,H),V(e),D.reset()})),css:(0,o.AH)({display:"flex",alignItems:"flex-end",gap:x.spacing.md},""),children:[(0,g.FD)("div",{css:(0,o.AH)({minWidth:0,display:"flex",gap:x.spacing.md,flex:1},""),children:[(0,g.FD)("div",{css:C,children:[(0,g.Y)(i.D$Q.Label,{htmlFor:"key",children:L.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,g.Y)(p,{allAvailableTags:f||[],control:D.control,onKeyChangeCallback:e=>{var a;const t=e?T.get(e):void 0;D.setValue("value",null!==(a=null===t||void 0===t?void 0:t.value)&&void 0!==a?a:"")}})]}),(0,g.FD)("div",{css:w,children:[(0,g.Y)(i.D$Q.Label,{htmlFor:"value",children:m?L.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):L.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,g.Y)(i.tc_.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:D.control,"aria-label":m?L.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):L.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:L.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,g.Y)(i.paO,{title:L.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,g.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":L.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,g.Y)(i.c11,{})})})]}),M&&(0,g.Y)(i.D$Q.Message,{type:"error",message:M}),(0,g.Y)("div",{css:(0,o.AH)({display:"flex",rowGap:x.spacing.xs,flexWrap:"wrap",marginTop:x.spacing.sm},""),children:Array.from(T.values()).map((e=>(0,g.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(e=>{let{key:a}=e;V((e=>(e.delete(a),new Map(e))))})(e)},e.key)))})]}),showEditTagsModal:O,isLoading:P}};var M={name:"1y0ex1",styles:"max-width:400px"};function A(e){let{isLoading:a,formValues:t,onSaveTask:s}=e;const r=(0,d.A)(),{theme:i}=(0,l.a)(),c=`${`${(0,n.truncate)(t.key,{length:20})||"_"}`}${t.value?`:${(0,n.truncate)(t.value,{length:20})}`:""}`,u=r.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:c});return(0,g.FD)(l.as.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,g.Y)(l.as.Trigger,{asChild:!0,children:(0,g.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:a,type:"primary",children:r.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,g.FD)(l.as.Content,{align:"end","aria-label":u,children:[(0,g.Y)(l.r.Paragraph,{css:M,children:u}),(0,g.Y)(l.as.Close,{asChild:!0,children:(0,g.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:s,children:r.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,g.Y)(l.as.Close,{asChild:!0,children:(0,g.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,o.AH)({marginLeft:i.spacing.sm},""),children:r.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,g.Y)(l.as.Arrow,{})]})]})}},45653:function(e,a,t){t.d(a,{Qr:function(){return d},U1:function(){return p},Xb:function(){return f},Y7:function(){return l},fx:function(){return r},ib:function(){return v},yv:function(){return c},z7:function(){return h}});var o=t(9133),n=t.n(o);const s=()=>t.e(386).then(t.t.bind(t,86386,23)),l=(e,a)=>{const t=n().truncate(e,{length:a});return n().takeWhile(t,(e=>"\n"!==e)).join("")},r=(e,a)=>{if(e.length>a){const t=Math.floor((a-3)/2),o=a-3-t;return e.substring(0,t)+"..."+e.substring(e.length-o,e.length)}return e},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=e=>{let a="",t=0;const o=u(e);for(;t<o.length;){const e=o.charCodeAt(t++),n=o.charCodeAt(t++),s=o.charCodeAt(t++),l=e>>2,r=(3&e)<<4|n>>4;let d=(15&n)<<2|s>>6,c=63&s;isNaN(n)?(c=64,d=c):isNaN(s)&&(c=64),a=a+i.charAt(l)+i.charAt(r)+i.charAt(d)+i.charAt(c)}return a},c=e=>{let a="",t=0;const o=(null===e||void 0===e?void 0:e.replace(/[^A-Za-z0-9+/=]/g,""))||"";for(;t<o.length;){const e=i.indexOf(o.charAt(t++)),n=i.indexOf(o.charAt(t++)),s=i.indexOf(o.charAt(t++)),l=i.indexOf(o.charAt(t++)),r=e<<2|n>>4,d=(15&n)<<4|s>>2,c=(3&s)<<6|l;a+=String.fromCharCode(r),64!==s&&(a+=String.fromCharCode(d)),64!==l&&(a+=String.fromCharCode(c))}return g(a)},u=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\r\n/g,"\n");let a="";for(let t=0;t<e.length;t++){const o=e.charCodeAt(t);a+=o<128?String.fromCharCode(o):o>127&&o<2048?String.fromCharCode(o>>6|192)+String.fromCharCode(63&o|128):String.fromCharCode(o>>12|224)+String.fromCharCode(o>>6&63|128)+String.fromCharCode(63&o|128)}return a},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a="",t=0;for(;t<e.length;){const o=e.charCodeAt(t);if(o<128)a+=String.fromCharCode(o),t++;else if(o>191&&o<224){const n=e.charCodeAt(t+1);a+=String.fromCharCode((31&o)<<6|63&n),t+=2}else{const n=e.charCodeAt(t+1),s=e.charCodeAt(t+2);a+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&s),t+=3}}return a},f=e=>crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then((e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join(""))),m="deflate;",h=async e=>{const a=(await s()).deflate(e);if("undefined"!==typeof Buffer){const e=Buffer.from(a).toString("base64");return`${m}${e}`}const t=Array.from(a,(e=>String.fromCodePoint(e))).join("");return`${m}${btoa(t)}`},p=async e=>{const a=await s();if(!e.startsWith(m))throw new Error("Invalid compressed text, payload header invalid");const t=e.slice(8);if("undefined"!==typeof Buffer){const e=Buffer.from(t,"base64");return a.inflate(e,{to:"string"})}const o=atob(t);return a.inflate(Uint8Array.from(o,(e=>{var a;return null!==(a=e.codePointAt(0))&&void 0!==a?a:0})),{to:"string"})},v=e=>e.startsWith(m)},56412:function(e,a,t){t.d(a,{i:function(){return d}});var o=t(31014),n=t(88443),s=t(3293),l=t(17319),r=t(50111);var i={name:"1739oy8",styles:"z-index:1"};const d=e=>{let{copyText:a,showLabel:t=!0,componentId:d,...c}=e;const[u,g]=(0,o.useState)(!1);return(0,r.Y)(s.paO,{title:(0,r.Y)(n.A,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:u},children:(0,r.Y)(l.B,{componentId:null!==d&&void 0!==d?d:"mlflow.shared.copy_button",type:"primary",onClick:()=>{navigator.clipboard.writeText(a),g(!0),setTimeout((()=>{g(!1)}),3e3)},onMouseLeave:()=>{g(!1)},css:i,children:t?(0,r.Y)(n.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...c})})}}}]);
//# sourceMappingURL=216.5be2b1cc.chunk.js.map