"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[965],{98597:function(e,r,s){s.d(r,{t:function(){return v}});var a=s(89555),o=s(3293),t=s(17319),n=s(31014),l=s(88464),i=s(50400),d=s(56412),c=s(50111);const{Paragraph:u}=t.r;var m={name:"zjik7",styles:"display:flex"},p={name:"1ff36h2",styles:"flex-grow:1"};const g=n.memo((e=>{const{theme:r}=(0,t.a)();return(0,c.Y)(i.M,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(u,{css:p,children:(0,c.Y)("pre",{css:(0,a.AH)({backgroundColor:r.colors.backgroundPrimary,marginTop:r.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,a.AH)({marginTop:r.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(o.TdU,{}),"aria-label":"Copy"})})]})})})),h=30;function f(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const v=e=>{let{isClosable:r=!1,onClose:s,tag:i,enableFullViewModal:d=!1,charLimit:u=h,maxWidth:m=300,className:p}=e;const v=(0,l.A)(),[y,w]=(0,n.useState)(!1),{shouldTruncateKey:E,shouldTruncateValue:k}=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;const{key:s,value:a}=e,o=s.length+a.length,t=s.length>a.length,n=t?a.length:s.length;return o<=r?{shouldTruncateKey:!1,shouldTruncateValue:!1}:n>r/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:t,shouldTruncateValue:!t}}(i,u),_=d&&(E||k),M=v.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(o.vwO,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:r,onClose:s,title:i.key,className:p,children:(0,c.Y)(o.paO,{title:_?M:"",children:(0,c.FD)("span",{css:(0,a.AH)({maxWidth:m,display:"inline-flex"},""),onClick:()=>_?w(!0):void 0,children:[(0,c.Y)(t.r.Text,{bold:!0,title:i.key,css:f(E),children:i.key}),i.value&&(0,c.FD)(t.r.Text,{title:i.value,css:f(k),children:[": ",i.value]})]})})}),(0,c.Y)("div",{children:y&&(0,c.Y)(g,{tagKey:i.key,tagValue:i.value,isKeyValueTagFullViewModalVisible:y,setIsKeyValueTagFullViewModalVisible:w})})]})}},43683:function(e,r,s){s.d(r,{Q:function(){return _}});var a=s(89555),o=s(9133),t=s(31014),n=s(17319),l=s(50400),i=s(3293),d=s(88464),c=s(88443),u=s(13369),m=s(50111);var p={name:"4zleql",styles:"display:block"};function g(e){return r=>function(e,r){const s=(0,d.A)(),{theme:l}=(0,n.a)(),c=e.props.searchValue.toLowerCase();return(0,t.useMemo)((()=>{if(!c)return e;if((0,o.sortedIndexOf)(r,c)>=0)return e;const n=/^[^,.:/=\-\s]+$/.test(c);return t.cloneElement(e,{flattenOptions:[{data:{value:c,disabled:!n,style:{color:n?l.colors.actionTertiaryTextDefault:l.colors.actionDisabledText},children:(0,m.Y)(i.paO,{title:n?void 0:s.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,m.FD)("span",{css:p,children:[(0,m.Y)(i.c11,{css:(0,a.AH)({marginRight:l.spacing.sm},"")}),s.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:c})]})})},key:c,groupOption:!1},...e.props.flattenOptions]})}),[r,e,c,s,l])}(r,e)}var h={name:"1d3w5wq",styles:"width:100%"};function f(e){let{allAvailableTags:r,control:s,onKeyChangeCallback:a}=e;const o=(0,d.A)(),[n,l]=(0,t.useState)(!1),c=(0,t.useRef)(null),{field:p,fieldState:f}=(0,u.as)({control:s,name:"key",rules:{required:{message:o.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,m.Y)(i._vn,{allowClear:!0,ref:c,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:g(r)},css:h,placeholder:o.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:p.value,defaultValue:p.value,open:n,onDropdownVisibleChange:e=>{l(e)},filterOption:(e,r)=>null===r||void 0===r?void 0:r.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{p.onChange(e),null===a||void 0===a||a(e)},onClear:()=>{p.onChange(void 0),null===a||void 0===a||a(void 0)},validationState:f.error?"error":void 0,children:r.map((e=>(0,m.Y)(i._vn.Option,{value:e,children:e},e)))})}var v=s(98597),y=s(52350);function w(e){return new Map(e.map((e=>[e.key,e])))}var E={name:"82a6rk",styles:"flex:1"},k={name:"82a6rk",styles:"flex:1"};const _=e=>{let{onSuccess:r,saveTagsHandler:s,allAvailableTags:p,valueRequired:g=!1,title:h}=e;const _=(0,t.useRef)(),[M,A]=(0,t.useState)(""),{theme:S}=(0,n.a)(),[T,Y]=(0,t.useState)(new Map),[b,C]=(0,t.useState)(new Map),[P,L]=(0,t.useState)(!1),U=(0,u.mN)({defaultValues:{key:void 0,value:""}}),R=()=>L(!1),I=(0,t.useCallback)((e=>{_.current=e,Y(w(e.tags||[])),C(w(e.tags||[])),U.reset(),L(!0)}),[U]),V=async()=>{_.current&&(A(""),q(!0),s(_.current,Array.from(T.values()),Array.from(b.values())).then((()=>{R(),null===r||void 0===r||r(),q(!1)})).catch((e=>{var r;q(!1),A(e instanceof y.s?null===(r=e.getUserVisibleError())||void 0===r?void 0:r.message:e.message)})))},N=(0,d.A)(),F=U.watch(),[D,q]=(0,t.useState)(!1),O=(0,t.useMemo)((()=>!(0,o.isEqual)((0,o.sortBy)(Array.from(T.values()),"key"),(0,o.sortBy)(Array.from(b.values()),"key"))),[T,b]),j=F.key||F.value,$=O&&j;return{EditTagsModal:(0,m.FD)(l.M,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:P,title:null!==h&&void 0!==h?h:(0,m.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:R,footer:(0,m.FD)(n.R,{children:[(0,m.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:R,css:(0,a.AH)({marginRight:O?0:S.spacing.sm},""),children:N.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),$?(0,m.Y)(x,{formValues:F,isLoading:D,onSaveTask:V}):(0,m.Y)(i.paO,{title:O?void 0:N.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,m.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!O,loading:D,type:"primary",onClick:V,children:N.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,m.FD)("form",{onSubmit:U.handleSubmit((()=>{if(g&&!F.value.trim())return;const e=new Map(b);e.set(F.key,F),C(e),U.reset()})),css:(0,a.AH)({display:"flex",alignItems:"flex-end",gap:S.spacing.md},""),children:[(0,m.FD)("div",{css:(0,a.AH)({minWidth:0,display:"flex",gap:S.spacing.md,flex:1},""),children:[(0,m.FD)("div",{css:E,children:[(0,m.Y)(i.D$Q.Label,{htmlFor:"key",children:N.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,m.Y)(f,{allAvailableTags:p||[],control:U.control,onKeyChangeCallback:e=>{var r;const s=e?b.get(e):void 0;U.setValue("value",null!==(r=null===s||void 0===s?void 0:s.value)&&void 0!==r?r:"")}})]}),(0,m.FD)("div",{css:k,children:[(0,m.Y)(i.D$Q.Label,{htmlFor:"value",children:g?N.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):N.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,m.Y)(i.tc_.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:U.control,"aria-label":g?N.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):N.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:N.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,m.Y)(i.paO,{title:N.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":N.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(i.c11,{})})})]}),M&&(0,m.Y)(i.D$Q.Message,{type:"error",message:M}),(0,m.Y)("div",{css:(0,a.AH)({display:"flex",rowGap:S.spacing.xs,flexWrap:"wrap",marginTop:S.spacing.sm},""),children:Array.from(b.values()).map((e=>(0,m.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(e=>{let{key:r}=e;C((e=>(e.delete(r),new Map(e))))})(e)},e.key)))})]}),showEditTagsModal:I,isLoading:D}};var M={name:"1y0ex1",styles:"max-width:400px"};function x(e){let{isLoading:r,formValues:s,onSaveTask:t}=e;const l=(0,d.A)(),{theme:i}=(0,n.a)(),c=`${`${(0,o.truncate)(s.key,{length:20})||"_"}`}${s.value?`:${(0,o.truncate)(s.value,{length:20})}`:""}`,u=l.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:c});return(0,m.FD)(n.as.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,m.Y)(n.as.Trigger,{asChild:!0,children:(0,m.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:r,type:"primary",children:l.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,m.FD)(n.as.Content,{align:"end","aria-label":u,children:[(0,m.Y)(n.r.Paragraph,{css:M,children:u}),(0,m.Y)(n.as.Close,{asChild:!0,children:(0,m.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:t,children:l.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,m.Y)(n.as.Close,{asChild:!0,children:(0,m.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,a.AH)({marginLeft:i.spacing.sm},""),children:l.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,m.Y)(n.as.Arrow,{})]})]})}},44479:function(e,r,s){s.d(r,{M:function(){return x}});var a=s(88443);let o=function(e){return e.UserInputError="UserInputError",e.UnexpectedSystemStateError="UnexpectedSystemStateError",e.ServerError="ServerError",e.SessionError="SessionError",e.NetworkError="NetworkError",e.ApplicationError="ApplicationError",e.UnknownError="UnknownError",e}({}),t=function(e){return e.BadRequestError="BadRequestError",e.FormValidationError="FormInputError",e.GenericNetworkRequestError="GenericNetworkRequestError",e.GraphQLGenericError="GraphQLGenericError",e.InternalServerError="InternalServerError",e.NotFoundError="NotFoundError",e.PermissionError="PermissionError",e.RateLimitedError="RateLimitedError",e.RouteNotFoundError="RouteNotFoundError",e.ServiceUnavailableError="ServiceUnavailableError",e.UnauthorizedError="UnauthorizedError",e.UnknownError="UnknownError",e}({});var n=s(50111);class l extends Error{constructor(e,r){super(e),this.errorLogType=void 0,this.errorName=void 0,this.displayMessage=void 0,this.isUserError=!1}}const i=e=>{return"networkError"in e&&((r=e.networkError)instanceof Error&&r.hasOwnProperty("response"))?d(e.networkError.response,e.networkError):new m(e);var r},d=(e,r)=>{const s=c.getNetworkRequestErrorDetailsFromResponse(e);switch(e.status){case 400:return new p(s,r);case 401:return new w(s,r);case 403:return new f(s,r);case 404:return new h(s,r);case 429:return new v(s,r);case 500:return new g(s,r);case 503:return new y(s,r);default:return new u(s,r)}};class c extends l{constructor(e,r,s){super(e,s),this.status=void 0,this.status=r.status}}c.getNetworkRequestErrorDetailsFromResponse=e=>({status:e.status});class u extends c{constructor(e,r){super("A network error occurred.",e,r),this.errorLogType=o.ServerError,this.errorName=t.GenericNetworkRequestError,this.displayMessage=(0,n.Y)(a.A,{id:"/CaNq/",defaultMessage:"A network error occurred."})}}class m extends l{constructor(e){super("A GraphQL error occurred.",e),this.errorLogType=o.ApplicationError,this.errorName=t.GraphQLGenericError,this.displayMessage=(0,n.Y)(a.A,{id:"PPPbd+",defaultMessage:"A GraphQL error occurred."})}}class p extends c{constructor(e,r){super("The request was invalid.",e,r),this.errorLogType=o.UserInputError,this.errorName=t.BadRequestError,this.displayMessage=(0,n.Y)(a.A,{id:"Id2mFI",defaultMessage:"The request was invalid."})}}class g extends c{constructor(e,r){super("Internal server error",e,r),this.errorLogType=o.ServerError,this.errorName=t.InternalServerError,this.displayMessage=(0,n.Y)(a.A,{id:"nY1YrF",defaultMessage:"Internal server error"})}}class h extends c{constructor(e,r){super("The requested resource was not found.",e,r),this.errorLogType=o.UserInputError,this.errorName=t.NotFoundError,this.displayMessage=(0,n.Y)(a.A,{id:"R3Lb6z",defaultMessage:"The requested resource was not found."}),this.isUserError=!0}}class f extends c{constructor(e,r){super("You do not have permission to access this resource.",e,r),this.errorLogType=o.UnexpectedSystemStateError,this.errorName=t.PermissionError,this.displayMessage=(0,n.Y)(a.A,{id:"G6IQTa",defaultMessage:"You do not have permission to access this resource."}),this.isUserError=!0}}class v extends c{constructor(e,r){super("This request exceeds the maximum queries per second limit. Please wait and try again.",e,r),this.errorLogType=o.ServerError,this.errorName=t.RateLimitedError,this.displayMessage=(0,n.Y)(a.A,{id:"5PlfiT",defaultMessage:"This request exceeds the maximum queries per second limit. Please wait and try again."})}}class y extends c{constructor(e,r){super("Internal server error",e,r),this.errorLogType=o.ServerError,this.errorName=t.InternalServerError,this.displayMessage=(0,n.Y)(a.A,{id:"/XlqZA",defaultMessage:"Service unavailable error"})}}class w extends c{constructor(e,r){super("This request exceeds the maximum queries per second limit. Please wait and try again.",e,r),this.errorLogType=o.SessionError,this.errorName=t.UnauthorizedError,this.displayMessage=(0,n.Y)(a.A,{id:"gqfk5C",defaultMessage:"User is not authorized."})}}class E extends l{constructor(e){super("An unknown error occurred.",e),this.errorLogType=o.UnknownError,this.errorName=t.UnknownError,this.displayMessage=(0,n.Y)(a.A,{id:"bKSd3c",defaultMessage:"An unknown error occurred."})}}var k=s(53962),_=s(84565);const M=async e=>{let{reject:r,response:s,err:a}=e;const o=(e=>e instanceof l?e:e instanceof Error&&("networkError"in e||"graphQLErrors"in e)?i(e):e instanceof Response?d(e):new E(e))(s),t=o instanceof E?a:o;if(s)try{var n;const e=null===(n=await s.json())||void 0===n?void 0:n.message;e&&(t.message=e)}catch{}r(t)},x={listRegisteredPrompts:(e,r)=>{const s=new URLSearchParams;let a=`tags.\`${_.PS}\` = '${_.pY}'`;e&&(a=`${a} AND name ILIKE '%${e}%'`),r&&s.append("page_token",r),s.append("filter",a);const o=["ajax-api/2.0/mlflow/registered-models/search",s.toString()].join("?");return(0,k.AC)({relativeUrl:o,error:M})},setRegisteredPromptTag:(e,r,s)=>(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/set-tag",method:"POST",body:JSON.stringify({key:r,value:s,name:e}),error:M}),deleteRegisteredPromptTag:(e,r)=>(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/delete-tag",method:"DELETE",body:JSON.stringify({key:r,name:e}),error:M}),createRegisteredPrompt:e=>(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/create",method:"POST",body:JSON.stringify({name:e,tags:[{key:_.PS,value:_.pY}]}),error:M}),createRegisteredPromptVersion:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0;return(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/create",method:"POST",body:JSON.stringify({name:e,description:s,source:"dummy-source",tags:[{key:_.PS,value:_.pY},...r]}),error:M})},setRegisteredPromptVersionTag:(e,r,s,a)=>(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/set-tag",method:"POST",body:JSON.stringify({key:s,value:a,name:e,version:r}),error:M}),deleteRegisteredPromptVersionTag:(e,r,s)=>{(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/delete-tag",method:"DELETE",body:JSON.stringify({key:s,name:e,version:r}),error:M})},getPromptDetails:e=>{const r=new URLSearchParams;r.append("name",e);const s=["ajax-api/2.0/mlflow/registered-models/get",r.toString()].join("?");return(0,k.AC)({relativeUrl:s,error:M})},getPromptVersions:e=>{const r=new URLSearchParams;r.append("filter",`name='${e}' AND tags.\`${_.PS}\` = '${_.pY}'`);const s=["ajax-api/2.0/mlflow/model-versions/search",r.toString()].join("?");return(0,k.AC)({relativeUrl:s,error:M})},getPromptVersionsForRun:e=>{const r=new URLSearchParams;r.append("filter",`tags.\`${_.PS}\` = '${_.pY}' AND tags.\`${_.xd}\` ILIKE "%${e}%"`);const s=["ajax-api/2.0/mlflow/model-versions/search",r.toString()].join("?");return(0,k.AC)({relativeUrl:s,error:M})},deleteRegisteredPrompt:e=>(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/delete",method:"DELETE",body:JSON.stringify({name:e}),error:M}),deleteRegisteredPromptVersion:(e,r)=>(0,k.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/delete",method:"DELETE",body:JSON.stringify({name:e,version:r}),error:M})}},84565:function(e,r,s){s.d(r,{Dh:function(){return a},Dp:function(){return l},PS:function(){return t},dv:function(){return i},pY:function(){return n},xd:function(){return o}});const a="mlflow.prompt.text",o="mlflow.prompt.run_ids",t="mlflow.prompt.is_prompt",n="true";let l=function(e){return e.TABLE="table",e.PREVIEW="preview",e.COMPARE="compare",e}({});const i=e=>{var r,s;return null===e||void 0===e||null===(r=e.tags)||void 0===r||null===(s=r.find((e=>e.key===a)))||void 0===s?void 0:s.value}},56412:function(e,r,s){s.d(r,{i:function(){return d}});var a=s(31014),o=s(88443),t=s(3293),n=s(17319),l=s(50111);var i={name:"1739oy8",styles:"z-index:1"};const d=e=>{let{copyText:r,showLabel:s=!0,componentId:d,...c}=e;const[u,m]=(0,a.useState)(!1);return(0,l.Y)(t.paO,{title:(0,l.Y)(o.A,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:u},children:(0,l.Y)(n.B,{componentId:null!==d&&void 0!==d?d:"mlflow.shared.copy_button",type:"primary",onClick:()=>{navigator.clipboard.writeText(r),m(!0),setTimeout((()=>{m(!1)}),3e3)},onMouseLeave:()=>{m(!1)},css:i,children:s?(0,l.Y)(o.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...c})})}}}]);
//# sourceMappingURL=965.2b846b6f.chunk.js.map