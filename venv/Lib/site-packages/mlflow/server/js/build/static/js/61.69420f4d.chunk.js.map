{"version":3,"file":"static/js/61.69420f4d.chunk.js","mappings":"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","sources":["common/components/Prompt.tsx","common/components/EditableNote.tsx","model-registry/components/RegisterModel.tsx","experiment-tracking/components/ArtifactView.tsx","experiment-tracking/components/ArtifactPage.tsx","experiment-tracking/components/run-page/RunViewArtifactTab.tsx","experiment-tracking/components/run-page/useRunViewActiveTab.tsx","experiment-tracking/components/run-page/RunViewModeSwitch.tsx","experiment-tracking/components/run-page/RunViewHeaderRegisterModelButton.tsx","experiment-tracking/components/run-page/RunViewHeader.tsx","experiment-tracking/components/run-page/overview/RunViewStatusBox.tsx","experiment-tracking/components/run-page/overview/RunViewUserLinkBox.tsx","common/components/ExpandableCell.tsx","experiment-tracking/components/DetailsOverviewParamsTable.tsx","experiment-tracking/components/run-page/overview/RunViewMetricsTable.tsx","experiment-tracking/components/run-page/overview/RunViewDatasetBox.tsx","experiment-tracking/components/run-page/hooks/useGetRunQuery.tsx","experiment-tracking/components/run-page/overview/RunViewParentRunBox.tsx","experiment-tracking/components/run-page/overview/RunViewTagsBox.tsx","experiment-tracking/components/run-page/overview/RunViewDescriptionBox.tsx","experiment-tracking/components/DetailsOverviewMetadataRow.tsx","experiment-tracking/components/run-page/overview/RunViewRegisteredModelsBox.tsx","experiment-tracking/pages/prompts/hooks/usePromptVersionsForRunQuery.tsx","experiment-tracking/components/run-page/overview/RunViewRegisteredPromptsBox.tsx","experiment-tracking/components/run-page/overview/RunViewLoggedModelsBox.tsx","experiment-tracking/components/run-page/overview/RunViewSourceBox.tsx","experiment-tracking/components/DetailsOverviewMetadataTable.tsx","experiment-tracking/components/DetailsOverviewCopyableIdBox.tsx","experiment-tracking/components/run-page/RunViewOverview.tsx","experiment-tracking/components/run-page/hooks/useUnifiedRegisteredModelVersionsSummariesForRun.tsx","experiment-tracking/components/run-page/hooks/useRunDetailsPageData.tsx","experiment-tracking/components/run-page/useRunDetailsPageDataLegacy.tsx","experiment-tracking/components/RunNotFoundView.tsx","experiment-tracking/components/run-page/RunViewChartTooltipBody.tsx","experiment-tracking/components/run-page/RunViewMetricCharts.tsx","experiment-tracking/components/run-page/RunViewTracesTab.tsx","graphql/get-graphql-error.ts","experiment-tracking/components/run-page/RunPage.tsx","model-registry/components/RegisterModelForm.tsx","model-registry/utils/SearchUtils.ts","../node_modules/bytes/index.js"],"sourcesContent":["import React from 'react';\nimport { UNSAFE_NavigationContext } from '../utils/RoutingUtils';\n\nconst useNavigationBlock = () => {\n  return (React.useContext(UNSAFE_NavigationContext) as any).navigator.block;\n};\n\nexport interface PromptProps {\n  when: boolean;\n  message: string;\n}\n\n/**\n * Component confirms navigating away by displaying prompt if given condition is met.\n * Uses react-router v6 API.\n */\nexport const Prompt = ({ when, message }: PromptProps) => {\n  const block = useNavigationBlock();\n\n  React.useEffect(() => {\n    if (!when) return;\n\n    const unblock = block?.(() => {\n      // eslint-disable-next-line no-alert\n      return window.confirm(message);\n    });\n\n    // eslint-disable-next-line consistent-return\n    return unblock;\n  }, [message, block, when]);\n\n  return null;\n};\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React, { Component } from 'react';\nimport { Alert, Button, LegacyTooltip, useDesignSystemTheme } from '@databricks/design-system';\nimport { Prompt } from './Prompt';\nimport ReactMde, { SvgIcon } from 'react-mde';\nimport { forceAnchorTagNewTab, getMarkdownConverter, sanitizeConvertedHtml } from '../utils/MarkdownUtils';\nimport './EditableNote.css';\nimport { FormattedMessage, IntlShape, injectIntl } from 'react-intl';\n\ntype EditableNoteImplProps = {\n  defaultMarkdown?: string;\n  defaultSelectedTab?: string;\n  onSubmit?: (...args: any[]) => any;\n  onCancel?: (...args: any[]) => any;\n  showEditor?: boolean;\n  saveText?: any;\n  toolbarCommands?: any[];\n  maxEditorHeight?: number;\n  minEditorHeight?: number;\n  childProps?: any;\n  intl: IntlShape;\n};\n\ntype EditableNoteImplState = any;\n\nconst getReactMdeIcon = (name: string) => <TooltipIcon name={name} />;\n\nexport class EditableNoteImpl extends Component<EditableNoteImplProps, EditableNoteImplState> {\n  static defaultProps = {\n    defaultMarkdown: '',\n    defaultSelectedTab: 'write',\n    showEditor: false,\n    saveText: (\n      <FormattedMessage defaultMessage=\"Save\" description=\"Default text for save button on editable notes in MLflow\" />\n    ),\n    confirmLoading: false,\n    toolbarCommands: [\n      ['header', 'bold', 'italic', 'strikethrough'],\n      ['link', 'quote', 'code', 'image'],\n      ['unordered-list', 'ordered-list', 'checked-list'],\n    ],\n    maxEditorHeight: 500,\n    minEditorHeight: 200,\n    childProps: {},\n  };\n\n  state = {\n    markdown: this.props.defaultMarkdown,\n    selectedTab: this.props.defaultSelectedTab,\n    error: null,\n  };\n\n  converter = getMarkdownConverter();\n\n  handleMdeValueChange = (markdown: any) => {\n    this.setState({ markdown });\n  };\n\n  handleTabChange = (selectedTab: any) => {\n    this.setState({ selectedTab });\n  };\n\n  handleSubmitClick = () => {\n    const { onSubmit } = this.props;\n    const { markdown } = this.state;\n    this.setState({ confirmLoading: true });\n    if (onSubmit) {\n      return Promise.resolve(onSubmit(markdown))\n        .then(() => {\n          this.setState({ confirmLoading: false, error: null });\n        })\n        .catch((e) => {\n          this.setState({\n            confirmLoading: false,\n            error:\n              e && e.getMessageField\n                ? e.getMessageField()\n                : this.props.intl.formatMessage({\n                    defaultMessage: 'Failed to submit',\n                    description: 'Message text for failing to save changes in editable note in MLflow',\n                  }),\n          });\n        });\n    }\n    return null;\n  };\n\n  handleCancelClick = () => {\n    // Reset to the last defaultMarkdown passed in as props.\n    this.setState({\n      markdown: this.props.defaultMarkdown,\n      selectedTab: this.props.defaultSelectedTab,\n    });\n    const { onCancel } = this.props;\n    if (onCancel) {\n      onCancel();\n    }\n  };\n\n  contentHasChanged() {\n    return this.state.markdown !== this.props.defaultMarkdown;\n  }\n\n  renderActions() {\n    // @ts-expect-error TS(2339): Property 'confirmLoading' does not exist on type '... Remove this comment to see the full error message\n    const { confirmLoading } = this.state;\n    return (\n      <div className=\"editable-note-actions\" data-testid=\"editable-note-actions\">\n        <div>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_components_editablenote.tsx_114\"\n            type=\"primary\"\n            className=\"editable-note-save-button\"\n            onClick={this.handleSubmitClick}\n            disabled={!this.contentHasChanged() || confirmLoading}\n            loading={confirmLoading}\n            data-testid=\"editable-note-save-button\"\n          >\n            {this.props.saveText}\n          </Button>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_components_editablenote.tsx_124\"\n            htmlType=\"button\"\n            className=\"editable-note-cancel-button\"\n            onClick={this.handleCancelClick}\n            disabled={confirmLoading}\n          >\n            <FormattedMessage\n              defaultMessage=\"Cancel\"\n              description=\"Text for the cancel button in an editable note in MLflow\"\n            />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  getSanitizedHtmlContent() {\n    const { markdown } = this.state;\n    if (markdown) {\n      const sanitized = sanitizeConvertedHtml(this.converter.makeHtml(markdown));\n      return forceAnchorTagNewTab(sanitized);\n    }\n    return null;\n  }\n\n  render() {\n    const { showEditor } = this.props;\n    const { markdown, selectedTab, error } = this.state;\n    const htmlContent = this.getSanitizedHtmlContent();\n    return (\n      <div className=\"note-view-outer-container\" data-testid=\"note-view-outer-container\">\n        {showEditor ? (\n          <React.Fragment>\n            <div className=\"note-view-text-area\">\n              <ReactMde\n                value={markdown}\n                minEditorHeight={this.props.minEditorHeight}\n                maxEditorHeight={this.props.maxEditorHeight}\n                minPreviewHeight={50}\n                childProps={this.props.childProps}\n                toolbarCommands={this.props.toolbarCommands}\n                onChange={this.handleMdeValueChange}\n                // @ts-expect-error TS(2322): Type 'string' is not assignable to type '\"write\" |... Remove this comment to see the full error message\n                selectedTab={selectedTab}\n                onTabChange={this.handleTabChange}\n                // @ts-expect-error TS(2554): Expected 0 arguments, but got 1.\n                generateMarkdownPreview={(md) => Promise.resolve(this.getSanitizedHtmlContent(md))}\n                getIcon={getReactMdeIcon}\n              />\n            </div>\n            {error && (\n              <Alert\n                componentId=\"codegen_mlflow_app_src_common_components_editablenote.tsx_178\"\n                type=\"error\"\n                message={this.props.intl.formatMessage({\n                  defaultMessage: 'There was an error submitting your note.',\n                  description: 'Error message text when saving an editable note in MLflow',\n                })}\n                description={error}\n                closable\n              />\n            )}\n            {this.renderActions()}\n            <Prompt\n              when={this.contentHasChanged()}\n              message={this.props.intl.formatMessage({\n                defaultMessage: 'Are you sure you want to navigate away? Your pending text changes will be lost.',\n                description: 'Prompt text for navigating away before saving changes in editable note in MLflow',\n              })}\n            />\n          </React.Fragment>\n        ) : (\n          <HTMLNoteContent content={htmlContent} />\n        )}\n      </div>\n    );\n  }\n}\n\ntype TooltipIconProps = {\n  name?: string;\n};\n\nfunction TooltipIcon(props: TooltipIconProps) {\n  const { theme } = useDesignSystemTheme();\n  const { name } = props;\n  return (\n    // @ts-expect-error TS(2322): Type '{ children: Element; position: string; title... Remove this comment to see the full error message\n    <LegacyTooltip position=\"top\" title={name}>\n      <span css={{ color: theme.colors.textPrimary }}>\n        {/* @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message */}\n        <SvgIcon icon={name} />\n      </span>\n    </LegacyTooltip>\n  );\n}\n\ntype HTMLNoteContentProps = {\n  content?: string;\n};\n\nfunction HTMLNoteContent(props: HTMLNoteContentProps) {\n  const { content } = props;\n  return content ? (\n    <div className=\"note-view-outer-container\" data-testid=\"note-view-outer-container\">\n      <div className=\"note-view-text-area\">\n        <div className=\"note-view-preview note-editor-preview\">\n          <div\n            className=\"note-editor-preview-content\"\n            data-testid=\"note-editor-preview-content\"\n            // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: props.content }}\n          ></div>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <div>\n      <FormattedMessage defaultMessage=\"None\" description=\"Default text for no content in an editable note in MLflow\" />\n    </div>\n  );\n}\n\nexport const EditableNote = injectIntl(EditableNoteImpl);\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport _, { identity, isUndefined } from 'lodash';\nimport { Button, ButtonProps, Modal, Spacer, LegacyTooltip, Typography, ModalProps } from '@databricks/design-system';\nimport { FormattedMessage, injectIntl, type IntlShape } from 'react-intl';\nimport {\n  CREATE_NEW_MODEL_OPTION_VALUE,\n  MODEL_NAME_FIELD,\n  RegisterModelForm,\n  SELECTED_MODEL_FIELD,\n} from './RegisterModelForm';\nimport {\n  createModelVersionApi,\n  createRegisteredModelApi,\n  searchModelVersionsApi,\n  searchRegisteredModelsApi,\n} from '../actions';\nimport { connect } from 'react-redux';\nimport Utils from '../../common/utils/Utils';\nimport { getUUID } from '../../common/utils/ActionUtils';\nimport { getModelNameFilter } from '../utils/SearchUtils';\n\nconst MAX_SEARCH_REGISTERED_MODELS = 5;\n\ntype RegisterModelImplProps = {\n  disabled: boolean;\n  runUuid?: string;\n  loggedModelId?: string;\n  modelPath: string;\n  modelRelativePath?: string;\n  modelByName: any;\n  createRegisteredModelApi: (...args: any[]) => any;\n  createModelVersionApi: (...args: any[]) => any;\n  searchModelVersionsApi: (...args: any[]) => any;\n  searchRegisteredModelsApi: (...args: any[]) => any;\n  intl: IntlShape;\n  /**\n   * Type of button to display (\"primary\", \"link\", etc.)\n   */\n  buttonType?: ButtonProps['type'];\n  /**\n   * Tooltip to display on hover\n   */\n  tooltip?: React.ReactNode;\n  /**\n   * Whether to show the button. If set to true, only modal will be used and button will not be shown.\n   */\n  showButton?: boolean;\n  /**\n   * Whether the modal is visible. If set, modal visibility will be controlled by the props.\n   */\n  modalVisible?: boolean;\n  /**\n   * Callback to close the modal. If set, modal visibility will be controlled by the parent component.\n   */\n  onCloseModal?: () => void;\n  /**\n   * Callback to run after the model is registered.\n   */\n  onRegisterSuccess?: (data?: { value: { status?: string } }) => void;\n  /**\n   * Callback to run after the model is registered.\n   */\n  onRegisterFailure?: (reason?: any) => void;\n};\n\ntype RegisterModelImplState = any; // used in drop-down list so not many are visible at once\n\n/**\n * Component with a set of controls used to register a logged model.\n * Includes register modal and optional \"Register\" button.\n */\nexport class RegisterModelImpl extends React.Component<RegisterModelImplProps, RegisterModelImplState> {\n  form: any;\n\n  state = {\n    visible: false,\n    confirmLoading: false,\n    modelByName: {},\n  };\n\n  createRegisteredModelRequestId = getUUID();\n\n  createModelVersionRequestId = getUUID();\n\n  searchModelVersionRequestId = getUUID();\n  constructor() {\n    // @ts-expect-error TS(2554): Expected 1-2 arguments, but got 0.\n    super();\n    this.form = React.createRef();\n  }\n\n  showRegisterModal = () => {\n    this.setState({ visible: true });\n  };\n\n  hideRegisterModal = () => {\n    this.setState({ visible: false });\n    this.props.onCloseModal?.();\n  };\n\n  resetAndClearModalForm = () => {\n    this.setState({ visible: false, confirmLoading: false });\n    this.form.current?.resetFields();\n    this.props.onCloseModal?.();\n  };\n\n  handleRegistrationFailure = (e: any) => {\n    this.setState({ confirmLoading: false });\n    Utils.logErrorAndNotifyUser(e);\n  };\n\n  handleSearchRegisteredModels = (input: any) => {\n    this.props.searchRegisteredModelsApi(getModelNameFilter(input), MAX_SEARCH_REGISTERED_MODELS);\n  };\n\n  reloadModelVersionsForCurrentRun = () => {\n    const { runUuid } = this.props;\n    return this.props.searchModelVersionsApi({ run_id: runUuid }, this.searchModelVersionRequestId);\n  };\n\n  handleRegisterModel = () => {\n    return this.form.current.validateFields().then((values: any) => {\n      this.setState({ confirmLoading: true });\n      const { runUuid, modelPath } = this.props;\n      const selectedModelName = values[SELECTED_MODEL_FIELD];\n      if (selectedModelName === CREATE_NEW_MODEL_OPTION_VALUE) {\n        // When user choose to create a new registered model during the registration, we need to\n        // 1. Create a new registered model\n        // 2. Create model version #1 in the new registered model\n        return this.props\n          .createRegisteredModelApi(values[MODEL_NAME_FIELD], this.createRegisteredModelRequestId)\n          .then(() =>\n            this.props.createModelVersionApi(\n              values[MODEL_NAME_FIELD],\n              modelPath,\n              runUuid,\n              [],\n              this.createModelVersionRequestId,\n            ),\n          )\n          .then(this.props.onRegisterSuccess ?? identity)\n          .then(this.resetAndClearModalForm)\n          .catch(this.props.onRegisterFailure ?? this.handleRegistrationFailure)\n          .then(this.reloadModelVersionsForCurrentRun)\n          .catch(Utils.logErrorAndNotifyUser);\n      } else {\n        return this.props\n          .createModelVersionApi(selectedModelName, modelPath, runUuid, [], this.createModelVersionRequestId)\n          .then(this.props.onRegisterSuccess ?? identity)\n          .then(this.resetAndClearModalForm)\n          .catch(this.props.onRegisterFailure ?? this.handleRegistrationFailure)\n          .then(this.reloadModelVersionsForCurrentRun)\n          .catch(Utils.logErrorAndNotifyUser);\n      }\n    });\n  };\n\n  componentDidMount() {\n    this.props.searchRegisteredModelsApi();\n  }\n\n  componentDidUpdate(prevProps: RegisterModelImplProps, prevState: RegisterModelImplState) {\n    // Repopulate registered model list every time user launch the modal\n    if (prevState.visible === false && this.state.visible === true) {\n      this.props.searchRegisteredModelsApi();\n    }\n  }\n  renderRegisterModelForm() {\n    const { modelByName } = this.props;\n    return (\n      <RegisterModelForm\n        modelByName={modelByName}\n        innerRef={this.form}\n        onSearchRegisteredModels={_.debounce(this.handleSearchRegisteredModels, 300)}\n      />\n    );\n  }\n\n  renderFooter() {\n    return [\n      <Button\n        componentId=\"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_242\"\n        key=\"back\"\n        onClick={this.hideRegisterModal}\n      >\n        <FormattedMessage\n          defaultMessage=\"Cancel\"\n          description=\"Cancel button text to cancel the flow to register the model\"\n        />\n      </Button>,\n      <Button\n        componentId=\"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_248\"\n        key=\"submit\"\n        type=\"primary\"\n        onClick={() => this.handleRegisterModel()}\n        data-test-id=\"confirm-register-model\"\n      >\n        <FormattedMessage defaultMessage=\"Register\" description=\"Register button text to register the model\" />\n      </Button>,\n    ];\n  }\n\n  renderHelper(disableButton: boolean, form: React.ReactNode, footer: React.ReactNode) {\n    const { visible, confirmLoading } = this.state;\n    const { showButton = true, buttonType } = this.props;\n    return (\n      <div className=\"register-model-btn-wrapper\">\n        {showButton && (\n          <LegacyTooltip title={this.props.tooltip || null} placement=\"left\">\n            <Button\n              componentId=\"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_261\"\n              className=\"register-model-btn\"\n              type={buttonType}\n              onClick={this.showRegisterModal}\n              disabled={disableButton}\n              htmlType=\"button\"\n            >\n              <FormattedMessage\n                defaultMessage=\"Register model\"\n                description=\"Button text to register the model for deployment\"\n              />\n            </Button>\n          </LegacyTooltip>\n        )}\n        <Modal\n          title={this.props.intl.formatMessage({\n            defaultMessage: 'Register model',\n            description: 'Register model modal title to register the model for deployment',\n          })}\n          // @ts-expect-error TS(2322): Type '{ children: Element; title: any; width: numb... Remove this comment to see the full error message\n          width={540}\n          visible={this.props.modalVisible || visible}\n          onOk={() => this.handleRegisterModel()}\n          okText={this.props.intl.formatMessage({\n            defaultMessage: 'Register',\n            description: 'Confirmation text to register the model',\n          })}\n          confirmLoading={confirmLoading}\n          onCancel={this.hideRegisterModal}\n          centered\n          footer={footer}\n        >\n          {form}\n        </Modal>\n      </div>\n    );\n  }\n\n  render() {\n    const { disabled } = this.props;\n    return this.renderHelper(disabled, this.renderRegisterModelForm(), this.renderFooter());\n  }\n}\n\nconst mapStateToProps = (state: any) => {\n  return {\n    modelByName: state.entities.modelByName,\n  };\n};\n\nconst mapDispatchToProps = {\n  createRegisteredModelApi,\n  createModelVersionApi,\n  searchModelVersionsApi,\n  searchRegisteredModelsApi,\n};\n\nexport const RegisterModelWithIntl = injectIntl(RegisterModelImpl);\nexport const RegisterModel = connect(mapStateToProps, mapDispatchToProps)(RegisterModelWithIntl);\n\n// ..\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl, FormattedMessage, IntlShape, useIntl } from 'react-intl';\nimport { Link } from '../../common/utils/RoutingUtils';\nimport { getBasename } from '../../common/utils/FileUtils';\nimport { ArtifactNode as ArtifactUtils, ArtifactNode } from '../utils/ArtifactUtils';\n// @ts-expect-error TS(7016): Could not find a declaration file for module 'byte... Remove this comment to see the full error message\nimport bytes from 'bytes';\nimport { RegisterModel } from '../../model-registry/components/RegisterModel';\nimport ShowArtifactPage from './artifact-view-components/ShowArtifactPage';\nimport {\n  ModelVersionStatus,\n  ModelVersionStatusIcons,\n  DefaultModelVersionStatusMessages,\n  modelVersionStatusIconTooltips,\n} from '../../model-registry/constants';\nimport Utils from '../../common/utils/Utils';\nimport _, { first } from 'lodash';\nimport { ModelRegistryRoutes } from '../../model-registry/routes';\nimport {\n  DesignSystemHocProps,\n  Empty,\n  LayerIcon,\n  LegacyTooltip,\n  Typography,\n  WithDesignSystemThemeHoc,\n} from '@databricks/design-system';\nimport './ArtifactView.css';\n\nimport { getArtifactRootUri, getArtifacts } from '../reducers/Reducers';\nimport { getAllModelVersions } from '../../model-registry/reducers';\nimport { listArtifactsApi, listArtifactsLoggedModelApi } from '../actions';\nimport { MLMODEL_FILE_NAME } from '../constants';\nimport { getArtifactLocationUrl } from '../../common/utils/ArtifactUtils';\nimport { ArtifactViewTree } from './ArtifactViewTree';\nimport { useDesignSystemTheme } from '@databricks/design-system';\nimport { Button } from '@databricks/design-system';\nimport { CopyIcon } from '@databricks/design-system';\nimport { DownloadIcon } from '@databricks/design-system';\nimport { Checkbox } from '@databricks/design-system';\nimport { getLoggedTablesFromTags } from '@mlflow/mlflow/src/common/utils/TagUtils';\nimport { CopyButton } from '../../shared/building_blocks/CopyButton';\nimport { isExperimentLoggedModelsUIEnabled } from '../../common/utils/FeatureUtils';\nimport type { LoggedModelArtifactViewerProps } from './artifact-view-components/ArtifactViewComponents.types';\nimport { MlflowService } from '../sdk/MlflowService';\n\nconst { Text } = Typography;\n\ntype ArtifactViewImplProps = DesignSystemHocProps & {\n  runUuid: string;\n  initialSelectedArtifactPath?: string;\n  artifactNode: any; // TODO: PropTypes.instanceOf(ArtifactNode)\n  artifactRootUri: string;\n  listArtifactsApi: (...args: any[]) => any;\n  listArtifactsLoggedModelApi: typeof listArtifactsLoggedModelApi;\n  modelVersionsBySource: any;\n  handleActiveNodeChange: (...args: any[]) => any;\n  runTags?: any;\n  modelVersions?: any[];\n  intl: IntlShape;\n  getCredentialsForArtifactReadApi: (...args: any[]) => any;\n\n  /**\n   * If true, the artifact browser will try to use all available height\n   */\n  useAutoHeight?: boolean;\n} & LoggedModelArtifactViewerProps;\n\ntype ArtifactViewImplState = any;\n\nexport class ArtifactViewImpl extends Component<ArtifactViewImplProps, ArtifactViewImplState> {\n  state = {\n    activeNodeId: undefined,\n    toggledNodeIds: {},\n    requestedNodeIds: new Set(),\n    viewAsTable: true,\n  };\n\n  getExistingModelVersions() {\n    const { modelVersionsBySource } = this.props;\n    const activeNodeRealPath = Utils.normalize(this.getActiveNodeRealPath());\n    return modelVersionsBySource[activeNodeRealPath];\n  }\n\n  renderRegisterModelButton() {\n    const { runUuid } = this.props;\n    const { activeNodeId } = this.state;\n    const activeNodeRealPath = this.getActiveNodeRealPath();\n    return (\n      <RegisterModel\n        runUuid={runUuid}\n        modelPath={activeNodeRealPath}\n        modelRelativePath={String(activeNodeId)}\n        disabled={activeNodeId === undefined}\n        showButton\n        buttonType={undefined}\n      />\n    );\n  }\n\n  renderModelVersionInfoSection(existingModelVersions: any, intl: IntlShape) {\n    return <ModelVersionInfoSection modelVersion={_.last(existingModelVersions)} intl={this.props.intl} />;\n  }\n\n  renderPathAndSizeInfo() {\n    // We will only be in this function if this.state.activeNodeId is defined\n    const node = ArtifactUtils.findChild(this.props.artifactNode, this.state.activeNodeId);\n    const activeNodeRealPath = this.getActiveNodeRealPath();\n\n    return (\n      <div className=\"artifact-info-left\">\n        <div className=\"artifact-info-path\">\n          <label>\n            <FormattedMessage\n              defaultMessage=\"Full Path:\"\n              // eslint-disable-next-line max-len\n              description=\"Label to display the full path of where the artifact of the experiment runs is located\"\n            />\n          </label>{' '}\n          {/* @ts-expect-error TS(2322): Type '{ children: string; className: string; ellip... Remove this comment to see the full error message */}\n          <Text className=\"artifact-info-text\" ellipsis copyable>\n            {activeNodeRealPath}\n          </Text>\n        </div>\n        {node.fileInfo.is_dir === false ? (\n          <div className=\"artifact-info-size\">\n            <label>\n              <FormattedMessage\n                defaultMessage=\"Size:\"\n                description=\"Label to display the size of the artifact of the experiment\"\n              />\n            </label>{' '}\n            {bytes(this.getActiveNodeSize())}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n\n  renderSizeInfo() {\n    // We will only be in this function if this.state.activeNodeId is defined\n    const node = ArtifactUtils.findChild(this.props.artifactNode, this.state.activeNodeId);\n    const { theme } = this.props.designSystemThemeApi;\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: theme.spacing.sm,\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n        }}\n      >\n        <Typography.Text bold size=\"lg\" ellipsis title={this.state.activeNodeId}>\n          {this.state.activeNodeId}\n        </Typography.Text>\n        {node.fileInfo.is_dir === false && (\n          <Typography.Text color=\"secondary\">{bytes(this.getActiveNodeSize())}</Typography.Text>\n        )}\n      </div>\n    );\n  }\n\n  renderPathInfo() {\n    const activeNodeRealPath = this.getActiveNodeRealPath();\n    const { theme } = this.props.designSystemThemeApi;\n\n    return (\n      <div\n        css={{\n          display: 'flex',\n          overflow: 'hidden',\n          alignItems: 'center',\n          gap: theme.spacing.sm,\n        }}\n      >\n        <div\n          css={{\n            overflow: 'hidden',\n            whiteSpace: 'nowrap',\n            textOverflow: 'ellipsis',\n            flex: '0 auto',\n            color: theme.colors.textSecondary,\n          }}\n          title={activeNodeRealPath}\n        >\n          <FormattedMessage\n            defaultMessage=\"Path:\"\n            description=\"Label to display the full path of where the artifact of the experiment runs is located\"\n          />{' '}\n          {activeNodeRealPath}\n        </div>\n\n        <CopyButton\n          css={{ flex: '0 0 auto' }}\n          showLabel={false}\n          size=\"small\"\n          type=\"tertiary\"\n          copyText={activeNodeRealPath}\n          icon={<CopyIcon />}\n        />\n      </div>\n    );\n  }\n\n  onDownloadClick(runUuid: any, artifactPath: any) {\n    window.location.href = getArtifactLocationUrl(artifactPath, runUuid);\n  }\n\n  renderControls() {\n    const { runUuid } = this.props;\n    const { activeNodeId } = this.state;\n    return (\n      <div style={{ display: 'flex', alignItems: 'flex-start' }}>\n        <div style={{ display: 'inline-flex', alignItems: 'center' }}>\n          {this.shouldShowViewAsTableCheckbox && (\n            <Checkbox\n              componentId=\"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_288\"\n              isChecked={this.state.viewAsTable}\n              onChange={() =>\n                this.setState({\n                  viewAsTable: !this.state.viewAsTable,\n                })\n              }\n            >\n              <FormattedMessage\n                defaultMessage=\"View as table\"\n                description=\"Experiment tracking > Artifact view > View as table checkbox\"\n              />\n            </Checkbox>\n          )}\n          <LegacyTooltip\n            arrowPointAtCenter\n            placement=\"topLeft\"\n            title={this.props.intl.formatMessage({\n              defaultMessage: 'Download artifact',\n              description: 'Link to download the artifact of the experiment',\n            })}\n          >\n            <Button\n              componentId=\"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_337\"\n              icon={<DownloadIcon />}\n              onClick={() => this.onDownloadClick(runUuid, activeNodeId)}\n            />\n          </LegacyTooltip>\n        </div>\n      </div>\n    );\n  }\n\n  renderArtifactInfo() {\n    const existingModelVersions = this.getExistingModelVersions();\n    let toRender;\n    if (existingModelVersions && Utils.isModelRegistryEnabled()) {\n      // note that this case won't trigger for files inside a registered model/model version folder\n      // React searches for existing model versions under the path of the file, which won't exist.\n      toRender = this.renderModelVersionInfoSection(existingModelVersions, this.props.intl);\n    } else if (this.activeNodeCanBeRegistered() && Utils.isModelRegistryEnabled()) {\n      toRender = this.renderRegisterModelButton();\n    } else if (this.activeNodeIsDirectory()) {\n      toRender = null;\n    } else {\n      toRender = this.renderControls();\n    }\n    const { theme } = this.props.designSystemThemeApi;\n    return (\n      <div\n        css={{\n          padding: `${theme.spacing.xs}px ${theme.spacing.sm}px ${theme.spacing.sm}px ${theme.spacing.md}px`,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: theme.spacing.xs,\n        }}\n      >\n        <div\n          css={{\n            whiteSpace: 'nowrap',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            gap: theme.spacing.md,\n          }}\n        >\n          <div css={{ flex: '1 1', overflow: 'hidden' }}>{this.renderSizeInfo()}</div>\n          <div css={{ flex: '0 1' }}>{toRender}</div>\n        </div>\n\n        {this.renderPathInfo()}\n      </div>\n    );\n  }\n\n  onToggleTreebeard = (\n    dataNode: {\n      id: string;\n      loading: boolean;\n    },\n    toggled: boolean,\n  ) => {\n    const { id, loading } = dataNode;\n\n    const usingLoggedModels = isExperimentLoggedModelsUIEnabled() && this.props.isLoggedModelsMode;\n\n    const newRequestedNodeIds = new Set(this.state.requestedNodeIds);\n    // - loading indicates that this node is a directory and has not been loaded yet.\n    // - requestedNodeIds keeps track of in flight requests.\n    if (loading && !this.state.requestedNodeIds.has(id)) {\n      // Call relevant API based on the mode we are in\n      if (usingLoggedModels && this.props.loggedModelId) {\n        this.props.listArtifactsLoggedModelApi(this.props.loggedModelId, id);\n      } else {\n        this.props.listArtifactsApi(this.props.runUuid, id);\n      }\n    }\n    this.setState({\n      activeNodeId: id,\n      toggledNodeIds: {\n        ...this.state.toggledNodeIds,\n        [id]: toggled,\n      },\n      requestedNodeIds: newRequestedNodeIds,\n    });\n  };\n\n  getTreebeardData = (artifactNode: any): any => {\n    const { isRoot } = artifactNode;\n    if (isRoot) {\n      if (artifactNode.children) {\n        return Object.values(artifactNode.children).map((c) => this.getTreebeardData(c));\n      }\n      // This case should never happen since we should never call this function on an empty root.\n      throw Error('unreachable code.');\n    }\n\n    let id;\n    let name;\n    let toggled;\n    let children;\n    let active;\n\n    if (artifactNode.fileInfo) {\n      const { path } = artifactNode.fileInfo;\n      id = path;\n      name = getBasename(path);\n    }\n\n    // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const toggleState = this.state.toggledNodeIds[id];\n    if (toggleState) {\n      toggled = toggleState;\n    }\n\n    if (artifactNode.children) {\n      children = Object.values(artifactNode.children).map((c) => this.getTreebeardData(c));\n    }\n\n    if (this.state.activeNodeId === id) {\n      active = true;\n    }\n\n    const loading = artifactNode.children !== undefined && !artifactNode.isLoaded;\n\n    return {\n      id,\n      name,\n      toggled,\n      children,\n      active,\n      loading,\n    };\n  };\n\n  getActiveNodeRealPath() {\n    if (this.state.activeNodeId) {\n      return `${this.props.artifactRootUri}/${this.state.activeNodeId}`;\n    }\n    return this.props.artifactRootUri;\n  }\n\n  getActiveNodeSize() {\n    if (this.state.activeNodeId) {\n      const node = ArtifactUtils.findChild(this.props.artifactNode, this.state.activeNodeId);\n      const size = node.fileInfo.file_size || '0';\n      return parseInt(size, 10);\n    }\n    return 0;\n  }\n\n  activeNodeIsDirectory() {\n    if (this.state.activeNodeId) {\n      const node = ArtifactUtils.findChild(this.props.artifactNode, this.state.activeNodeId);\n      return node.fileInfo.is_dir;\n    } else {\n      // No node is highlighted so we're displaying the root, which is a directory.\n      return true;\n    }\n  }\n\n  activeNodeCanBeRegistered() {\n    if (this.state.activeNodeId) {\n      const node = ArtifactUtils.findChild(this.props.artifactNode, this.state.activeNodeId);\n      if (node && node.children && MLMODEL_FILE_NAME in node.children) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  componentDidUpdate(prevProps: ArtifactViewImplProps, prevState: ArtifactViewImplState) {\n    const { activeNodeId } = this.state;\n    if (prevState.activeNodeId !== activeNodeId) {\n      this.props.handleActiveNodeChange(this.activeNodeIsDirectory());\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.initialSelectedArtifactPath) {\n      const artifactPathParts = this.props.initialSelectedArtifactPath.split('/');\n      if (artifactPathParts) {\n        try {\n          // Check if valid artifactId was supplied in URL. If not, don't select\n          // or expand anything.\n          ArtifactUtils.findChild(this.props.artifactNode, this.props.initialSelectedArtifactPath);\n        } catch (err) {\n          // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n          console.error(err);\n          return;\n        }\n      }\n      let pathSoFar = '';\n      const toggledArtifactState = {\n        activeNodeId: this.props.initialSelectedArtifactPath,\n        toggledNodeIds: {},\n      };\n      artifactPathParts.forEach((part) => {\n        pathSoFar += part;\n        // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        toggledArtifactState['toggledNodeIds'][pathSoFar] = true;\n        pathSoFar += '/';\n      });\n      this.setArtifactState(toggledArtifactState);\n    }\n  }\n\n  setArtifactState(artifactState: any) {\n    this.setState(artifactState);\n  }\n\n  get shouldShowViewAsTableCheckbox() {\n    return (\n      this.state.activeNodeId &&\n      this.props.runTags &&\n      getLoggedTablesFromTags(this.props.runTags).includes(this.state.activeNodeId)\n    );\n  }\n\n  render() {\n    if (ArtifactUtils.isEmpty(this.props.artifactNode)) {\n      return <NoArtifactView useAutoHeight={this.props.useAutoHeight} />;\n    }\n    const { theme } = this.props.designSystemThemeApi;\n\n    const { loggedModelId, isLoggedModelsMode } = this.props;\n\n    return (\n      <div\n        className=\"artifact-view\"\n        css={{\n          flex: this.props.useAutoHeight ? 1 : 'unset',\n          height: this.props.useAutoHeight ? 'auto' : undefined,\n          [theme.responsive.mediaQueries.xs]: {\n            overflowX: 'auto',\n          },\n        }}\n      >\n        <div\n          style={{\n            minWidth: '200px',\n            maxWidth: '400px',\n            flex: 1,\n            whiteSpace: 'nowrap',\n            borderRight: `1px solid ${theme.colors.borderDecorative}`,\n          }}\n        >\n          <ArtifactViewTree\n            data={this.getTreebeardData(this.props.artifactNode)}\n            onToggleTreebeard={this.onToggleTreebeard}\n          />\n        </div>\n        <div className=\"artifact-right\">\n          {this.state.activeNodeId ? this.renderArtifactInfo() : null}\n          <ShowArtifactPage\n            runUuid={this.props.runUuid}\n            path={this.state.activeNodeId}\n            isDirectory={this.activeNodeIsDirectory()}\n            size={this.getActiveNodeSize()}\n            runTags={this.props.runTags}\n            artifactRootUri={this.props.artifactRootUri}\n            modelVersions={this.props.modelVersions}\n            showArtifactLoggedTableView={this.state.viewAsTable && this.shouldShowViewAsTableCheckbox}\n            loggedModelId={loggedModelId}\n            isLoggedModelsMode={isLoggedModelsMode}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any, ownProps: any) => {\n  const { runUuid, loggedModelId, isLoggedModelsMode } = ownProps;\n  const { apis } = state;\n  const artifactNode =\n    isLoggedModelsMode && loggedModelId ? getArtifacts(loggedModelId, state) : getArtifacts(runUuid, state);\n  const artifactRootUri = ownProps?.artifactRootUri ?? getArtifactRootUri(runUuid, state);\n  const modelVersions = getAllModelVersions(state);\n  const modelVersionsWithNormalizedSource = _.flatMap(modelVersions, (version) => {\n    // @ts-expect-error TS(2698): Spread types may only be created from object types... Remove this comment to see the full error message\n    return { ...version, source: Utils.normalize((version as any).source) };\n  });\n  const modelVersionsBySource = _.groupBy(modelVersionsWithNormalizedSource, 'source');\n  return { artifactNode, artifactRootUri, modelVersions, modelVersionsBySource, apis };\n};\n\nconst mapDispatchToProps = {\n  listArtifactsApi,\n  listArtifactsLoggedModelApi,\n};\n\nexport const ArtifactView = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(WithDesignSystemThemeHoc(injectIntl(ArtifactViewImpl)));\n\ntype ModelVersionInfoSectionProps = {\n  modelVersion: any;\n  intl: IntlShape;\n};\n\nfunction ModelVersionInfoSection(props: ModelVersionInfoSectionProps) {\n  const { modelVersion, intl } = props;\n  const { name, version, status, status_message } = modelVersion;\n\n  // eslint-disable-next-line prefer-const\n  let mvPageRoute = ModelRegistryRoutes.getModelVersionPageRoute(name, version);\n  const modelVersionLink = (\n    <LegacyTooltip title={`${name} version ${version}`}>\n      <Link to={mvPageRoute} className=\"model-version-link\" target=\"_blank\" rel=\"noreferrer\">\n        <span className=\"model-name\">{name}</span>\n        <span>,&nbsp;v{version}&nbsp;</span>\n        <i className=\"fas fa-external-link-o\" />\n      </Link>\n    </LegacyTooltip>\n  );\n\n  return (\n    <div className=\"model-version-info\">\n      <div className=\"model-version-link-section\">\n        <LegacyTooltip title={status_message || modelVersionStatusIconTooltips[status]}>\n          <div>{ModelVersionStatusIcons[status]}</div>\n        </LegacyTooltip>\n        {modelVersionLink}\n      </div>\n      <div className=\"model-version-status-text\">\n        {status === ModelVersionStatus.READY ? (\n          <React.Fragment>\n            <FormattedMessage\n              defaultMessage=\"Registered on {registeredDate}\"\n              description=\"Label to display at what date the model was registered\"\n              values={{\n                registeredDate: Utils.formatTimestamp(modelVersion.creation_timestamp, intl),\n              }}\n            />\n          </React.Fragment>\n        ) : (\n          status_message || DefaultModelVersionStatusMessages[status]\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction NoArtifactView({ useAutoHeight }: { useAutoHeight?: boolean }) {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <div\n      css={{\n        flex: useAutoHeight ? 1 : 'unset',\n        height: useAutoHeight ? 'auto' : undefined,\n        paddingTop: theme.spacing.md,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <Empty\n        image={<LayerIcon />}\n        title={\n          <FormattedMessage\n            defaultMessage=\"No Artifacts Recorded\"\n            description=\"Empty state string when there are no artifacts record for the experiment\"\n          />\n        }\n        description={\n          <FormattedMessage\n            defaultMessage=\"Use the log artifact APIs to store file outputs from MLflow runs.\"\n            description=\"Information in the empty state explaining how one could log artifacts output files for the experiment runs\"\n          />\n        }\n      />\n    </div>\n  );\n}\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { WithRouterNextProps, withRouterNext } from '../../common/utils/withRouterNext';\nimport { ArtifactView } from './ArtifactView';\nimport { Spinner } from '../../common/components/Spinner';\nimport { listArtifactsApi, listArtifactsLoggedModelApi } from '../actions';\nimport { searchModelVersionsApi } from '../../model-registry/actions';\nimport { isExperimentLoggedModelsUIEnabled } from '../../common/utils/FeatureUtils';\nimport { connect } from 'react-redux';\nimport { getArtifactRootUri } from '../reducers/Reducers';\nimport { MODEL_VERSION_STATUS_POLL_INTERVAL as POLL_INTERVAL } from '../../model-registry/constants';\nimport RequestStateWrapper from '../../common/components/RequestStateWrapper';\nimport Utils from '../../common/utils/Utils';\nimport { getUUID } from '../../common/utils/ActionUtils';\nimport { getLoggedModelPathsFromTags } from '../../common/utils/TagUtils';\nimport { ArtifactViewBrowserSkeleton } from './artifact-view-components/ArtifactViewSkeleton';\nimport { DangerIcon, Empty } from '@databricks/design-system';\nimport { ArtifactViewErrorState } from './artifact-view-components/ArtifactViewErrorState';\nimport type { LoggedModelArtifactViewerProps } from './artifact-view-components/ArtifactViewComponents.types';\nimport { ErrorWrapper } from '../../common/utils/ErrorWrapper';\n\ntype ArtifactPageImplProps = {\n  runUuid?: string;\n  initialSelectedArtifactPath?: string;\n  artifactRootUri?: string;\n  apis: any;\n  listArtifactsApi: (...args: any[]) => any;\n  listArtifactsLoggedModelApi: typeof listArtifactsLoggedModelApi;\n  searchModelVersionsApi: (...args: any[]) => any;\n  runTags?: any;\n\n  /**\n   * If true, the artifact browser will try to use all available height\n   */\n  useAutoHeight?: boolean;\n} & LoggedModelArtifactViewerProps;\n\ntype ArtifactPageImplState = any;\n\nexport class ArtifactPageImpl extends Component<ArtifactPageImplProps, ArtifactPageImplState> {\n  pollIntervalId: any;\n\n  getFailedtoListArtifactsMsg = () => {\n    return (\n      <span>\n        <FormattedMessage\n          // eslint-disable-next-line max-len\n          defaultMessage=\"Unable to list artifacts stored under {artifactUri} for the current run. Please contact your tracking server administrator to notify them of this error, which can happen when the tracking server lacks permission to list artifacts under the current run's root artifact directory.\"\n          // eslint-disable-next-line max-len\n          description=\"Error message when the artifact is unable to load. This message is displayed in the open source ML flow only\"\n          values={{ artifactUri: this.props.artifactRootUri }}\n        />\n      </span>\n    );\n  };\n\n  state = { activeNodeIsDirectory: false, errorThrown: false };\n\n  searchRequestId = getUUID();\n\n  listArtifactRequestIds = [getUUID()].concat(\n    this.props.initialSelectedArtifactPath\n      ? this.props.initialSelectedArtifactPath.split('/').map((s) => getUUID())\n      : [],\n  );\n\n  pollModelVersionsForCurrentRun = async () => {\n    const { apis, runUuid, isLoggedModelsMode } = this.props;\n    const { activeNodeIsDirectory } = this.state;\n    const searchRequest = apis[this.searchRequestId];\n    // Do not poll for run's model versions if we are in the logged models mode\n    if (isLoggedModelsMode && !runUuid) {\n      return;\n    }\n    if (activeNodeIsDirectory && !(searchRequest && searchRequest.active)) {\n      try {\n        // searchModelVersionsApi may be sync or async so we're not using <promise>.catch() syntax\n        await this.props.searchModelVersionsApi({ run_id: runUuid }, this.searchRequestId);\n      } catch (error) {\n        // We're not reporting errors more than once when polling\n        // in order to avoid flooding logs\n        if (!this.state.errorThrown) {\n          const errorString = error instanceof Error ? error.toString() : JSON.stringify(error);\n          const errorMessage = `Error while fetching model version for run: ${errorString}`;\n          Utils.logErrorAndNotifyUser(errorMessage);\n          this.setState({ errorThrown: true });\n        }\n      }\n    }\n  };\n\n  handleActiveNodeChange = (activeNodeIsDirectory: any) => {\n    this.setState({ activeNodeIsDirectory });\n  };\n\n  pollArtifactsForCurrentRun = async () => {\n    const { runUuid, loggedModelId } = this.props;\n\n    const usingLoggedModels = isExperimentLoggedModelsUIEnabled() && this.props.isLoggedModelsMode;\n\n    // In the logged models mode, fetch artifacts for the model instead of the run\n    if (usingLoggedModels && loggedModelId) {\n      await this.props.listArtifactsLoggedModelApi(this.props.loggedModelId, undefined, this.listArtifactRequestIds[0]);\n    } else {\n      await this.props.listArtifactsApi(runUuid, undefined, this.listArtifactRequestIds[0]);\n    }\n    if (this.props.initialSelectedArtifactPath) {\n      const parts = this.props.initialSelectedArtifactPath.split('/');\n      let pathSoFar = '';\n      for (let i = 0; i < parts.length; i++) {\n        pathSoFar += parts[i];\n        // ML-12477: ListArtifacts API requests need to be sent and fulfilled for parent\n        // directories before nested child directories, as our Reducers assume that parent\n        // directories are listed before their children to construct the correct artifact tree.\n        // Index i + 1 because listArtifactRequestIds[0] would have been used up by\n        // root-level artifact API call above.\n\n        // In the logged models mode, fetch artifacts for the model instead of the run\n        if (usingLoggedModels && loggedModelId) {\n          await this.props.listArtifactsLoggedModelApi(\n            this.props.loggedModelId,\n            pathSoFar,\n            this.listArtifactRequestIds[i + 1],\n          );\n        } else {\n          await this.props.listArtifactsApi(runUuid, pathSoFar, this.listArtifactRequestIds[i + 1]);\n        }\n        pathSoFar += '/';\n      }\n    }\n  };\n\n  componentDidMount() {\n    if (Utils.isModelRegistryEnabled()) {\n      this.pollModelVersionsForCurrentRun();\n      this.pollIntervalId = setInterval(this.pollModelVersionsForCurrentRun, POLL_INTERVAL);\n    }\n    this.pollArtifactsForCurrentRun();\n  }\n\n  componentDidUpdate(prevProps: ArtifactPageImplProps) {\n    if (prevProps.runUuid !== this.props.runUuid) {\n      this.setState({\n        errorThrown: false,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (Utils.isModelRegistryEnabled()) {\n      clearInterval(this.pollIntervalId);\n    }\n  }\n\n  renderErrorCondition = (shouldRenderError: any) => {\n    return shouldRenderError;\n  };\n\n  renderArtifactView = (isLoading: any, shouldRenderError: any, requests: any) => {\n    if (isLoading && !shouldRenderError) {\n      return <ArtifactViewBrowserSkeleton />;\n    }\n    if (this.renderErrorCondition(shouldRenderError)) {\n      const failedReq = requests[0];\n      if (failedReq && failedReq.error) {\n        // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n        console.error(failedReq.error);\n      }\n      const errorDescription = (() => {\n        const error = failedReq?.error;\n        if (error instanceof ErrorWrapper) {\n          return error.getMessageField();\n        }\n\n        return this.getFailedtoListArtifactsMsg();\n      })();\n      return (\n        <ArtifactViewErrorState\n          css={{ flex: this.props.useAutoHeight ? 1 : 'unset', height: this.props.useAutoHeight ? 'auto' : undefined }}\n          data-testid=\"artifact-view-error\"\n          description={errorDescription}\n        />\n      );\n    }\n    return (\n      <ArtifactView\n        {...this.props}\n        handleActiveNodeChange={this.handleActiveNodeChange}\n        useAutoHeight={this.props.useAutoHeight}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <RequestStateWrapper\n        requestIds={this.listArtifactRequestIds}\n        // eslint-disable-next-line no-trailing-spaces\n      >\n        {this.renderArtifactView}\n      </RequestStateWrapper>\n    );\n  }\n}\n\ntype ArtifactPageOwnProps = Omit<\n  ArtifactPageImplProps,\n  | 'apis'\n  | 'initialSelectedArtifactPath'\n  | 'listArtifactsApi'\n  | 'listArtifactsLoggedModelApi'\n  | 'searchModelVersionsApi'\n  /* prettier-ignore */\n>;\n\nconst mapStateToProps = (state: any, ownProps: ArtifactPageOwnProps & WithRouterNextProps) => {\n  const { runUuid, location } = ownProps;\n  const currentPathname = location?.pathname || '';\n\n  const initialSelectedArtifactPathMatch = currentPathname.match(/\\/(?:artifactPath|artifacts)\\/(.+)/);\n  // The dot (\"*\") parameter behavior is not stable between implementations\n  // so we'll extract the catch-all after /artifactPath, e.g.\n  // `/experiments/123/runs/321/artifactPath/models/requirements.txt`\n  // is getting transformed into\n  // `models/requirements.txt`\n  const initialSelectedArtifactPath = initialSelectedArtifactPathMatch?.[1] || undefined;\n\n  const { apis } = state;\n  const artifactRootUri = ownProps.artifactRootUri ?? getArtifactRootUri(runUuid, state);\n\n  // Autoselect most recently created logged model\n  let selectedPath = initialSelectedArtifactPath;\n  if (!selectedPath) {\n    const loggedModelPaths = getLoggedModelPathsFromTags(ownProps.runTags ?? {});\n    if (loggedModelPaths.length > 0) {\n      selectedPath = _.first(loggedModelPaths);\n    }\n  }\n  return { artifactRootUri, apis, initialSelectedArtifactPath: selectedPath };\n};\n\nconst mapDispatchToProps = {\n  listArtifactsApi,\n  listArtifactsLoggedModelApi,\n  searchModelVersionsApi,\n};\n\nexport const ConnectedArtifactPage = connect(mapStateToProps, mapDispatchToProps)(ArtifactPageImpl);\n\nexport default withRouterNext(ConnectedArtifactPage);\n","import { useDesignSystemTheme } from '@databricks/design-system';\nimport type { KeyValueEntity } from '../../types';\nimport ArtifactPage from '../ArtifactPage';\nimport { useMediaQuery } from '@databricks/web-shared/hooks';\n\n/**\n * A run page tab containing the artifact browser\n */\nexport const RunViewArtifactTab = ({\n  runTags,\n  artifactUri,\n  runUuid,\n}: {\n  runUuid: string;\n  experimentId: string;\n  artifactUri?: string;\n  runTags: Record<string, KeyValueEntity>;\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  // Use scrollable artifact area only for non-xs screens\n  const useFullHeightPage = useMediaQuery(`(min-width: ${theme.responsive.breakpoints.sm}px)`);\n\n  return (\n    <div\n      css={{\n        flex: 1,\n        overflow: 'hidden',\n        display: 'flex',\n        paddingBottom: theme.spacing.md,\n        position: 'relative',\n      }}\n    >\n      <ArtifactPage\n        runUuid={runUuid}\n        runTags={runTags}\n        useAutoHeight={useFullHeightPage}\n        artifactRootUri={artifactUri}\n      />\n    </div>\n  );\n};\n","import { shouldEnableRunDetailsPageTracesTab } from '../../../common/utils/FeatureUtils';\nimport { useParams } from '../../../common/utils/RoutingUtils';\nimport { RunPageTabName } from '../../constants';\n\n/**\n * Returns the run view's active tab.\n * - Supports multi-slash artifact paths (hence '*' catch-all param)\n * - Supports both new (/artifacts/...) and previous (/artifactPath/...) routes\n */\nexport const useRunViewActiveTab = (): RunPageTabName => {\n  const { '*': tabParam } = useParams<{ '*': string }>();\n  if (tabParam === 'model-metrics') {\n    return RunPageTabName.MODEL_METRIC_CHARTS;\n  }\n  if (tabParam === 'system-metrics') {\n    return RunPageTabName.SYSTEM_METRIC_CHARTS;\n  }\n  if (shouldEnableRunDetailsPageTracesTab() && tabParam === 'traces') {\n    return RunPageTabName.TRACES;\n  }\n  if (tabParam?.match(/^(artifactPath|artifacts)/)) {\n    return RunPageTabName.ARTIFACTS;\n  }\n\n  return RunPageTabName.OVERVIEW;\n};\n","import { LegacyTabs } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { useNavigate, useParams } from '../../../common/utils/RoutingUtils';\nimport Routes from '../../routes';\nimport { RunPageTabName } from '../../constants';\nimport { useRunViewActiveTab } from './useRunViewActiveTab';\nimport { useState } from 'react';\nimport { PreviewBadge } from '../../../shared/building_blocks/PreviewBadge';\nimport { shouldEnableRunDetailsPageTracesTab } from '../../../common/utils/FeatureUtils';\n\n// Set of tabs that when active, the margin of the tab selector should be removed for better displaying\nconst TABS_WITHOUT_MARGIN = [RunPageTabName.ARTIFACTS, RunPageTabName.EVALUATIONS];\n\n/**\n * Mode switcher for the run details page.\n */\nexport const RunViewModeSwitch = () => {\n  const { experimentId, runUuid } = useParams<{ runUuid: string; experimentId: string }>();\n  const navigate = useNavigate();\n  const currentTab = useRunViewActiveTab();\n  const [removeTabMargin, setRemoveTabMargin] = useState(TABS_WITHOUT_MARGIN.includes(currentTab));\n\n  const onTabChanged = (newTabKey: string) => {\n    if (!experimentId || !runUuid || currentTab === newTabKey) {\n      return;\n    }\n\n    setRemoveTabMargin(TABS_WITHOUT_MARGIN.includes(newTabKey as RunPageTabName));\n\n    if (newTabKey === RunPageTabName.OVERVIEW) {\n      navigate(Routes.getRunPageRoute(experimentId, runUuid));\n      return;\n    }\n    navigate(Routes.getRunPageTabRoute(experimentId, runUuid, newTabKey));\n  };\n\n  return (\n    // @ts-expect-error TS(2322)\n    <LegacyTabs activeKey={currentTab} onChange={onTabChanged} tabBarStyle={{ margin: removeTabMargin && '0px' }}>\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage defaultMessage=\"Overview\" description=\"Run details page > tab selector > overview tab\" />\n        }\n        key={RunPageTabName.OVERVIEW}\n      />\n\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage\n            defaultMessage=\"Model metrics\"\n            description=\"Run details page > tab selector > Model metrics tab\"\n          />\n        }\n        key={RunPageTabName.MODEL_METRIC_CHARTS}\n      />\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage\n            defaultMessage=\"System metrics\"\n            description=\"Run details page > tab selector > Model metrics tab\"\n          />\n        }\n        key={RunPageTabName.SYSTEM_METRIC_CHARTS}\n      />\n      {shouldEnableRunDetailsPageTracesTab() && (\n        <LegacyTabs.TabPane\n          tab={<FormattedMessage defaultMessage=\"Traces\" description=\"Run details page > tab selector > Traces tab\" />}\n          key={RunPageTabName.TRACES}\n        />\n      )}\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage defaultMessage=\"Artifacts\" description=\"Run details page > tab selector > artifacts tab\" />\n        }\n        key={RunPageTabName.ARTIFACTS}\n      />\n    </LegacyTabs>\n  );\n};\n","import {\n  Button,\n  ChevronDownIcon,\n  DropdownMenu,\n  NewWindowIcon,\n  Tag,\n  LegacyTooltip,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { first, last, orderBy } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { Link } from '../../../common/utils/RoutingUtils';\nimport Utils from '../../../common/utils/Utils';\nimport { RegisterModel } from '../../../model-registry/components/RegisterModel';\nimport { ModelVersionStatusIcons } from '../../../model-registry/constants';\nimport { ModelRegistryRoutes } from '../../../model-registry/routes';\nimport type { ReduxState } from '../../../redux-types';\nimport Routes from '../../routes';\nimport { KeyValueEntity, ModelVersionInfoEntity } from '../../types';\nimport { ReactComponent as RegisteredModelOkIcon } from '../../../common/static/registered-model-grey-ok.svg';\nimport { RunPageModelVersionSummary } from './hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\n\ninterface LoggedModelWithRegistrationInfo {\n  path: string;\n  absolutePath: string;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}\n\nfunction LoggedModelsDropdownContent({\n  models,\n  onRegisterClick,\n  experimentId,\n  runUuid,\n}: {\n  models: LoggedModelWithRegistrationInfo[];\n  onRegisterClick: (model: LoggedModelWithRegistrationInfo) => void;\n  experimentId: string;\n  runUuid: string;\n}) {\n  const { theme } = useDesignSystemTheme();\n  const renderSection = (title: string, sectionModels: LoggedModelWithRegistrationInfo[]) => {\n    return (\n      <DropdownMenu.Group>\n        <DropdownMenu.Label>{title}</DropdownMenu.Label>\n        {sectionModels.map((model) => {\n          const registeredModelSummary = first(model.registeredModelVersionSummaries);\n          if (!registeredModelSummary) {\n            return (\n              <DropdownMenu.Item\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50\"\n                onClick={() => onRegisterClick(model)}\n                key={model.absolutePath}\n              >\n                <div css={{ marginRight: theme.spacing.md }}>{last(model.path.split('/'))}</div>\n                <DropdownMenu.HintColumn>\n                  <Link\n                    target=\"_blank\"\n                    to={Routes.getRunPageTabRoute(experimentId, runUuid, 'artifacts/' + model.path)}\n                  >\n                    <Button\n                      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58\"\n                      type=\"link\"\n                      size=\"small\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                      }}\n                      endIcon={<NewWindowIcon />}\n                    >\n                      <FormattedMessage\n                        defaultMessage=\"View model\"\n                        description=\"Run page > Header > Register model dropdown > View model button label\"\n                      />\n                    </Button>\n                  </Link>\n                </DropdownMenu.HintColumn>\n              </DropdownMenu.Item>\n            );\n          }\n          const { status, displayedName, version, link } = registeredModelSummary;\n\n          return (\n            <Link target=\"_blank\" to={link} key={model.absolutePath}>\n              <DropdownMenu.Item componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80\">\n                <DropdownMenu.IconWrapper css={{ display: 'flex', alignItems: 'center' }}>\n                  {status === 'READY' ? <RegisteredModelOkIcon /> : status ? ModelVersionStatusIcons[status] : null}\n                </DropdownMenu.IconWrapper>\n                <span css={{ marginRight: theme.spacing.md }}>\n                  {displayedName}\n                  <Tag\n                    componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90\"\n                    css={{ marginLeft: 8, marginRight: 4 }}\n                  >\n                    v{version}\n                  </Tag>\n                </span>\n                <DropdownMenu.HintColumn>\n                  <Button\n                    componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89\"\n                    type=\"link\"\n                    size=\"small\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                    }}\n                    endIcon={<NewWindowIcon />}\n                  >\n                    <FormattedMessage\n                      defaultMessage=\"Go to model\"\n                      description=\"Run page > Header > Register model dropdown > Go to model button label\"\n                    />\n                  </Button>\n                </DropdownMenu.HintColumn>\n              </DropdownMenu.Item>\n            </Link>\n          );\n        })}\n      </DropdownMenu.Group>\n    );\n  };\n  const registeredModels = models.filter((model) => model.registeredModelVersionSummaries.length > 0);\n  const unregisteredModels = models.filter((model) => !model.registeredModelVersionSummaries.length);\n  return (\n    <>\n      {unregisteredModels.length ? renderSection('Unregistered models', unregisteredModels) : null}\n      {unregisteredModels.length && registeredModels.length ? <DropdownMenu.Separator /> : null}\n      {registeredModels.length ? renderSection('Registered models', registeredModels) : null}\n    </>\n  );\n}\n\nconst getRegisteredModelVersionLink = (modelVersion: ModelVersionInfoEntity) => {\n  const { name, version } = modelVersion;\n  return ModelRegistryRoutes.getModelVersionPageRoute(name, version);\n};\n\nexport const RunViewHeaderRegisterModelButton = ({\n  runUuid,\n  experimentId,\n  runTags,\n  artifactRootUri,\n  registeredModelVersionSummaries,\n}: {\n  runUuid: string;\n  experimentId: string;\n  runTags: Record<string, KeyValueEntity>;\n  artifactRootUri?: string;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  const loggedModelPaths = useMemo(\n    () => (runTags ? Utils.getLoggedModelsFromTags(runTags).map(({ artifactPath }) => artifactPath) : []),\n    [runTags],\n  );\n\n  const models = useMemo<LoggedModelWithRegistrationInfo[]>(\n    () =>\n      orderBy(\n        loggedModelPaths.map((path) => ({\n          path,\n          absolutePath: `${artifactRootUri}/${path}`,\n          registeredModelVersionSummaries:\n            registeredModelVersionSummaries?.filter(({ source }) => source === `${artifactRootUri}/${path}`) || [],\n        })),\n        (model) => parseInt(model.registeredModelVersionSummaries[0]?.version || '0', 10),\n        'desc',\n      ),\n    [loggedModelPaths, registeredModelVersionSummaries, artifactRootUri],\n  );\n\n  const [selectedModelToRegister, setSelectedModelToRegister] = useState<LoggedModelWithRegistrationInfo | null>(null);\n\n  if (models.length > 1) {\n    const modelsRegistered = models.filter((model) => model.registeredModelVersionSummaries.length > 0);\n\n    return (\n      <>\n        {selectedModelToRegister && (\n          <RegisterModel\n            runUuid={runUuid}\n            modelPath={selectedModelToRegister.absolutePath}\n            modelRelativePath={selectedModelToRegister.path}\n            disabled={false}\n            showButton={false}\n            modalVisible\n            onCloseModal={() => setSelectedModelToRegister(null)}\n          />\n        )}\n        <DropdownMenu.Root modal={false}>\n          <LegacyTooltip\n            placement=\"bottom\"\n            title={\n              <FormattedMessage\n                defaultMessage=\"{registeredCount}/{loggedCount} logged models are registered\"\n                description=\"Run page > Header > Register model dropdown > Button tooltip\"\n                values={{ registeredCount: modelsRegistered.length, loggedCount: models.length }}\n              />\n            }\n          >\n            <DropdownMenu.Trigger asChild>\n              <Button\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195\"\n                type=\"primary\"\n                endIcon={<ChevronDownIcon />}\n              >\n                <FormattedMessage\n                  defaultMessage=\"Register model\"\n                  description=\"Run page > Header > Register model dropdown > Button label when some models are not registered\"\n                />\n              </Button>\n            </DropdownMenu.Trigger>\n          </LegacyTooltip>\n          <DropdownMenu.Content align=\"end\">\n            <LoggedModelsDropdownContent\n              models={models}\n              onRegisterClick={setSelectedModelToRegister}\n              experimentId={experimentId}\n              runUuid={runUuid}\n            />\n          </DropdownMenu.Content>\n        </DropdownMenu.Root>\n      </>\n    );\n  }\n\n  const singleModel = first(models);\n\n  if (!singleModel) {\n    return null;\n  }\n\n  const registeredModelVersionSummary = first(singleModel.registeredModelVersionSummaries);\n\n  if (registeredModelVersionSummary) {\n    return (\n      <Link to={registeredModelVersionSummary.link} target=\"_blank\" css={{ marginLeft: theme.spacing.sm }}>\n        <Button\n          componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231\"\n          endIcon={<NewWindowIcon />}\n          type=\"link\"\n        >\n          Model registered\n        </Button>\n      </Link>\n    );\n  }\n  return (\n    <RegisterModel\n      disabled={false}\n      runUuid={runUuid}\n      modelPath={singleModel.absolutePath}\n      modelRelativePath={singleModel.path}\n      showButton\n      buttonType=\"primary\"\n    />\n  );\n};\n","import { FormattedMessage } from 'react-intl';\nimport { Link } from '../../../common/utils/RoutingUtils';\nimport { OverflowMenu, PageHeader } from '../../../shared/building_blocks/PageHeader';\nimport Routes from '../../routes';\nimport type { ExperimentEntity, KeyValueEntity } from '../../types';\nimport { RunViewModeSwitch } from './RunViewModeSwitch';\nimport Utils from '../../../common/utils/Utils';\nimport { RunViewHeaderRegisterModelButton } from './RunViewHeaderRegisterModelButton';\nimport type { UseGetRunQueryResponseExperiment } from './hooks/useGetRunQuery';\nimport type { RunPageModelVersionSummary } from './hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\n\n/**\n * Run details page header component, common for all page view modes\n */\nexport const RunViewHeader = ({\n  hasComparedExperimentsBefore,\n  comparedExperimentIds = [],\n  experiment,\n  runDisplayName,\n  runTags,\n  runParams,\n  runUuid,\n  handleRenameRunClick,\n  handleDeleteRunClick,\n  artifactRootUri,\n  registeredModelVersionSummaries,\n  isLoading,\n}: {\n  hasComparedExperimentsBefore?: boolean;\n  comparedExperimentIds?: string[];\n  runDisplayName: string;\n  runUuid: string;\n  runTags: Record<string, KeyValueEntity>;\n  runParams: Record<string, KeyValueEntity>;\n  experiment: ExperimentEntity | UseGetRunQueryResponseExperiment;\n  handleRenameRunClick: () => void;\n  handleDeleteRunClick?: () => void;\n  artifactRootUri?: string;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n  isLoading?: boolean;\n}) => {\n  function getExperimentPageLink() {\n    return hasComparedExperimentsBefore && comparedExperimentIds ? (\n      <Link to={Routes.getCompareExperimentsPageRoute(comparedExperimentIds)}>\n        <FormattedMessage\n          defaultMessage=\"Displaying Runs from {numExperiments} Experiments\"\n          // eslint-disable-next-line max-len\n          description=\"Breadcrumb nav item to link to the compare-experiments page on compare runs page\"\n          values={{\n            numExperiments: comparedExperimentIds.length,\n          }}\n        />\n      </Link>\n    ) : (\n      <Link to={Routes.getExperimentPageRoute(experiment?.experimentId ?? '')} data-test-id=\"experiment-runs-link\">\n        {experiment.name}\n      </Link>\n    );\n  }\n\n  const breadcrumbs = [getExperimentPageLink()];\n\n  const renderRegisterModelButton = () => {\n    return (\n      <RunViewHeaderRegisterModelButton\n        runUuid={runUuid}\n        experimentId={experiment?.experimentId ?? ''}\n        runTags={runTags}\n        artifactRootUri={artifactRootUri}\n        registeredModelVersionSummaries={registeredModelVersionSummaries}\n      />\n    );\n  };\n\n  return (\n    <div css={{ flexShrink: 0 }}>\n      <PageHeader\n        title={<span data-test-id=\"runs-header\">{runDisplayName}</span>}\n        breadcrumbs={breadcrumbs}\n        /* prettier-ignore */\n      >\n        <OverflowMenu\n          menu={[\n            {\n              id: 'overflow-rename-button',\n              onClick: handleRenameRunClick,\n              itemName: (\n                <FormattedMessage defaultMessage=\"Rename\" description=\"Menu item to rename an experiment run\" />\n              ),\n            },\n            ...(handleDeleteRunClick\n              ? [\n                  {\n                    id: 'overflow-delete-button',\n                    onClick: handleDeleteRunClick,\n                    itemName: (\n                      <FormattedMessage defaultMessage=\"Delete\" description=\"Menu item to delete an experiment run\" />\n                    ),\n                  },\n                ]\n              : []),\n          ]}\n        />\n\n        {renderRegisterModelButton()}\n      </PageHeader>\n      <RunViewModeSwitch />\n    </div>\n  );\n};\n","import { Tag, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { RunInfoEntity } from '../../../types';\nimport { RunStatusIcon } from '../../RunStatusIcon';\nimport { FormattedMessage } from 'react-intl';\nimport type { MlflowRunStatus } from '../../../../graphql/__generated__/graphql';\n\n/**\n * Displays run status cell in run detail overview.\n */\nexport const RunViewStatusBox = ({ status }: { status: RunInfoEntity['status'] | MlflowRunStatus | null }) => {\n  const { theme } = useDesignSystemTheme();\n  const getTagColor = () => {\n    if (status === 'FINISHED') {\n      return theme.isDarkMode ? theme.colors.green800 : theme.colors.green100;\n    }\n    if (status === 'KILLED' || status === 'FAILED') {\n      return theme.isDarkMode ? theme.colors.red800 : theme.colors.red100;\n    }\n    if (status === 'SCHEDULED' || status === 'RUNNING') {\n      return theme.isDarkMode ? theme.colors.blue800 : theme.colors.blue100;\n    }\n\n    return undefined;\n  };\n\n  const getStatusLabel = () => {\n    if (status === 'FINISHED') {\n      return (\n        <Typography.Text color=\"success\">\n          <FormattedMessage\n            defaultMessage=\"Finished\"\n            description=\"Run page > Overview > Run status cell > Value for finished state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'KILLED') {\n      return (\n        <Typography.Text color=\"error\">\n          <FormattedMessage\n            defaultMessage=\"Killed\"\n            description=\"Run page > Overview > Run status cell > Value for killed state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'FAILED') {\n      return (\n        <Typography.Text color=\"error\">\n          <FormattedMessage\n            defaultMessage=\"Failed\"\n            description=\"Run page > Overview > Run status cell > Value for failed state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'RUNNING') {\n      return (\n        <Typography.Text color=\"info\">\n          <FormattedMessage\n            defaultMessage=\"Running\"\n            description=\"Run page > Overview > Run status cell > Value for running state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'SCHEDULED') {\n      return (\n        <Typography.Text color=\"info\">\n          <FormattedMessage\n            defaultMessage=\"Scheduled\"\n            description=\"Run page > Overview > Run status cell > Value for scheduled state\"\n          />\n        </Typography.Text>\n      );\n    }\n    return status;\n  };\n\n  return (\n    <Tag\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81\"\n      css={{ backgroundColor: getTagColor() }}\n    >\n      {status && <RunStatusIcon status={status} />}{' '}\n      <Typography.Text css={{ marginLeft: theme.spacing.sm }}>{getStatusLabel()}</Typography.Text>\n    </Tag>\n  );\n};\n","import { Link } from '../../../../common/utils/RoutingUtils';\nimport Utils from '../../../../common/utils/Utils';\nimport Routes from '../../../routes';\nimport type { KeyValueEntity, RunInfoEntity } from '../../../types';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\nexport const RunViewUserLinkBox = ({\n  runInfo,\n  tags,\n}: {\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  tags: Record<string, KeyValueEntity>;\n}) => {\n  const user = Utils.getUser(runInfo, tags);\n  return <Link to={Routes.searchRunsByUser(runInfo?.experimentId ?? '', user)}>{user}</Link>;\n};\n","import { useMemo } from 'react';\nimport { Button, ChevronDownIcon, ChevronRightIcon, useDesignSystemTheme } from '@databricks/design-system';\n\nexport const ExpandedJSONValueCell = ({ value }: { value: string }) => {\n  const structuredJSONValue = useMemo(() => {\n    // Attempts to parse the value as JSON and returns a pretty printed version if successful.\n    // If JSON structure is not found, returns null.\n    try {\n      const objectData = JSON.parse(value);\n      return JSON.stringify(objectData, null, 2);\n    } catch (e) {\n      return null;\n    }\n  }, [value]);\n  return (\n    <div\n      css={{\n        whiteSpace: 'pre-wrap',\n        wordBreak: 'break-word',\n        fontFamily: structuredJSONValue ? 'monospace' : undefined,\n      }}\n    >\n      {structuredJSONValue || value}\n    </div>\n  );\n};\n\nconst ExpandableCell = ({\n  value,\n  isExpanded,\n  toggleExpanded,\n  hideCollapseButton,\n}: {\n  value: string;\n  isExpanded: boolean;\n  toggleExpanded: () => void;\n  hideCollapseButton?: boolean;\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        gap: theme.spacing.xs,\n      }}\n    >\n      {!hideCollapseButton && (\n        <Button\n          componentId=\"mlflow.common.expandable_cell\"\n          size=\"small\"\n          icon={isExpanded ? <ChevronDownIcon /> : <ChevronRightIcon />}\n          onClick={() => toggleExpanded()}\n          css={{ flexShrink: 0 }}\n        />\n      )}\n      <div\n        title={value}\n        css={{\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          display: '-webkit-box',\n          '-webkit-box-orient': 'vertical',\n          '-webkit-line-clamp': isExpanded ? undefined : '3',\n        }}\n      >\n        {isExpanded ? <ExpandedJSONValueCell value={value} /> : value}\n      </div>\n    </div>\n  );\n};\n","import {\n  Button,\n  ChevronDownIcon,\n  ChevronRightIcon,\n  Empty,\n  Input,\n  SearchIcon,\n  Table,\n  TableCell,\n  TableHeader,\n  TableRow,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\nimport { throttle, values } from 'lodash';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { ColumnDef, flexRender, getCoreRowModel, getExpandedRowModel, useReactTable } from '@tanstack/react-table';\nimport { Interpolation, Theme } from '@emotion/react';\nimport { ExpandedJSONValueCell } from '@mlflow/mlflow/src/common/components/ExpandableCell';\nimport { isUnstableNestedComponentsMigrated } from '../../common/utils/FeatureUtils';\n\ntype ParamsColumnDef = ColumnDef<KeyValueEntity> & {\n  meta?: { styles?: Interpolation<Theme>; multiline?: boolean };\n};\n\n/**\n * Displays cell with expandable parameter value.\n */\nconst ExpandableParamValueCell = ({\n  name,\n  value,\n  toggleExpanded,\n  isExpanded,\n  autoExpandedRowsList,\n}: {\n  name: string;\n  value: string;\n  toggleExpanded: () => void;\n  isExpanded: boolean;\n  autoExpandedRowsList: Record<string, boolean>;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const cellRef = useRef<HTMLDivElement>(null);\n  const [isOverflowing, setIsOverflowing] = useState(false);\n\n  useEffect(() => {\n    if (autoExpandedRowsList[name]) {\n      return;\n    }\n    if (isOverflowing) {\n      toggleExpanded();\n      autoExpandedRowsList[name] = true;\n    }\n  }, [autoExpandedRowsList, isOverflowing, name, toggleExpanded]);\n\n  // Check if cell is overflowing using resize observer\n  useEffect(() => {\n    if (!cellRef.current) return;\n\n    const resizeObserverCallback: ResizeObserverCallback = throttle(\n      ([entry]) => {\n        const isOverflowing = entry.target.scrollHeight > entry.target.clientHeight;\n        setIsOverflowing(isOverflowing);\n      },\n      500,\n      { trailing: true },\n    );\n\n    const resizeObserver = new ResizeObserver(resizeObserverCallback);\n    resizeObserver.observe(cellRef.current);\n    return () => resizeObserver.disconnect();\n  }, [cellRef, toggleExpanded]);\n\n  // Re-check if cell is overflowing after collapse\n  useEffect(() => {\n    if (!cellRef.current) return;\n    if (!isExpanded) {\n      const isOverflowing = cellRef.current.scrollHeight > cellRef.current.clientHeight;\n      if (isOverflowing) {\n        setIsOverflowing(true);\n      }\n    }\n  }, [isExpanded]);\n\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.xs }}>\n      {(isOverflowing || isExpanded) && (\n        <Button\n          componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_74\"\n          size=\"small\"\n          icon={isExpanded ? <ChevronDownIcon /> : <ChevronRightIcon />}\n          onClick={() => toggleExpanded()}\n          css={{ flexShrink: 0 }}\n        />\n      )}\n      <div\n        title={value}\n        css={{\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          display: '-webkit-box',\n          '-webkit-box-orient': 'vertical',\n          '-webkit-line-clamp': isExpanded ? undefined : '3',\n        }}\n        ref={cellRef}\n      >\n        {isExpanded ? <ExpandedJSONValueCell value={value} /> : value}\n      </div>\n    </div>\n  );\n};\n\ntype DetailsOverviewParamsTableMeta = {\n  autoExpandedRowsList: React.MutableRefObject<Record<string, boolean>>;\n};\n\nconst staticColumns: ParamsColumnDef[] = [\n  {\n    id: 'key',\n    accessorKey: 'key',\n    header: () => (\n      <FormattedMessage\n        defaultMessage=\"Parameter\"\n        description=\"Run page > Overview > Parameters table > Key column header\"\n      />\n    ),\n    enableResizing: true,\n    size: 240,\n  },\n  {\n    id: 'value',\n    header: () => (\n      <FormattedMessage\n        defaultMessage=\"Value\"\n        description=\"Run page > Overview > Parameters table > Value column header\"\n      />\n    ),\n    accessorKey: 'value',\n    enableResizing: false,\n    meta: { styles: { paddingLeft: 0 } },\n    cell: ({\n      row: { original, getIsExpanded, toggleExpanded },\n      table: {\n        options: { meta },\n      },\n    }) => {\n      const { autoExpandedRowsList } = meta as DetailsOverviewParamsTableMeta;\n      return (\n        <ExpandableParamValueCell\n          name={original.key}\n          value={original.value}\n          isExpanded={getIsExpanded()}\n          toggleExpanded={toggleExpanded}\n          autoExpandedRowsList={autoExpandedRowsList.current}\n        />\n      );\n    },\n  },\n];\n\n/**\n * Displays filterable table with parameter key/values.\n */\nexport const DetailsOverviewParamsTable = ({ params }: { params: Record<string, KeyValueEntity> }) => {\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n  const [filter, setFilter] = useState('');\n  const autoExpandedRowsList = useRef<Record<string, boolean>>({});\n\n  const paramsValues = useMemo(() => values(params), [params]);\n\n  const paramsList = useMemo(\n    () =>\n      paramsValues.filter(({ key, value }) => {\n        const filterLower = filter.toLowerCase();\n        return key.toLowerCase().includes(filterLower) || value.toLowerCase().includes(filterLower);\n      }),\n    [filter, paramsValues],\n  );\n\n  const columns = useMemo<ParamsColumnDef[]>(\n    () =>\n      isUnstableNestedComponentsMigrated()\n        ? staticColumns\n        : [\n            {\n              id: 'key',\n              accessorKey: 'key',\n              header: () => (\n                <FormattedMessage\n                  defaultMessage=\"Parameter\"\n                  description=\"Run page > Overview > Parameters table > Key column header\"\n                />\n              ),\n              enableResizing: true,\n              size: 240,\n            },\n            {\n              id: 'value',\n              header: () => (\n                <FormattedMessage\n                  defaultMessage=\"Value\"\n                  description=\"Run page > Overview > Parameters table > Value column header\"\n                />\n              ),\n              accessorKey: 'value',\n              enableResizing: false,\n              meta: { styles: { paddingLeft: 0 } },\n              cell: ({ row: { original, getIsExpanded, toggleExpanded } }) => (\n                <ExpandableParamValueCell\n                  name={original.key}\n                  value={original.value}\n                  isExpanded={getIsExpanded()}\n                  toggleExpanded={toggleExpanded}\n                  autoExpandedRowsList={autoExpandedRowsList.current}\n                />\n              ),\n            },\n          ],\n    [],\n  );\n\n  const table = useReactTable({\n    data: paramsList,\n    getCoreRowModel: getCoreRowModel(),\n    getExpandedRowModel: getExpandedRowModel(),\n    getRowId: (row) => row.key,\n    enableColumnResizing: true,\n    columnResizeMode: 'onChange',\n    columns,\n    meta: { autoExpandedRowsList } satisfies DetailsOverviewParamsTableMeta,\n  });\n\n  const renderTableContent = () => {\n    if (!paramsValues.length) {\n      return (\n        <div css={{ flex: '1', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <Empty\n            description={\n              <FormattedMessage\n                defaultMessage=\"No parameters recorded\"\n                description=\"Run page > Overview > Parameters table > No parameters recorded\"\n              />\n            }\n          />\n        </div>\n      );\n    }\n\n    const areAllResultsFiltered = paramsList.length < 1;\n\n    return (\n      <>\n        <div css={{ marginBottom: theme.spacing.sm }}>\n          <Input\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_213\"\n            prefix={<SearchIcon />}\n            placeholder={intl.formatMessage({\n              defaultMessage: 'Search parameters',\n              description: 'Run page > Overview > Parameters table > Filter input placeholder',\n            })}\n            value={filter}\n            onChange={(e) => setFilter(e.target.value)}\n            allowClear\n          />\n        </div>\n        <Table\n          scrollable\n          empty={\n            areAllResultsFiltered ? (\n              <div css={{ marginTop: theme.spacing.md * 4 }}>\n                <Empty\n                  description={\n                    <FormattedMessage\n                      defaultMessage=\"No parameters match the search filter\"\n                      description=\"Run page > Overview > Parameters table > No results after filtering\"\n                    />\n                  }\n                />\n              </div>\n            ) : null\n          }\n        >\n          <TableRow isHeader>\n            {table.getLeafHeaders().map((header, index) => (\n              <TableHeader\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_244\"\n                key={header.id}\n                resizable={header.column.getCanResize()}\n                resizeHandler={header.getResizeHandler()}\n                isResizing={header.column.getIsResizing()}\n                css={{\n                  flexGrow: header.column.getCanResize() ? 0 : 1,\n                }}\n                style={{\n                  flexBasis: header.column.getCanResize() ? header.column.getSize() : undefined,\n                }}\n              >\n                {flexRender(header.column.columnDef.header, header.getContext())}\n              </TableHeader>\n            ))}\n          </TableRow>\n          {table.getRowModel().rows.map((row) => (\n            <TableRow key={row.id}>\n              {row.getAllCells().map((cell) => (\n                <TableCell\n                  key={cell.id}\n                  css={(cell.column.columnDef as ParamsColumnDef).meta?.styles}\n                  style={{\n                    flexGrow: cell.column.getCanResize() ? 0 : 1,\n                    flexBasis: cell.column.getCanResize() ? cell.column.getSize() : undefined,\n                  }}\n                  multiline\n                >\n                  {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                </TableCell>\n              ))}\n            </TableRow>\n          ))}\n        </Table>\n      </>\n    );\n  };\n\n  return (\n    <div css={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n      <Typography.Title level={4}>\n        <FormattedMessage\n          defaultMessage=\"Parameters ({length})\"\n          description=\"Run page > Overview > Parameters table > Section title\"\n          values={{ length: paramsList.length }}\n        />\n      </Typography.Title>\n      <div\n        css={{\n          padding: theme.spacing.sm,\n          border: `1px solid ${theme.colors.borderDecorative}`,\n          borderRadius: theme.general.borderRadiusBase,\n          flex: 1,\n          display: 'flex',\n          flexDirection: 'column',\n          overflow: 'hidden',\n        }}\n      >\n        {renderTableContent()}\n      </div>\n    </div>\n  );\n};\n","import {\n  Empty,\n  Input,\n  SearchIcon,\n  Table,\n  TableCell,\n  TableHeader,\n  TableRow,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { MetricEntitiesByName, MetricEntity, RunInfoEntity } from '../../../types';\nimport { sum, values } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport Routes from '../../../routes';\nimport { FormattedMessage, defineMessages, useIntl } from 'react-intl';\nimport { isSystemMetricKey } from '../../../utils/MetricsUtils';\nimport { Table as TableDef, flexRender, getCoreRowModel, useReactTable } from '@tanstack/react-table';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\nconst { systemMetricsLabel, modelMetricsLabel } = defineMessages({\n  systemMetricsLabel: {\n    defaultMessage: 'System metrics',\n    description: 'Run page > Overview > Metrics table > System charts section > title',\n  },\n  modelMetricsLabel: {\n    defaultMessage: 'Model metrics',\n    description: 'Run page > Overview > Metrics table > Model charts section > title',\n  },\n});\n\nconst metricKeyMatchesFilter =\n  (filter: string) =>\n  ({ key }: MetricEntity) =>\n    key.toLowerCase().includes(filter.toLowerCase());\n\nconst RunViewMetricsTableSection = ({\n  metricsList,\n  runInfo,\n  header,\n  table,\n}: {\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  metricsList: MetricEntity[];\n  header?: React.ReactNode;\n  table: TableDef<MetricEntity>;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const [{ column: keyColumn }] = table.getLeafHeaders();\n  return metricsList.length ? (\n    <>\n      {header && (\n        <TableRow>\n          <TableCell css={{ flex: 1, backgroundColor: theme.colors.backgroundSecondary }}>\n            <Typography.Text bold>\n              {header} ({metricsList.length})\n            </Typography.Text>\n          </TableCell>\n        </TableRow>\n      )}\n      {metricsList.map(\n        ({\n          // Get metric key and value to display in table\n          key,\n          value,\n        }) => (\n          <TableRow key={key}>\n            <TableCell\n              style={{\n                flexGrow: 0,\n                flexBasis: keyColumn.getSize(),\n              }}\n            >\n              <Link to={Routes.getMetricPageRoute([runInfo.runUuid ?? ''], key, [runInfo.experimentId ?? ''])}>\n                {key}\n              </Link>\n            </TableCell>\n            <TableCell\n              css={{\n                flexGrow: 1,\n              }}\n            >\n              {value.toString()}\n            </TableCell>\n          </TableRow>\n        ),\n      )}\n    </>\n  ) : null;\n};\n\n/**\n * Displays table with metrics key/values in run detail overview.\n */\nexport const RunViewMetricsTable = ({\n  latestMetrics,\n  runInfo,\n}: {\n  latestMetrics: MetricEntitiesByName;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n  const [filter, setFilter] = useState('');\n\n  const metricValues = useMemo(() => values(latestMetrics), [latestMetrics]);\n\n  const columns = useMemo(\n    () => [\n      {\n        id: 'key',\n        accessorKey: 'key',\n        header: () => (\n          <FormattedMessage\n            defaultMessage=\"Metric\"\n            description=\"Run page > Overview > Metrics table > Key column header\"\n          />\n        ),\n        enableResizing: true,\n        size: 240,\n      },\n      {\n        id: 'value',\n        header: () => (\n          <FormattedMessage\n            defaultMessage=\"Value\"\n            description=\"Run page > Overview > Metrics table > Value column header\"\n          />\n        ),\n        accessorKey: 'value',\n        enableResizing: false,\n      },\n    ],\n    [],\n  );\n\n  // Break down metric lists into system and model segments. If no system (or model) metrics\n  // are detected, return a single segment.\n  const metricSegments = useMemo(() => {\n    const systemMetrics = metricValues.filter(({ key }) => isSystemMetricKey(key));\n    const modelMetrics = metricValues.filter(({ key }) => !isSystemMetricKey(key));\n    const isSegmented = systemMetrics.length > 0 && modelMetrics.length > 0;\n    if (!isSegmented) {\n      return [{ header: undefined, metrics: metricValues.filter(metricKeyMatchesFilter(filter)) }];\n    }\n    return [\n      {\n        header: intl.formatMessage(systemMetricsLabel),\n        metrics: systemMetrics.filter(metricKeyMatchesFilter(filter)),\n      },\n      {\n        header: intl.formatMessage(modelMetricsLabel),\n        metrics: modelMetrics.filter(metricKeyMatchesFilter(filter)),\n      },\n    ];\n  }, [filter, metricValues, intl]);\n\n  const table = useReactTable<MetricEntity>({\n    data: metricValues,\n    getCoreRowModel: getCoreRowModel(),\n    getRowId: (row) => row.key,\n    enableColumnResizing: true,\n    columnResizeMode: 'onChange',\n    columns,\n  });\n\n  const renderTableContent = () => {\n    if (!metricValues.length) {\n      return (\n        <div css={{ flex: '1', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <Empty\n            description={\n              <FormattedMessage\n                defaultMessage=\"No metrics recorded\"\n                description=\"Run page > Overview > Metrics table > No metrics recorded\"\n              />\n            }\n          />\n        </div>\n      );\n    }\n\n    const areAllResultsFiltered = sum(metricSegments.map(({ metrics }) => metrics.length)) < 1;\n\n    return (\n      <>\n        <div css={{ marginBottom: theme.spacing.sm }}>\n          <Input\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186\"\n            prefix={<SearchIcon />}\n            placeholder={intl.formatMessage({\n              defaultMessage: 'Search metrics',\n              description: 'Run page > Overview > Metrics table > Filter input placeholder',\n            })}\n            value={filter}\n            onChange={(e) => setFilter(e.target.value)}\n            allowClear\n          />\n        </div>\n\n        <Table\n          scrollable\n          empty={\n            areAllResultsFiltered ? (\n              <div css={{ marginTop: theme.spacing.md * 4 }}>\n                <Empty\n                  description={\n                    <FormattedMessage\n                      defaultMessage=\"No metrics match the search filter\"\n                      description=\"Run page > Overview > Metrics table > No results after filtering\"\n                    />\n                  }\n                />\n              </div>\n            ) : null\n          }\n        >\n          <TableRow isHeader>\n            {table.getLeafHeaders().map((header) => (\n              <TableHeader\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312\"\n                key={header.id}\n                resizable={header.column.getCanResize()}\n                resizeHandler={header.getResizeHandler()}\n                isResizing={header.column.getIsResizing()}\n                style={{\n                  flexGrow: header.column.getCanResize() ? 0 : 1,\n                  flexBasis: header.column.getCanResize() ? header.column.getSize() : undefined,\n                }}\n              >\n                {flexRender(header.column.columnDef.header, header.getContext())}\n              </TableHeader>\n            ))}\n          </TableRow>\n          {metricSegments.map((segment, index) => (\n            <RunViewMetricsTableSection\n              key={segment.header || index}\n              metricsList={segment.metrics}\n              runInfo={runInfo}\n              header={segment.header}\n              table={table}\n            />\n          ))}\n        </Table>\n      </>\n    );\n  };\n  return (\n    <div css={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n      <Typography.Title level={4} css={{ flexShrink: 0 }}>\n        <FormattedMessage\n          defaultMessage=\"Metrics ({length})\"\n          description=\"Run page > Overview > Metrics table > Section title\"\n          values={{ length: metricValues.filter(metricKeyMatchesFilter(filter)).length }}\n        />\n      </Typography.Title>\n      <div\n        css={{\n          padding: theme.spacing.sm,\n          border: `1px solid ${theme.colors.borderDecorative}`,\n          borderRadius: theme.general.borderRadiusBase,\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n          overflow: 'hidden',\n        }}\n      >\n        {renderTableContent()}\n      </div>\n    </div>\n  );\n};\n","import type { KeyValueEntity, RunDatasetWithTags, RunInfoEntity } from '../../../types';\nimport { Button, DropdownMenu, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { ExperimentViewDatasetWithContext } from '../../experiment-page/components/runs/ExperimentViewDatasetWithContext';\nimport { useState } from 'react';\nimport {\n  DatasetWithRunType,\n  ExperimentViewDatasetDrawer,\n} from '../../experiment-page/components/runs/ExperimentViewDatasetDrawer';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\n/**\n * Renders single dataset, either in overview table cell or within a dropdown\n */\nconst DatasetEntry = ({ dataset, onClick }: { dataset: RunDatasetWithTags; onClick: () => void }) => {\n  return (\n    <Typography.Link\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_16\"\n      role=\"link\"\n      css={{\n        textAlign: 'left',\n      }}\n      onClick={onClick}\n    >\n      <ExperimentViewDatasetWithContext datasetWithTags={dataset} displayTextAsLink css={{ margin: 0 }} />\n    </Typography.Link>\n  );\n};\n\n/**\n * Displays run datasets section in run detail overview.\n */\nexport const RunViewDatasetBox = ({\n  tags,\n  runInfo,\n  datasets,\n}: {\n  tags: Record<string, KeyValueEntity>;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  datasets: RunDatasetWithTags[];\n}) => {\n  const [selectedDatasetWithRun, setSelectedDatasetWithRun] = useState<DatasetWithRunType | null>(null);\n  const { theme } = useDesignSystemTheme();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n\n  if (!datasets || !datasets.length) {\n    return null;\n  }\n\n  const firstDataset = datasets[0];\n  const remainingDatasets = datasets.slice(1);\n\n  const datasetClicked = (dataset: RunDatasetWithTags) => {\n    setSelectedDatasetWithRun({\n      datasetWithTags: dataset,\n      runData: {\n        experimentId: runInfo.experimentId ?? undefined,\n        runUuid: runInfo.runUuid ?? '',\n        runName: runInfo.runName ?? undefined,\n        datasets: datasets,\n        tags: tags,\n      },\n    });\n    setIsDrawerOpen(true);\n  };\n\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.sm, alignItems: 'center' }}>\n      <DatasetEntry dataset={firstDataset} onClick={() => datasetClicked(firstDataset)} />\n      {remainingDatasets.length ? (\n        <DropdownMenu.Root modal={false}>\n          <DropdownMenu.Trigger asChild>\n            <Button\n              componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_70\"\n              size=\"small\"\n            >\n              +{remainingDatasets.length}\n            </Button>\n          </DropdownMenu.Trigger>\n          <DropdownMenu.Content>\n            {remainingDatasets.map((datasetWithTags) => {\n              return (\n                <DropdownMenu.Item\n                  componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_81\"\n                  key={datasetWithTags.dataset.digest}\n                >\n                  <DatasetEntry dataset={datasetWithTags} onClick={() => datasetClicked(datasetWithTags)} />\n                </DropdownMenu.Item>\n              );\n            })}\n          </DropdownMenu.Content>\n        </DropdownMenu.Root>\n      ) : null}\n      {selectedDatasetWithRun && (\n        <ExperimentViewDatasetDrawer\n          isOpen={isDrawerOpen}\n          setIsOpen={setIsDrawerOpen}\n          selectedDatasetWithRun={selectedDatasetWithRun}\n          setSelectedDatasetWithRun={setSelectedDatasetWithRun}\n        />\n      )}\n    </div>\n  );\n};\n","import { type ApolloError, type ApolloQueryResult, gql } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\nimport type { GetRun, GetRunVariables } from '../../../../graphql/__generated__/graphql';\nimport { useQuery, useLazyQuery } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\n\nconst GET_RUN_QUERY = gql`\n  query GetRun($data: MlflowGetRunInput!) @component(name: \"MLflow.ExperimentRunTracking\") {\n    mlflowGetRun(input: $data) {\n      apiError {\n        helpUrl\n        code\n        message\n      }\n      run {\n        info {\n          runName\n          status\n          runUuid\n          experimentId\n          artifactUri\n          endTime\n          lifecycleStage\n          startTime\n          userId\n        }\n        experiment {\n          experimentId\n          name\n          tags {\n            key\n            value\n          }\n          artifactLocation\n          lifecycleStage\n          lastUpdateTime\n        }\n        modelVersions {\n          status\n          version\n          name\n          source\n        }\n        data {\n          metrics {\n            key\n            value\n            step\n            timestamp\n          }\n          params {\n            key\n            value\n          }\n          tags {\n            key\n            value\n          }\n        }\n        inputs {\n          datasetInputs {\n            dataset {\n              digest\n              name\n              profile\n              schema\n              source\n              sourceType\n            }\n            tags {\n              key\n              value\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport type UseGetRunQueryResponseRunInfo = NonNullable<NonNullable<UseGetRunQueryDataResponse>['info']>;\nexport type UseGetRunQueryResponseDatasetInputs = NonNullable<\n  NonNullable<UseGetRunQueryDataResponse>['inputs']\n>['datasetInputs'];\nexport type UseGetRunQueryResponseExperiment = NonNullable<NonNullable<UseGetRunQueryDataResponse>['experiment']>;\nexport type UseGetRunQueryResponseDataMetrics = NonNullable<\n  NonNullable<NonNullable<UseGetRunQueryDataResponse>['data']>['metrics']\n>;\n\nexport type UseGetRunQueryDataResponse = NonNullable<GetRun['mlflowGetRun']>['run'];\nexport type UseGetRunQueryDataApiError = NonNullable<GetRun['mlflowGetRun']>['apiError'];\nexport type UseGetRunQueryResponse = {\n  data?: UseGetRunQueryDataResponse;\n  loading: boolean;\n  apolloError?: ApolloError;\n  apiError?: UseGetRunQueryDataApiError;\n  refetchRun: () => Promise<ApolloQueryResult<GetRun>>;\n};\n\nexport const useGetRunQuery = ({\n  runUuid,\n  disabled = false,\n}: {\n  runUuid: string;\n  disabled?: boolean;\n}): UseGetRunQueryResponse => {\n  const {\n    data,\n    loading,\n    error: apolloError,\n    refetch,\n  } = useQuery<GetRun, GetRunVariables>(GET_RUN_QUERY, {\n    variables: {\n      data: {\n        runId: runUuid,\n      },\n    },\n    skip: disabled,\n  });\n\n  return {\n    loading,\n    data: data?.mlflowGetRun?.run,\n    refetchRun: refetch,\n    apolloError,\n    apiError: data?.mlflowGetRun?.apiError,\n  } as const;\n};\n\nexport const useLazyGetRunQuery = () => useLazyQuery<GetRun, GetRunVariables>(GET_RUN_QUERY);\n","import { useDispatch, useSelector } from 'react-redux';\nimport { ReduxState, ThunkDispatch } from '../../../../redux-types';\nimport { useEffect, useMemo } from 'react';\nimport { getRunApi } from '../../../actions';\nimport { ParagraphSkeleton } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport Routes from '../../../routes';\nimport { FormattedMessage } from 'react-intl';\nimport { shouldEnableGraphQLRunDetailsPage } from '../../../../common/utils/FeatureUtils';\nimport { useGetRunQuery } from '../hooks/useGetRunQuery';\n\nexport const RunViewParentRunBox = ({ parentRunUuid }: { parentRunUuid: string }) => {\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  const parentRunInfoRedux = useSelector(({ entities }: ReduxState) => {\n    return entities.runInfosByUuid[parentRunUuid];\n  });\n\n  const parentRunInfoGraphql = useGetRunQuery({\n    runUuid: parentRunUuid,\n    disabled: !shouldEnableGraphQLRunDetailsPage(),\n  });\n\n  const parentRunInfo = useMemo(() => {\n    return shouldEnableGraphQLRunDetailsPage() ? parentRunInfoGraphql?.data?.info : parentRunInfoRedux;\n  }, [parentRunInfoGraphql, parentRunInfoRedux]);\n\n  useEffect(() => {\n    // Don't call REST API if GraphQL is enabled\n    if (shouldEnableGraphQLRunDetailsPage()) {\n      return;\n    }\n    if (!parentRunInfo) {\n      dispatch(getRunApi(parentRunUuid));\n    }\n  }, [dispatch, parentRunUuid, parentRunInfo]);\n\n  if (!parentRunInfo) {\n    return (\n      <ParagraphSkeleton\n        loading\n        label={\n          <FormattedMessage\n            defaultMessage=\"Parent run name loading\"\n            description=\"Run page > Overview > Parent run name loading\"\n          />\n        }\n      />\n    );\n  }\n\n  if (!parentRunInfo.experimentId || !parentRunInfo.runUuid) {\n    return null;\n  }\n\n  return (\n    <Link to={Routes.getRunPageRoute(parentRunInfo.experimentId, parentRunInfo.runUuid)}>{parentRunInfo.runName}</Link>\n  );\n};\n","import { Button, PencilIcon, Spinner, Tooltip, useDesignSystemTheme } from '@databricks/design-system';\nimport { useEditKeyValueTagsModal } from '../../../../common/hooks/useEditKeyValueTagsModal';\nimport { KeyValueEntity } from '../../../types';\nimport { KeyValueTag } from '../../../../common/components/KeyValueTag';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { keys, values } from 'lodash';\nimport { useDispatch } from 'react-redux';\nimport { ThunkDispatch } from '../../../../redux-types';\nimport { setRunTagsBulkApi } from '../../../actions';\nimport { MLFLOW_INTERNAL_PREFIX } from '../../../../common/utils/TagUtils';\nimport { useMemo } from 'react';\nimport { isUserFacingTag } from '../../../../common/utils/TagUtils';\n\n/**\n * Displays run tags cell in run detail overview.\n */\nexport const RunViewTagsBox = ({\n  runUuid,\n  tags,\n  onTagsUpdated,\n}: {\n  runUuid: string;\n  tags: Record<string, KeyValueEntity>;\n  onTagsUpdated: () => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const dispatch = useDispatch<ThunkDispatch>();\n  const intl = useIntl();\n\n  // Get keys and tag entities while excluding system tags\n  const [visibleTagKeys, visibleTagEntities] = useMemo(\n    () => [keys(tags).filter(isUserFacingTag), values(tags).filter(({ key }) => isUserFacingTag(key))],\n    [tags],\n  );\n\n  const { EditTagsModal, showEditTagsModal, isLoading } = useEditKeyValueTagsModal({\n    valueRequired: true,\n    allAvailableTags: visibleTagKeys,\n    saveTagsHandler: async (_, existingTags, newTags) =>\n      dispatch(setRunTagsBulkApi(runUuid, existingTags, newTags)).then(onTagsUpdated),\n  });\n\n  const showEditModal = () => {\n    showEditTagsModal({ tags: visibleTagEntities });\n  };\n\n  const editTagsLabel = intl.formatMessage({\n    defaultMessage: 'Edit tags',\n    description: \"Run page > Overview > Tags cell > 'Edit' button label\",\n  });\n\n  return (\n    <div\n      css={{\n        paddingTop: theme.spacing.xs,\n        paddingBottom: theme.spacing.xs,\n        display: 'flex',\n        flexWrap: 'wrap',\n        alignItems: 'center',\n        '> *': {\n          marginRight: '0 !important',\n        },\n        gap: theme.spacing.xs,\n      }}\n    >\n      {visibleTagEntities.length < 1 ? (\n        <Button\n          componentId=\"mlflow.run_details.overview.tags.add_button\"\n          size=\"small\"\n          type=\"tertiary\"\n          onClick={showEditModal}\n        >\n          <FormattedMessage\n            defaultMessage=\"Add tags\"\n            description=\"Run page > Overview > Tags cell > 'Add' button label\"\n          />\n        </Button>\n      ) : (\n        <>\n          {visibleTagEntities.map((tag) => (\n            <KeyValueTag tag={tag} key={`${tag.key}-${tag.value}`} enableFullViewModal css={{ marginRight: 0 }} />\n          ))}\n          <Tooltip componentId=\"mlflow.run_details.overview.tags.edit_button.tooltip\" content={editTagsLabel}>\n            <Button\n              componentId=\"mlflow.run_details.overview.tags.edit_button\"\n              aria-label={editTagsLabel}\n              size=\"small\"\n              icon={<PencilIcon />}\n              onClick={showEditModal}\n            />\n          </Tooltip>\n        </>\n      )}\n      {isLoading && <Spinner size=\"small\" />}\n      {EditTagsModal}\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport { EditableNote } from '../../../../common/components/EditableNote';\nimport { KeyValueEntity } from '../../../types';\nimport { NOTE_CONTENT_TAG } from '../../../utils/NoteUtils';\nimport { Button, PencilIcon, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { useDispatch } from 'react-redux';\nimport { ThunkDispatch } from '../../../../redux-types';\nimport { setTagApi } from '../../../actions';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\n/**\n * Displays editable description section in run detail overview.\n */\nexport const RunViewDescriptionBox = ({\n  runUuid,\n  tags,\n  onDescriptionChanged,\n}: {\n  runUuid: string;\n  tags: Record<string, KeyValueEntity>;\n  onDescriptionChanged: () => void | Promise<void>;\n}) => {\n  const noteContent = tags[NOTE_CONTENT_TAG]?.value || '';\n\n  const [showNoteEditor, setShowNoteEditor] = useState(false);\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  const handleSubmitEditNote = (markdown: string) =>\n    dispatch(setTagApi(runUuid, NOTE_CONTENT_TAG, markdown))\n      .then(onDescriptionChanged)\n      .then(() => setShowNoteEditor(false));\n  const handleCancelEditNote = () => setShowNoteEditor(false);\n\n  const isEmpty = !noteContent;\n\n  return (\n    <div css={{ marginBottom: theme.spacing.md }}>\n      <Typography.Title level={4} css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.xs }}>\n        <FormattedMessage\n          defaultMessage=\"Description\"\n          description=\"Run page > Overview > Description section > Section title\"\n        />\n        <Button\n          componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46\"\n          size=\"small\"\n          type=\"tertiary\"\n          aria-label={intl.formatMessage({\n            defaultMessage: 'Edit description',\n            description: 'Run page > Overview > Description section > Edit button label',\n          })}\n          onClick={() => setShowNoteEditor(true)}\n          icon={<PencilIcon />}\n        />\n      </Typography.Title>\n      {isEmpty && !showNoteEditor && (\n        <Typography.Hint>\n          <FormattedMessage\n            defaultMessage=\"No description\"\n            description=\"Run page > Overview > Description section > Empty value placeholder\"\n          />\n        </Typography.Hint>\n      )}\n      {(!isEmpty || showNoteEditor) && (\n        <EditableNote\n          defaultMarkdown={noteContent}\n          onSubmit={handleSubmitEditNote}\n          onCancel={handleCancelEditNote}\n          showEditor={showNoteEditor}\n        />\n      )}\n    </div>\n  );\n};\n","import { useDesignSystemTheme } from '@databricks/design-system';\n\n/**\n * Generic table row component for displaying metadata row in the details overview table (used in runs, logged models etc.)\n */\nexport const DetailsOverviewMetadataRow = ({ title, value }: { title: React.ReactNode; value: React.ReactNode }) => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <tr\n      css={{\n        display: 'flex',\n        borderBottom: `1px solid ${theme.colors.borderDecorative}`,\n        minHeight: theme.general.heightSm,\n      }}\n    >\n      <th\n        css={{\n          flex: `0 0 240px`,\n          backgroundColor: theme.colors.backgroundSecondary,\n          color: theme.colors.textSecondary,\n          padding: theme.spacing.sm,\n          display: 'flex',\n          alignItems: 'flex-start',\n        }}\n      >\n        {title}\n      </th>\n      <td\n        css={{\n          flex: 1,\n          padding: theme.spacing.sm,\n          paddingTop: 0,\n          paddingBottom: 0,\n          display: 'flex',\n          alignItems: 'center',\n        }}\n      >\n        {value}\n      </td>\n    </tr>\n  );\n};\n","import { Overflow, Tag, useDesignSystemTheme } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport { ReactComponent as RegisteredModelOkIcon } from '../../../../common/static/registered-model-grey-ok.svg';\nimport type { RunPageModelVersionSummary } from '../hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\n\n/**\n * Displays list of registered models in run detail overview.\n * TODO: expand with logged models after finalizing design\n */\nexport const RunViewRegisteredModelsBox = ({\n  registeredModelVersionSummaries,\n}: {\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <Overflow>\n      {registeredModelVersionSummaries?.map((modelSummary) => (\n        <Link\n          key={modelSummary.displayedName}\n          to={modelSummary.link}\n          css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.sm }}\n        >\n          <RegisteredModelOkIcon /> {modelSummary.displayedName}{' '}\n          <Tag\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40\"\n            css={{ cursor: 'pointer' }}\n          >\n            v{modelSummary.version}\n          </Tag>\n        </Link>\n      ))}\n    </Overflow>\n  );\n};\n","import { QueryFunctionContext, useQuery, UseQueryOptions } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport type { PromptVersionsForRunResponse, RegisteredPromptDetailsResponse, RegisteredPromptVersion } from '../types';\nimport { RegisteredPromptsApi } from '../api';\n\nconst queryFn = async ({ queryKey }: QueryFunctionContext<PromptVersionsForRunQueryKey>) => {\n  const [, { runUuid }] = queryKey;\n  return RegisteredPromptsApi.getPromptVersionsForRun(runUuid);\n};\n\ntype PromptVersionsForRunQueryKey = ['run_uuid', { runUuid: string }];\n\nexport const usePromptVersionsForRunQuery = (\n  { runUuid }: { runUuid: string },\n  options: UseQueryOptions<\n    PromptVersionsForRunResponse,\n    Error,\n    PromptVersionsForRunResponse,\n    PromptVersionsForRunQueryKey\n  > = {},\n) => {\n  const queryResult = useQuery<\n    PromptVersionsForRunResponse,\n    Error,\n    PromptVersionsForRunResponse,\n    PromptVersionsForRunQueryKey\n  >(['run_uuid', { runUuid }], {\n    queryFn,\n    retry: false,\n    ...options,\n  });\n\n  return {\n    data: queryResult.data,\n    error: queryResult.error ?? undefined,\n    isLoading: queryResult.isLoading,\n    refetch: queryResult.refetch,\n  };\n};\n","import { ParagraphSkeleton, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport { usePromptVersionsForRunQuery } from '../../../pages/prompts/hooks/usePromptVersionsForRunQuery';\nimport Routes from '../../../routes';\n\nexport const RunViewRegisteredPromptsBox = ({ runUuid }: { runUuid: string }) => {\n  const { theme } = useDesignSystemTheme();\n  const { data, error, isLoading } = usePromptVersionsForRunQuery({ runUuid });\n  const promptVersions = data?.model_versions;\n\n  if (isLoading) {\n    return <ParagraphSkeleton />;\n  }\n\n  if (error || !promptVersions || promptVersions.length === 0) {\n    return <Typography.Hint></Typography.Hint>;\n  }\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexDirection: 'row',\n        gap: theme.spacing.sm,\n        flexWrap: 'wrap',\n        padding: `${theme.spacing.sm}px 0px`,\n      }}\n    >\n      {promptVersions.map((promptVersion, index) => {\n        const to = Routes.getPromptDetailsPageRoute(encodeURIComponent(promptVersion.name));\n        const displayText = `${promptVersion.name} (v${promptVersion.version})`;\n        return (\n          <Typography.Text key={displayText} css={{ whiteSpace: 'nowrap' }}>\n            <Link to={to}>{displayText}</Link>\n            {index < promptVersions.length - 1 && ','}\n          </Typography.Text>\n        );\n      })}\n    </div>\n  );\n};\n","import { ModelsIcon, Overflow, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport { RunInfoEntity } from '../../../types';\nimport Routes from '../../../routes';\nimport { first } from 'lodash';\nimport { FormattedMessage } from 'react-intl';\nimport { useMemo } from 'react';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\n/**\n * Displays list of registered models in run detail overview.\n */\nexport const RunViewLoggedModelsBox = ({\n  loggedModels,\n  runInfo,\n}: {\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  loggedModels: {\n    artifactPath: string;\n    flavors: string[];\n    utcTimeCreated: number;\n  }[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const { experimentId, runUuid } = runInfo;\n\n  const getModelFlavorName = (flavors: string[]) => {\n    return (\n      first(flavors) || (\n        <FormattedMessage\n          defaultMessage=\"Model\"\n          description=\"Run page > Overview > Logged models > Unknown model flavor\"\n        />\n      )\n    );\n  };\n\n  // Check if list has models with same flavor names.\n  // If true, display artifact path in dropdown menu to reduce ambiguity.\n  const shouldDisplayArtifactPaths = useMemo(() => {\n    const flavors = loggedModels.map((model) => getModelFlavorName(model.flavors));\n    const uniqueFlavors = new Set(flavors);\n    return uniqueFlavors.size !== flavors.length;\n  }, [loggedModels]);\n\n  return (\n    <Overflow>\n      {loggedModels.map((model, index) => {\n        return (\n          <Link\n            to={Routes.getRunPageRoute(experimentId ?? '', runUuid ?? '', model.artifactPath)}\n            key={model.artifactPath}\n            css={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: theme.spacing.sm,\n              cursor: 'pointer',\n              height: shouldDisplayArtifactPaths && index > 0 ? theme.general.heightBase : theme.general.heightSm,\n            }}\n          >\n            <ModelsIcon />\n            <div>\n              {getModelFlavorName(model.flavors)}\n              {shouldDisplayArtifactPaths && index > 0 && <Typography.Hint>{model.artifactPath}</Typography.Hint>}\n            </div>\n          </Link>\n        );\n      })}\n    </Overflow>\n  );\n};\n","import {\n  BranchIcon,\n  CopyIcon,\n  GitCommitIcon,\n  Tag,\n  LegacyTooltip,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport Utils from '../../../../common/utils/Utils';\nimport type { KeyValueEntity } from '../../../types';\nimport { MLFLOW_RUN_GIT_SOURCE_BRANCH_TAG } from '../../../constants';\nimport { CopyButton } from '@mlflow/mlflow/src/shared/building_blocks/CopyButton';\nimport { ExperimentSourceTypeIcon } from '../../ExperimentSourceTypeIcon';\n\nexport const RunViewSourceBox = ({\n  runUuid,\n  tags,\n  search,\n}: {\n  runUuid: string;\n  tags: Record<string, KeyValueEntity>;\n  search: string;\n}) => {\n  const branchName = tags?.[MLFLOW_RUN_GIT_SOURCE_BRANCH_TAG]?.value;\n  const commitHash = tags?.[Utils.gitCommitTag]?.value;\n  const runSource = Utils.renderSource(tags, search, runUuid, branchName);\n\n  const { theme } = useDesignSystemTheme();\n  return runSource ? (\n    <div\n      css={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: theme.spacing.sm,\n        paddingTop: theme.spacing.sm,\n        paddingBottom: theme.spacing.sm,\n        flexWrap: 'wrap',\n      }}\n    >\n      <ExperimentSourceTypeIcon\n        sourceType={tags[Utils.sourceTypeTag]?.value}\n        css={{ color: theme.colors.actionPrimaryBackgroundDefault }}\n      />\n      {runSource}{' '}\n      {branchName && (\n        <LegacyTooltip title={branchName}>\n          <Tag\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48\"\n            css={{ marginRight: 0 }}\n          >\n            <div css={{ display: 'flex', gap: 4, whiteSpace: 'nowrap' }}>\n              <BranchIcon /> {branchName}\n            </div>\n          </Tag>\n        </LegacyTooltip>\n      )}\n      {commitHash && (\n        <LegacyTooltip\n          dangerouslySetAntdProps={{ overlayStyle: { maxWidth: 'none' } }}\n          title={\n            <div css={{ display: 'flex', gap: 4, alignItems: 'center' }}>\n              {commitHash}\n              <CopyButton\n                css={{ flex: '0 0 auto' }}\n                showLabel={false}\n                size=\"small\"\n                type=\"tertiary\"\n                copyText={commitHash}\n                icon={<CopyIcon />}\n              />\n            </div>\n          }\n        >\n          <Tag\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_72\"\n            css={{ marginRight: 0 }}\n          >\n            <div css={{ display: 'flex', gap: 4, whiteSpace: 'nowrap' }}>\n              <GitCommitIcon /> {commitHash.slice(0, 7)}\n            </div>\n          </Tag>\n        </LegacyTooltip>\n      )}\n    </div>\n  ) : (\n    <Typography.Hint></Typography.Hint>\n  );\n};\n","import { useDesignSystemTheme } from '@databricks/design-system';\nimport { ReactNode } from 'react';\n\n/**\n * Generic table component for displaying metadata in the details overview section (used in runs, logged models etc.)\n */\nexport const DetailsOverviewMetadataTable = ({ children }: { children: ReactNode | ReactNode[] }) => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <table\n      css={{\n        display: 'block',\n        border: `1px solid ${theme.colors.borderDecorative}`,\n        borderBottom: 'none',\n        borderRadius: theme.general.borderRadiusBase,\n        width: '50%',\n        minWidth: 640,\n        marginBottom: theme.spacing.lg,\n        overflow: 'hidden',\n      }}\n    >\n      <tbody css={{ display: 'block' }}>{children}</tbody>\n    </table>\n  );\n};\n","import { CopyIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { CopyButton } from '../../shared/building_blocks/CopyButton';\n\nexport const DetailsOverviewCopyableIdBox = ({ value }: { value: string }) => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.xs, alignItems: 'center' }}>\n      {value}\n      <CopyButton showLabel={false} copyText={value} icon={<CopyIcon />} size=\"small\" />\n    </div>\n  );\n};\n","import { FormattedMessage, useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { useMemo } from 'react';\n\nimport { Button, FileIcon, Spinner, Typography, useDesignSystemTheme } from '@databricks/design-system';\n\nimport Utils from '../../../common/utils/Utils';\nimport type { ReduxState } from '../../../redux-types';\nimport { useLocation } from '../../../common/utils/RoutingUtils';\nimport { EXPERIMENT_PARENT_ID_TAG } from '../experiment-page/utils/experimentPage.common-utils';\n\nimport { RunViewStatusBox } from './overview/RunViewStatusBox';\nimport { RunViewUserLinkBox } from './overview/RunViewUserLinkBox';\nimport { DetailsOverviewParamsTable } from '../DetailsOverviewParamsTable';\nimport { RunViewMetricsTable } from './overview/RunViewMetricsTable';\nimport { RunViewDatasetBox } from './overview/RunViewDatasetBox';\nimport { RunViewParentRunBox } from './overview/RunViewParentRunBox';\nimport { RunViewTagsBox } from './overview/RunViewTagsBox';\nimport { RunViewDescriptionBox } from './overview/RunViewDescriptionBox';\nimport { DetailsOverviewMetadataRow } from '../DetailsOverviewMetadataRow';\nimport { RunViewRegisteredModelsBox } from './overview/RunViewRegisteredModelsBox';\nimport { RunViewRegisteredPromptsBox } from './overview/RunViewRegisteredPromptsBox';\nimport { RunViewLoggedModelsBox } from './overview/RunViewLoggedModelsBox';\nimport { RunViewSourceBox } from './overview/RunViewSourceBox';\nimport { DetailsOverviewMetadataTable } from '@mlflow/mlflow/src/experiment-tracking/components/DetailsOverviewMetadataTable';\nimport { DetailsOverviewCopyableIdBox } from '../DetailsOverviewCopyableIdBox';\nimport type { RunInfoEntity } from '../../types';\nimport type { UseGetRunQueryResponseRunInfo } from './hooks/useGetRunQuery';\nimport type { KeyValueEntity, MetricEntitiesByName, RunDatasetWithTags } from '../../types';\nimport { type RunPageModelVersionSummary } from './hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\n\nconst EmptyValue = () => <Typography.Hint></Typography.Hint>;\n\nexport const RunViewOverview = ({\n  runUuid,\n  onRunDataUpdated,\n  tags,\n  runInfo,\n  datasets,\n  params,\n  latestMetrics,\n  registeredModelVersionSummaries: registeredModelVersionSummariesForRun,\n  isLoadingLoggedModels = false,\n}: {\n  runUuid: string;\n  onRunDataUpdated: () => void | Promise<any>;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  tags: Record<string, KeyValueEntity>;\n  latestMetrics: MetricEntitiesByName;\n  datasets?: RunDatasetWithTags[];\n  params: Record<string, KeyValueEntity>;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n  isLoadingLoggedModels?: boolean;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const { search } = useLocation();\n  const intl = useIntl();\n\n  const loggedModels = useMemo(() => Utils.getLoggedModelsFromTags(tags), [tags]);\n  const parentRunIdTag = tags[EXPERIMENT_PARENT_ID_TAG];\n\n  const registeredModelVersionSummaries = registeredModelVersionSummariesForRun;\n  const shouldDisplayLoggedModelsBox = loggedModels?.length > 0;\n\n  const renderPromptMetadataRow = () => (\n    <DetailsOverviewMetadataRow\n      title={\n        <FormattedMessage\n          defaultMessage=\"Registered prompts\"\n          description=\"Run page > Overview > Run prompts section label\"\n        />\n      }\n      value={<RunViewRegisteredPromptsBox runUuid={runUuid} />}\n    />\n  );\n\n  const renderDetails = () => {\n    return (\n      <DetailsOverviewMetadataTable>\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Created at\"\n              description=\"Run page > Overview > Run start time section label\"\n            />\n          }\n          value={runInfo.startTime ? Utils.formatTimestamp(runInfo.startTime, intl) : <EmptyValue />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Created by\"\n              description=\"Run page > Overview > Run author section label\"\n            />\n          }\n          value={<RunViewUserLinkBox runInfo={runInfo} tags={tags} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Experiment ID\"\n              description=\"Run page > Overview > experiment ID section label\"\n            />\n          }\n          value={<DetailsOverviewCopyableIdBox value={runInfo?.experimentId ?? ''} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage defaultMessage=\"Status\" description=\"Run page > Overview > Run status section label\" />\n          }\n          value={<RunViewStatusBox status={runInfo.status} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={<FormattedMessage defaultMessage=\"Run ID\" description=\"Run page > Overview > Run ID section label\" />}\n          value={<DetailsOverviewCopyableIdBox value={runInfo.runUuid ?? ''} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Duration\"\n              description=\"Run page > Overview > Run duration section label\"\n            />\n          }\n          value={Utils.getDuration(runInfo.startTime, runInfo.endTime)}\n        />\n        {parentRunIdTag && (\n          <DetailsOverviewMetadataRow\n            title={<FormattedMessage defaultMessage=\"Parent run\" description=\"Run page > Overview > Parent run\" />}\n            value={<RunViewParentRunBox parentRunUuid={parentRunIdTag.value} />}\n          />\n        )}\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Datasets used\"\n              description=\"Run page > Overview > Run datasets section label\"\n            />\n          }\n          value={\n            datasets?.length ? <RunViewDatasetBox tags={tags} runInfo={runInfo} datasets={datasets} /> : <EmptyValue />\n          }\n        />\n        <DetailsOverviewMetadataRow\n          title={<FormattedMessage defaultMessage=\"Tags\" description=\"Run page > Overview > Run tags section label\" />}\n          value={<RunViewTagsBox runUuid={runInfo.runUuid ?? ''} tags={tags} onTagsUpdated={onRunDataUpdated} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage defaultMessage=\"Source\" description=\"Run page > Overview > Run source section label\" />\n          }\n          value={<RunViewSourceBox tags={tags} search={search} runUuid={runUuid} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Logged models\"\n              description=\"Run page > Overview > Run models section label\"\n            />\n          }\n          value={\n            isLoadingLoggedModels ? (\n              <Spinner />\n            ) : shouldDisplayLoggedModelsBox ? (\n              <RunViewLoggedModelsBox\n                // Pass the run info and logged models\n                runInfo={runInfo}\n                loggedModels={loggedModels}\n              />\n            ) : (\n              <EmptyValue />\n            )\n          }\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Registered models\"\n              description=\"Run page > Overview > Run models section label\"\n            />\n          }\n          value={\n            registeredModelVersionSummaries?.length > 0 ? (\n              <RunViewRegisteredModelsBox registeredModelVersionSummaries={registeredModelVersionSummaries} />\n            ) : (\n              <EmptyValue />\n            )\n          }\n        />\n        {renderPromptMetadataRow()}\n      </DetailsOverviewMetadataTable>\n    );\n  };\n\n  const renderParams = () => {\n    return <DetailsOverviewParamsTable params={params} />;\n  };\n\n  return (\n    <div css={{ flex: '1' }}>\n      <RunViewDescriptionBox runUuid={runUuid} tags={tags} onDescriptionChanged={onRunDataUpdated} />\n      <Typography.Title level={4}>\n        <FormattedMessage defaultMessage=\"Details\" description=\"Run page > Overview > Details section title\" />\n      </Typography.Title>\n      {renderDetails()}\n      <div css={{ display: 'flex', gap: theme.spacing.lg, minHeight: 360, maxHeight: 760, overflow: 'hidden' }}>\n        {renderParams()}\n        <RunViewMetricsTable latestMetrics={latestMetrics} runInfo={runInfo} />\n      </div>\n    </div>\n  );\n};\n","import { useSelector } from 'react-redux';\nimport type { ReduxState } from '../../../../redux-types';\nimport { ModelRegistryRoutes } from '../../../../model-registry/routes';\nimport { shouldEnableGraphQLModelVersionsForRunDetails } from '../../../../common/utils/FeatureUtils';\nimport { UseGetRunQueryResponse } from './useGetRunQuery';\n\n/**\n * A unified model version summary that can be used to display model versions on the run page.\n */\nexport type RunPageModelVersionSummary = {\n  displayedName: string | null;\n  version: string | null;\n  link: string;\n  status: string | null;\n  source: string | null;\n};\n\n/**\n * We're currently using multiple ways to get model versions on the run page,\n * we also differentiate between UC and workspace registry models.\n *\n * This hook is intended to unify the way we get model versions on the run page to be displayed in overview and register model dropdown.\n */\nexport const useUnifiedRegisteredModelVersionsSummariesForRun = ({\n  queryResult,\n  runUuid,\n}: {\n  runUuid: string;\n  queryResult?: UseGetRunQueryResponse;\n}): RunPageModelVersionSummary[] => {\n  const { registeredModels: registeredModelsFromStore } = useSelector(({ entities }: ReduxState) => ({\n    registeredModels: entities.modelVersionsByRunUuid[runUuid],\n  }));\n\n  if (shouldEnableGraphQLModelVersionsForRunDetails()) {\n    const result: RunPageModelVersionSummary[] = [];\n    if (queryResult?.data && 'modelVersions' in queryResult.data) {\n      queryResult.data?.modelVersions?.forEach((modelVersion) => {\n        result.push({\n          displayedName: modelVersion.name,\n          version: modelVersion.version,\n          link:\n            modelVersion.name && modelVersion.version\n              ? ModelRegistryRoutes.getModelVersionPageRoute(modelVersion.name, modelVersion.version)\n              : '',\n          status: modelVersion.status,\n          source: modelVersion.source,\n        });\n      });\n    }\n    return result;\n  }\n\n  if (registeredModelsFromStore) {\n    return registeredModelsFromStore.map((modelVersion) => {\n      const name = modelVersion.name;\n      const link = ModelRegistryRoutes.getModelVersionPageRoute(name, modelVersion.version);\n      return {\n        displayedName: modelVersion.name,\n        version: modelVersion.version,\n        link,\n        status: modelVersion.status,\n        source: modelVersion.source,\n      };\n    });\n  }\n\n  return [];\n};\n","import { isEmpty, keyBy } from 'lodash';\nimport { useEffect, useMemo } from 'react';\nimport { useRunDetailsPageDataLegacy } from '../useRunDetailsPageDataLegacy';\nimport {\n  type UseGetRunQueryResponseExperiment,\n  useGetRunQuery,\n  UseGetRunQueryDataApiError,\n  UseGetRunQueryResponseDataMetrics,\n  UseGetRunQueryResponseDatasetInputs,\n  UseGetRunQueryResponseRunInfo,\n} from './useGetRunQuery';\nimport {\n  KeyValueEntity,\n  RunDatasetWithTags,\n  type ExperimentEntity,\n  type MetricEntitiesByName,\n  type MetricEntity,\n  type RunInfoEntity,\n} from '../../../types';\nimport {\n  shouldEnableGraphQLModelVersionsForRunDetails,\n  shouldEnableGraphQLRunDetailsPage,\n} from '../../../../common/utils/FeatureUtils';\nimport { ThunkDispatch } from '../../../../redux-types';\nimport { useDispatch } from 'react-redux';\nimport { searchModelVersionsApi } from '../../../../model-registry/actions';\nimport { ApolloError } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\nimport { ErrorWrapper } from '../../../../common/utils/ErrorWrapper';\nimport { pickBy } from 'lodash';\nimport {\n  type RunPageModelVersionSummary,\n  useUnifiedRegisteredModelVersionsSummariesForRun,\n} from './useUnifiedRegisteredModelVersionsSummariesForRun';\n\n// Internal util: transforms an array of objects into a keyed object by the `key` field\nconst transformToKeyedObject = <Output, Input = any>(inputArray: Input[]) =>\n  // TODO: fix this type error\n  // @ts-expect-error: Conversion of type 'Dictionary<Input>' to type 'Record<string, Output>' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.\n  keyBy(inputArray, 'key') as Record<string, Output>;\n\n// Internal util: transforms an array of metric values into an array of MetricEntity objects\n// GraphQL uses strings for steps and timestamp so we cast them to numbers\nconst transformMetricValues = (inputArray: UseGetRunQueryResponseDataMetrics): MetricEntity[] =>\n  inputArray\n    .filter(({ key, value, step, timestamp }) => key !== null && value !== null && step !== null && timestamp !== null)\n    .map(({ key, value, step, timestamp }: any) => ({\n      key,\n      value,\n      step: Number(step),\n      timestamp: Number(timestamp),\n    }));\n\n// Internal util: transforms an array of dataset inputs into an array of RunDatasetWithTags objects\nexport const transformDatasets = (inputArray?: UseGetRunQueryResponseDatasetInputs): RunDatasetWithTags[] | undefined =>\n  inputArray?.map((datasetInput) => ({\n    dataset: {\n      digest: datasetInput.dataset?.digest ?? '',\n      name: datasetInput.dataset?.name ?? '',\n      profile: datasetInput.dataset?.profile ?? '',\n      schema: datasetInput.dataset?.schema ?? '',\n      source: datasetInput.dataset?.source ?? '',\n      sourceType: datasetInput.dataset?.sourceType ?? '',\n    },\n    tags:\n      datasetInput.tags\n        ?.map((tag) => ({\n          key: tag.key ?? '',\n          value: tag.value ?? '',\n        }))\n        .filter((tag) => !isEmpty(tag.key)) ?? [],\n  }));\n\ninterface UseRunDetailsPageDataResult {\n  experiment?: ExperimentEntity | UseGetRunQueryResponseExperiment;\n  error: Error | ErrorWrapper | undefined | ApolloError;\n\n  latestMetrics: MetricEntitiesByName;\n  loading: boolean;\n  params: Record<string, KeyValueEntity>;\n  refetchRun: any;\n  runInfo?: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  tags: Record<string, KeyValueEntity>;\n  datasets?: RunDatasetWithTags[];\n\n  // Only present in legacy implementation\n  runFetchError?: Error | ErrorWrapper | undefined;\n  experimentFetchError?: Error | ErrorWrapper | undefined;\n\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n\n  // Only present in graphQL implementation\n  apiError?: UseGetRunQueryDataApiError;\n}\n\n/**\n * An updated version of the `useRunDetailsPageData` hook that either uses the REST API-based implementation\n * or the GraphQL-based implementation to fetch run details, based on the `shouldEnableGraphQLRunDetailsPage` flag.\n */\nexport const useRunDetailsPageData = ({\n  runUuid,\n  experimentId,\n}: {\n  runUuid: string;\n  experimentId: string;\n}): UseRunDetailsPageDataResult => {\n  const usingGraphQL = shouldEnableGraphQLRunDetailsPage();\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  // If GraphQL flag is enabled, use the graphQL query to fetch the run data.\n  // We can safely disable the eslint rule since feature flag evaluation is stable\n  /* eslint-disable react-hooks/rules-of-hooks */\n  if (usingGraphQL) {\n    const graphQLQuery = () =>\n      useGetRunQuery({\n        runUuid,\n      });\n\n    const detailsPageGraphqlResponse = graphQLQuery();\n\n    // If model versions are colocated in the GraphQL response, we don't need to make an additional API call\n    useEffect(() => {\n      if (shouldEnableGraphQLModelVersionsForRunDetails()) {\n        return;\n      }\n      dispatch(searchModelVersionsApi({ run_id: runUuid }));\n    }, [dispatch, runUuid]);\n\n    const { latestMetrics, tags, params, datasets } = useMemo(() => {\n      // Filter out tags, metrics, and params that are entirely whitespace\n      return {\n        latestMetrics: pickBy(\n          transformToKeyedObject<MetricEntity>(\n            transformMetricValues(detailsPageGraphqlResponse.data?.data?.metrics ?? []),\n          ),\n          (metric) => metric.key.trim().length > 0,\n        ),\n        tags: pickBy(\n          transformToKeyedObject<KeyValueEntity>(detailsPageGraphqlResponse.data?.data?.tags ?? []),\n          (tag) => tag.key.trim().length > 0,\n        ),\n        params: pickBy(\n          transformToKeyedObject<KeyValueEntity>(detailsPageGraphqlResponse.data?.data?.params ?? []),\n          (param) => param.key.trim().length > 0,\n        ),\n        datasets: transformDatasets(detailsPageGraphqlResponse.data?.inputs?.datasetInputs),\n      };\n    }, [detailsPageGraphqlResponse.data]);\n\n    const registeredModelVersionSummaries = useUnifiedRegisteredModelVersionsSummariesForRun({\n      runUuid,\n      queryResult: detailsPageGraphqlResponse,\n    });\n\n    return {\n      runInfo: detailsPageGraphqlResponse.data?.info ?? undefined,\n      experiment: detailsPageGraphqlResponse.data?.experiment ?? undefined,\n      loading: detailsPageGraphqlResponse.loading,\n      error: detailsPageGraphqlResponse.apolloError,\n      apiError: detailsPageGraphqlResponse.apiError,\n      refetchRun: detailsPageGraphqlResponse.refetchRun,\n      registeredModelVersionSummaries,\n      datasets,\n      latestMetrics,\n      tags,\n      params,\n    };\n  }\n\n  // If GraphQL flag is disabled, use the legacy implementation to fetch the run data.\n  const detailsPageResponse = useRunDetailsPageDataLegacy(runUuid, experimentId);\n  const error = detailsPageResponse.errors.runFetchError || detailsPageResponse.errors.experimentFetchError;\n\n  const registeredModelVersionSummaries = useUnifiedRegisteredModelVersionsSummariesForRun({\n    runUuid,\n  });\n\n  return {\n    runInfo: detailsPageResponse.data?.runInfo,\n    latestMetrics: detailsPageResponse.data?.latestMetrics,\n    tags: detailsPageResponse.data?.tags,\n    experiment: detailsPageResponse.data?.experiment,\n    params: detailsPageResponse.data?.params,\n    datasets: detailsPageResponse.data?.datasets,\n    loading: detailsPageResponse.loading,\n    error,\n    runFetchError: detailsPageResponse.errors.runFetchError,\n    experimentFetchError: detailsPageResponse.errors.experimentFetchError,\n    refetchRun: detailsPageResponse.refetchRun,\n    registeredModelVersionSummaries,\n  };\n};\n","import { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ReduxState, ThunkDispatch } from '../../../redux-types';\nimport { getExperimentApi, getRunApi } from '../../actions';\nimport { searchModelVersionsApi } from '../../../model-registry/actions';\nimport { pickBy } from 'lodash';\nimport Utils from '../../../common/utils/Utils';\n\n/**\n * Hook fetching data for the run page: both run and experiment entities.\n * The initial fetch action is omitted if entities are already in the store.\n */\nexport const useRunDetailsPageDataLegacy = (runUuid: string, experimentId: string) => {\n  const [runRequestId, setRunRequestId] = useState('');\n  const [experimentRequestId, setExperimentRequestId] = useState('');\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  // Get the necessary data from the store\n\n  const { runInfo, tags, latestMetrics, experiment, params, datasets } = useSelector((state: ReduxState) => ({\n    runInfo: state.entities.runInfosByUuid[runUuid],\n    // Filter out tags, metrics, and params that are entirely whitespace\n    tags: pickBy(state.entities.tagsByRunUuid[runUuid], (tag) => tag.key.trim().length > 0),\n    latestMetrics: pickBy(state.entities.latestMetricsByRunUuid[runUuid], (metric) => metric.key.trim().length > 0),\n    params: pickBy(state.entities.paramsByRunUuid[runUuid], (param) => param.key.trim().length > 0),\n    experiment: state.entities.experimentsById[experimentId],\n    datasets: state.entities.runDatasetsByUuid[runUuid],\n  }));\n\n  const fetchRun = useCallback(() => {\n    const action = getRunApi(runUuid);\n    setRunRequestId(action.meta.id);\n    return dispatch(action);\n  }, [dispatch, runUuid]);\n\n  const fetchExperiment = useCallback(() => {\n    const action = getExperimentApi(experimentId);\n    setExperimentRequestId(action.meta.id);\n    return dispatch(action);\n  }, [dispatch, experimentId]);\n\n  const fetchModelVersions = useCallback(() => {\n    dispatch(searchModelVersionsApi({ run_id: runUuid }));\n  }, [dispatch, runUuid]);\n\n  // Do the initial run & experiment fetch only if it's not in the store already\n  useEffect(() => {\n    if (!runInfo) {\n      fetchRun().catch((e) => Utils.logErrorAndNotifyUser(e));\n    }\n    fetchModelVersions();\n  }, [runInfo, fetchRun, fetchModelVersions]);\n\n  useEffect(() => {\n    if (!experiment) {\n      fetchExperiment().catch((e) => Utils.logErrorAndNotifyUser(e));\n    }\n  }, [experiment, fetchExperiment]);\n\n  // Check the \"apis\" store for the requests status\n  const { loading: runLoading, error: runFetchError } = useSelector((state: ReduxState) => ({\n    loading: !runRequestId || Boolean(state.apis?.[runRequestId]?.active),\n    error: state.apis?.[runRequestId]?.error,\n  }));\n\n  const { loading: experimentLoading, error: experimentFetchError } = useSelector((state: ReduxState) => ({\n    loading: !runRequestId || Boolean(state.apis?.[experimentRequestId]?.active),\n    error: state.apis?.[experimentRequestId]?.error,\n  }));\n\n  const loading = runLoading || experimentLoading;\n\n  return {\n    loading,\n    data: {\n      runInfo,\n      tags,\n      params,\n      latestMetrics,\n      experiment,\n      datasets,\n    },\n    refetchRun: fetchRun,\n    errors: { runFetchError, experimentFetchError },\n  };\n};\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React, { Component } from 'react';\nimport Routes from '../routes';\nimport { ErrorView } from '../../common/components/ErrorView';\n\ntype Props = {\n  runId: string;\n};\n\nexport class RunNotFoundView extends Component<Props> {\n  render() {\n    return (\n      <ErrorView\n        statusCode={404}\n        subMessage={`Run ID ${this.props.runId} does not exist`}\n        fallbackHomePageReactRoute={Routes.rootRoute}\n      />\n    );\n  }\n}\n","import type { MetricHistoryByName, RunInfoEntity } from '../../types';\nimport {\n  containsMultipleRunsTooltipData,\n  RunsChartsTooltipMode,\n  type RunsChartsTooltipBodyProps,\n} from '../runs-charts/hooks/useRunsChartsTooltip';\nimport { isSystemMetricKey } from '../../utils/MetricsUtils';\nimport Utils from '../../../common/utils/Utils';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { isUndefined } from 'lodash';\nimport type {\n  RunsCompareMultipleTracesTooltipData,\n  RunsMetricsSingleTraceTooltipData,\n} from '../runs-charts/components/RunsMetricsLinePlot';\nimport type { RunsMetricsBarPlotHoverData } from '../runs-charts/components/RunsMetricsBarPlot';\nimport { RunsMultipleTracesTooltipBody } from '../runs-charts/components/RunsMultipleTracesTooltipBody';\n\n/**\n * Tooltip body displayed when hovering over run view metric charts\n */\nexport const RunViewChartTooltipBody = ({\n  contextData: { metricsForRun },\n  hoverData,\n  chartData: { metricKey },\n  isHovering,\n  mode,\n}: RunsChartsTooltipBodyProps<\n  { metricsForRun: MetricHistoryByName },\n  { metricKey: string },\n  RunsMetricsBarPlotHoverData | RunsMetricsSingleTraceTooltipData | RunsCompareMultipleTracesTooltipData\n>) => {\n  const singleTraceHoverData = containsMultipleRunsTooltipData(hoverData) ? hoverData.hoveredDataPoint : hoverData;\n  const intl = useIntl();\n\n  if (\n    mode === RunsChartsTooltipMode.MultipleTracesWithScanline &&\n    containsMultipleRunsTooltipData(hoverData) &&\n    isHovering\n  ) {\n    return <RunsMultipleTracesTooltipBody hoverData={hoverData} />;\n  }\n\n  if (!singleTraceHoverData?.metricEntity) {\n    return null;\n  }\n\n  const { timestamp, step, value } = singleTraceHoverData.metricEntity;\n\n  const metricContainsHistory = metricsForRun?.[metricKey]?.length > 1;\n  const isSystemMetric = isSystemMetricKey(metricKey);\n  const displayTimestamp = metricContainsHistory && isSystemMetric && !isUndefined(timestamp);\n  const displayStep = metricContainsHistory && !isSystemMetric && !isUndefined(step);\n\n  return (\n    <div>\n      {displayStep && (\n        <div css={styles.valueField}>\n          <strong>\n            <FormattedMessage defaultMessage=\"Step\" description=\"Run page > Charts tab > Chart tooltip > Step label\" />:\n          </strong>{' '}\n          {step}\n        </div>\n      )}\n      {displayTimestamp && (\n        <div css={styles.valueField}>\n          <strong>\n            <FormattedMessage\n              defaultMessage=\"Timestamp\"\n              description=\"Run page > Charts tab > Chart tooltip > Timestamp label\"\n            />\n            :\n          </strong>{' '}\n          {Utils.formatTimestamp(timestamp, intl)}\n        </div>\n      )}\n      {value && (\n        <div css={styles.valueField}>\n          <strong>{metricKey}:</strong> {value}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst styles = {\n  valueField: {\n    maxWidth: 300,\n    whiteSpace: 'nowrap' as const,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n};\n","import { TableSkeleton, ToggleButton, useDesignSystemTheme } from '@databricks/design-system';\nimport { compact, mapValues, values } from 'lodash';\nimport { ReactNode, useEffect, useMemo, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { ReduxState } from '../../../redux-types';\nimport type { KeyValueEntity, MetricEntitiesByName, RunInfoEntity } from '../../types';\n\nimport { RunsChartsTooltipWrapper } from '../runs-charts/hooks/useRunsChartsTooltip';\nimport { RunViewChartTooltipBody } from './RunViewChartTooltipBody';\nimport { RunsChartType, RunsChartsCardConfig } from '../runs-charts/runs-charts.types';\nimport type { RunsChartsRunData } from '../runs-charts/components/RunsCharts.common';\nimport { RunsChartsLineChartXAxisType } from '../runs-charts/components/RunsCharts.common';\nimport type { ExperimentRunsChartsUIConfiguration } from '../experiment-page/models/ExperimentPageUIState';\nimport { RunsChartsSectionAccordion } from '../runs-charts/components/sections/RunsChartsSectionAccordion';\nimport { RunsChartsConfigureModal } from '../runs-charts/components/RunsChartsConfigureModal';\nimport {\n  RunsChartsUIConfigurationContextProvider,\n  useConfirmChartCardConfigurationFn,\n  useInsertRunsChartsFn,\n  useRemoveRunsChartFn,\n  useReorderRunsChartsFn,\n} from '../runs-charts/hooks/useRunsChartsUIConfiguration';\nimport {\n  LOG_IMAGE_TAG_INDICATOR,\n  MLFLOW_MODEL_METRIC_NAME,\n  MLFLOW_SYSTEM_METRIC_NAME,\n  MLFLOW_SYSTEM_METRIC_PREFIX,\n} from '../../constants';\nimport LocalStorageUtils from '../../../common/utils/LocalStorageUtils';\nimport { RunsChartsFullScreenModal } from '../runs-charts/components/RunsChartsFullScreenModal';\nimport { useIsTabActive } from '../../../common/hooks/useIsTabActive';\nimport { shouldEnableRunDetailsPageAutoRefresh } from '../../../common/utils/FeatureUtils';\nimport { usePopulateImagesByRunUuid } from '../experiment-page/hooks/usePopulateImagesByRunUuid';\nimport type { UseGetRunQueryResponseRunInfo } from './hooks/useGetRunQuery';\nimport { RunsChartsGlobalChartSettingsDropdown } from '../runs-charts/components/RunsChartsGlobalChartSettingsDropdown';\nimport { RunsChartsDraggableCardsGridContextProvider } from '../runs-charts/components/RunsChartsDraggableCardsGridContext';\nimport { RunsChartsFilterInput } from '../runs-charts/components/RunsChartsFilterInput';\n\ninterface RunViewMetricChartsProps {\n  metricKeys: string[];\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  /**\n   * Whether to display model or system metrics. This affects labels and tooltips.\n   */\n  mode: 'model' | 'system';\n\n  latestMetrics?: MetricEntitiesByName;\n  tags?: Record<string, KeyValueEntity>;\n  params?: Record<string, KeyValueEntity>;\n}\n\n/**\n * Component displaying metric charts for a single run\n */\nconst RunViewMetricChartsImpl = ({\n  runInfo,\n  metricKeys,\n  mode,\n  chartUIState,\n  updateChartsUIState,\n  latestMetrics = {},\n  params = {},\n  tags = {},\n}: RunViewMetricChartsProps & {\n  chartUIState: ExperimentRunsChartsUIConfiguration;\n  updateChartsUIState: (\n    stateSetter: (state: ExperimentRunsChartsUIConfiguration) => ExperimentRunsChartsUIConfiguration,\n  ) => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const [search, setSearch] = useState('');\n  const { formatMessage } = useIntl();\n\n  const { compareRunCharts, compareRunSections, chartsSearchFilter } = chartUIState;\n\n  // For the draggable grid layout, we filter visible cards on this level\n  const visibleChartCards = useMemo(() => {\n    return compareRunCharts?.filter((chart) => !chart.deleted) ?? [];\n  }, [compareRunCharts]);\n\n  const [fullScreenChart, setFullScreenChart] = useState<\n    | {\n        config: RunsChartsCardConfig;\n        title: string | ReactNode;\n        subtitle: ReactNode;\n      }\n    | undefined\n  >(undefined);\n\n  const metricsForRun = useSelector(({ entities }: ReduxState) => {\n    return mapValues(entities.sampledMetricsByRunUuid[runInfo.runUuid ?? ''], (metricsByRange) => {\n      return compact(\n        values(metricsByRange)\n          .map(({ metricsHistory }) => metricsHistory)\n          .flat(),\n      );\n    });\n  });\n\n  const tooltipContextValue = useMemo(() => ({ runInfo, metricsForRun }), [runInfo, metricsForRun]);\n\n  const { imagesByRunUuid } = useSelector((state: ReduxState) => ({\n    imagesByRunUuid: state.entities.imagesByRunUuid,\n  }));\n\n  const [configuredCardConfig, setConfiguredCardConfig] = useState<RunsChartsCardConfig | null>(null);\n\n  const reorderCharts = useReorderRunsChartsFn();\n\n  const addNewChartCard = (metricSectionId: string) => (type: RunsChartType) =>\n    setConfiguredCardConfig(RunsChartsCardConfig.getEmptyChartCardByType(type, false, undefined, metricSectionId));\n\n  const insertCharts = useInsertRunsChartsFn();\n\n  const startEditChart = (chartCard: RunsChartsCardConfig) => setConfiguredCardConfig(chartCard);\n\n  const removeChart = useRemoveRunsChartFn();\n\n  const confirmChartCardConfiguration = useConfirmChartCardConfigurationFn();\n\n  const submitForm = (configuredCard: Partial<RunsChartsCardConfig>) => {\n    confirmChartCardConfiguration(configuredCard);\n\n    // Hide the modal\n    setConfiguredCardConfig(null);\n  };\n\n  // Create a single run data object to be used in charts\n  const chartData: RunsChartsRunData[] = useMemo(\n    () => [\n      {\n        displayName: runInfo.runName ?? '',\n        metrics: latestMetrics,\n        params,\n        tags,\n        images: imagesByRunUuid[runInfo.runUuid ?? ''] || {},\n        metricHistory: {},\n        uuid: runInfo.runUuid ?? '',\n        color: theme.colors.primary,\n        runInfo,\n      },\n    ],\n    [runInfo, latestMetrics, params, tags, imagesByRunUuid, theme],\n  );\n\n  useEffect(() => {\n    if ((!compareRunSections || !compareRunCharts) && chartData.length > 0) {\n      const { resultChartSet, resultSectionSet } = RunsChartsCardConfig.getBaseChartAndSectionConfigs({\n        runsData: chartData,\n        enabledSectionNames: [mode === 'model' ? MLFLOW_MODEL_METRIC_NAME : MLFLOW_SYSTEM_METRIC_NAME],\n        // Filter only model or system metrics\n        filterMetricNames: (name) => {\n          const isSystemMetric = name.startsWith(MLFLOW_SYSTEM_METRIC_PREFIX);\n          return mode === 'model' ? !isSystemMetric : isSystemMetric;\n        },\n      });\n\n      updateChartsUIState((current) => ({\n        ...current,\n        compareRunCharts: resultChartSet,\n        compareRunSections: resultSectionSet,\n      }));\n    }\n  }, [compareRunCharts, compareRunSections, chartData, mode, updateChartsUIState]);\n\n  /**\n   * Update charts with the latest metrics if new are found\n   */\n  useEffect(() => {\n    updateChartsUIState((current) => {\n      if (!current.compareRunCharts || !current.compareRunSections) {\n        return current;\n      }\n      const { resultChartSet, resultSectionSet, isResultUpdated } = RunsChartsCardConfig.updateChartAndSectionConfigs({\n        compareRunCharts: current.compareRunCharts,\n        compareRunSections: current.compareRunSections,\n        runsData: chartData,\n        isAccordionReordered: current.isAccordionReordered,\n        // Filter only model or system metrics\n        filterMetricNames: (name) => {\n          const isSystemMetric = name.startsWith(MLFLOW_SYSTEM_METRIC_PREFIX);\n          return mode === 'model' ? !isSystemMetric : isSystemMetric;\n        },\n      });\n\n      if (!isResultUpdated) {\n        return current;\n      }\n      return {\n        ...current,\n        compareRunCharts: resultChartSet,\n        compareRunSections: resultSectionSet,\n      };\n    });\n  }, [chartData, updateChartsUIState, mode]);\n\n  const isTabActive = useIsTabActive();\n  const autoRefreshEnabled = chartUIState.autoRefreshEnabled && shouldEnableRunDetailsPageAutoRefresh() && isTabActive;\n\n  // Determine if run contains images logged by `mlflow.log_image()`\n  const containsLoggedImages = Boolean(tags[LOG_IMAGE_TAG_INDICATOR]);\n\n  usePopulateImagesByRunUuid({\n    runUuids: [runInfo.runUuid ?? ''],\n    runUuidsIsActive: [runInfo.status === 'RUNNING'],\n    autoRefreshEnabled,\n    enabled: containsLoggedImages,\n  });\n\n  return (\n    <div\n      css={{\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      <div\n        css={{\n          paddingBottom: theme.spacing.md,\n          display: 'flex',\n          gap: theme.spacing.sm,\n          flex: '0 0 auto',\n        }}\n      >\n        <RunsChartsFilterInput chartsSearchFilter={chartsSearchFilter} />\n        {shouldEnableRunDetailsPageAutoRefresh() && (\n          <ToggleButton\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244\"\n            pressed={chartUIState.autoRefreshEnabled}\n            onPressedChange={(pressed) => {\n              updateChartsUIState((current) => ({ ...current, autoRefreshEnabled: pressed }));\n            }}\n          >\n            {formatMessage({\n              defaultMessage: 'Auto-refresh',\n              description: 'Run page > Charts tab > Auto-refresh toggle button',\n            })}\n          </ToggleButton>\n        )}\n        <RunsChartsGlobalChartSettingsDropdown\n          metricKeyList={metricKeys}\n          globalLineChartConfig={chartUIState.globalLineChartConfig}\n          updateUIState={updateChartsUIState}\n        />\n      </div>\n      <div\n        css={{\n          flex: 1,\n          overflow: 'auto',\n        }}\n      >\n        <RunsChartsTooltipWrapper contextData={tooltipContextValue} component={RunViewChartTooltipBody}>\n          <RunsChartsDraggableCardsGridContextProvider visibleChartCards={visibleChartCards}>\n            <RunsChartsSectionAccordion\n              compareRunSections={compareRunSections}\n              compareRunCharts={visibleChartCards}\n              reorderCharts={reorderCharts}\n              insertCharts={insertCharts}\n              chartData={chartData}\n              startEditChart={startEditChart}\n              removeChart={removeChart}\n              addNewChartCard={addNewChartCard}\n              search={chartsSearchFilter ?? ''}\n              supportedChartTypes={[RunsChartType.LINE, RunsChartType.BAR, RunsChartType.IMAGE]}\n              setFullScreenChart={setFullScreenChart}\n              autoRefreshEnabled={autoRefreshEnabled}\n              globalLineChartConfig={chartUIState.globalLineChartConfig}\n              groupBy={null}\n            />\n          </RunsChartsDraggableCardsGridContextProvider>\n        </RunsChartsTooltipWrapper>\n      </div>\n      {configuredCardConfig && (\n        <RunsChartsConfigureModal\n          chartRunData={chartData}\n          metricKeyList={metricKeys}\n          paramKeyList={[]}\n          config={configuredCardConfig}\n          onSubmit={submitForm}\n          onCancel={() => setConfiguredCardConfig(null)}\n          groupBy={null}\n          supportedChartTypes={[RunsChartType.LINE, RunsChartType.BAR, RunsChartType.IMAGE]}\n          globalLineChartConfig={chartUIState.globalLineChartConfig}\n        />\n      )}\n      <RunsChartsFullScreenModal\n        fullScreenChart={fullScreenChart}\n        onCancel={() => setFullScreenChart(undefined)}\n        chartData={chartData}\n        tooltipContextValue={tooltipContextValue}\n        tooltipComponent={RunViewChartTooltipBody}\n        autoRefreshEnabled={autoRefreshEnabled}\n        groupBy={null}\n      />\n    </div>\n  );\n};\n\nexport const RunViewMetricCharts = (props: RunViewMetricChartsProps) => {\n  const persistenceIdentifier = `${props.runInfo.runUuid}-${props.mode}`;\n\n  const localStore = useMemo(\n    () => LocalStorageUtils.getStoreForComponent('RunPage', persistenceIdentifier),\n    [persistenceIdentifier],\n  );\n\n  const [chartUIState, updateChartsUIState] = useState<ExperimentRunsChartsUIConfiguration>(() => {\n    const defaultChartState: ExperimentRunsChartsUIConfiguration = {\n      isAccordionReordered: false,\n      compareRunCharts: undefined,\n      compareRunSections: undefined,\n      // Auto-refresh is enabled by default only if the flag is set\n      autoRefreshEnabled: shouldEnableRunDetailsPageAutoRefresh(),\n      globalLineChartConfig: {\n        xAxisKey: RunsChartsLineChartXAxisType.STEP,\n        lineSmoothness: 0,\n        selectedXAxisMetricKey: '',\n      },\n    };\n    try {\n      const persistedChartState = localStore.getItem('chartUIState');\n\n      if (!persistedChartState) {\n        return defaultChartState;\n      }\n      return JSON.parse(persistedChartState);\n    } catch {\n      return defaultChartState;\n    }\n  });\n\n  useEffect(() => {\n    localStore.setItem('chartUIState', JSON.stringify(chartUIState));\n  }, [chartUIState, localStore]);\n\n  return (\n    <RunsChartsUIConfigurationContextProvider updateChartsUIState={updateChartsUIState}>\n      <RunViewMetricChartsImpl {...props} chartUIState={chartUIState} updateChartsUIState={updateChartsUIState} />\n    </RunsChartsUIConfigurationContextProvider>\n  );\n};\n\nconst RunViewMetricChartsSkeleton = ({ className }: { className?: string }) => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <div\n      css={{\n        flex: 1,\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gridTemplateRows: '200px',\n        gap: theme.spacing.md,\n      }}\n      className={className}\n    >\n      {new Array(6).fill(null).map((_, index) => (\n        <TableSkeleton key={index} lines={5} seed={index.toString()} />\n      ))}\n    </div>\n  );\n};\n","import { useDesignSystemTheme } from '@databricks/design-system';\nimport type { KeyValueEntity } from '../../types';\nimport ArtifactPage from '../ArtifactPage';\nimport { useMediaQuery } from '@databricks/web-shared/hooks';\nimport { TracesView } from '../traces/TracesView';\nimport { useMemo } from 'react';\nimport { ExperimentViewTracesTableColumns } from '../traces/TracesView.utils';\n\nconst disabledColumns = [ExperimentViewTracesTableColumns.runName];\n\n/**\n * A run page tab containing the artifact browser\n */\nexport const RunViewTracesTab = ({\n  experimentId,\n  runUuid,\n}: {\n  runUuid: string;\n  experimentId: string;\n  runTags: Record<string, KeyValueEntity>;\n}) => {\n  const stableExperimentId = useMemo(() => [experimentId], [experimentId]);\n\n  return (\n    <div css={{ flex: 1, minWidth: 0 }}>\n      <TracesView experimentIds={stableExperimentId} runUuid={runUuid} disabledColumns={disabledColumns} />\n    </div>\n  );\n};\n","import { ApolloError } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\n\ninterface CommonGraphQLApiError {\n  code: string | null;\n  message: string | null;\n}\n\nexport const getGraphQLErrorMessage = (error?: CommonGraphQLApiError | ApolloError | Error | any) => {\n  if (!error) {\n    return undefined;\n  }\n  if (error instanceof ApolloError) {\n    if (error.graphQLErrors.length > 0) {\n      return error.graphQLErrors.map((e) => e.toString()).join(', ');\n    }\n  }\n\n  if ('message' in error) {\n    return error.message;\n  }\n\n  return error.toString();\n};\n","import { DangerIcon, Empty, ParagraphSkeleton, TitleSkeleton, useDesignSystemTheme } from '@databricks/design-system';\nimport { useSelector } from 'react-redux';\nimport invariant from 'invariant';\nimport { useMemo, useState } from 'react';\n\nimport { PageContainer } from '../../../common/components/PageContainer';\nimport { useNavigate, useParams } from '../../../common/utils/RoutingUtils';\nimport Utils from '../../../common/utils/Utils';\nimport { RunPageTabName } from '../../constants';\nimport { RenameRunModal } from '../modals/RenameRunModal';\nimport { RunViewArtifactTab } from './RunViewArtifactTab';\nimport { RunViewHeader } from './RunViewHeader';\nimport { RunViewOverview } from './RunViewOverview';\nimport { useRunDetailsPageData } from './hooks/useRunDetailsPageData';\nimport { useRunViewActiveTab } from './useRunViewActiveTab';\nimport { ReduxState } from '../../../redux-types';\nimport { ErrorWrapper } from '../../../common/utils/ErrorWrapper';\nimport { RunNotFoundView } from '../RunNotFoundView';\nimport { ErrorCodes } from '../../../common/constants';\nimport NotFoundPage from '../NotFoundPage';\nimport { FormattedMessage } from 'react-intl';\nimport { isSystemMetricKey } from '../../utils/MetricsUtils';\nimport DeleteRunModal from '../modals/DeleteRunModal';\nimport Routes from '../../routes';\nimport { RunViewMetricCharts } from './RunViewMetricCharts';\nimport {\n  shouldEnableRunDetailsPageTracesTab,\n  shouldEnableGraphQLRunDetailsPage,\n} from '@mlflow/mlflow/src/common/utils/FeatureUtils';\nimport { useMediaQuery } from '@databricks/web-shared/hooks';\nimport { RunViewTracesTab } from './RunViewTracesTab';\nimport { getGraphQLErrorMessage } from '../../../graphql/get-graphql-error';\n\nconst RunPageLoadingState = () => (\n  <PageContainer>\n    <TitleSkeleton\n      loading\n      label={<FormattedMessage defaultMessage=\"Run page loading\" description=\"Run page > Loading state\" />}\n    />\n    {[...Array(3).keys()].map((i) => (\n      <ParagraphSkeleton key={i} seed={`s-${i}`} />\n    ))}\n  </PageContainer>\n);\n\nexport const RunPage = () => {\n  const { runUuid, experimentId } = useParams<{\n    runUuid: string;\n    experimentId: string;\n  }>();\n  const navigate = useNavigate();\n  const { theme } = useDesignSystemTheme();\n  const [renameModalVisible, setRenameModalVisible] = useState(false);\n  const [deleteModalVisible, setDeleteModalVisible] = useState(false);\n\n  invariant(runUuid, '[RunPage] Run UUID route param not provided');\n  invariant(experimentId, '[RunPage] Experiment ID route param not provided');\n\n  const {\n    experiment,\n    error,\n    latestMetrics,\n    loading,\n    params,\n    refetchRun,\n    runInfo,\n    tags,\n    experimentFetchError,\n    runFetchError,\n    apiError,\n    datasets,\n    registeredModelVersionSummaries,\n  } = useRunDetailsPageData({\n    experimentId,\n    runUuid,\n  });\n\n  const [modelMetricKeys, systemMetricKeys] = useMemo<[string[], string[]]>(() => {\n    if (!latestMetrics) {\n      return [[], []];\n    }\n\n    return [\n      Object.keys(latestMetrics).filter((metricKey) => !isSystemMetricKey(metricKey)),\n      Object.keys(latestMetrics).filter((metricKey) => isSystemMetricKey(metricKey)),\n    ];\n  }, [latestMetrics]);\n\n  const { comparedExperimentIds = [], hasComparedExperimentsBefore = false } = useSelector(\n    (state: ReduxState) => state.comparedExperiments || {},\n  );\n\n  const activeTab = useRunViewActiveTab();\n\n  const isLoadingLoggedModels = false;\n\n  const renderActiveTab = () => {\n    if (!runInfo) {\n      return null;\n    }\n    switch (activeTab) {\n      case RunPageTabName.MODEL_METRIC_CHARTS:\n        return (\n          <RunViewMetricCharts\n            key=\"model\"\n            mode=\"model\"\n            metricKeys={modelMetricKeys}\n            runInfo={runInfo}\n            latestMetrics={latestMetrics}\n            tags={tags}\n            params={params}\n          />\n        );\n\n      case RunPageTabName.SYSTEM_METRIC_CHARTS:\n        return (\n          <RunViewMetricCharts\n            key=\"system\"\n            mode=\"system\"\n            metricKeys={systemMetricKeys}\n            runInfo={runInfo}\n            latestMetrics={latestMetrics}\n            tags={tags}\n            params={params}\n          />\n        );\n      case RunPageTabName.ARTIFACTS:\n        return (\n          <RunViewArtifactTab\n            runUuid={runUuid}\n            runTags={tags}\n            experimentId={experimentId}\n            artifactUri={runInfo.artifactUri ?? undefined}\n          />\n        );\n      case RunPageTabName.TRACES:\n        if (shouldEnableRunDetailsPageTracesTab()) {\n          return <RunViewTracesTab runUuid={runUuid} runTags={tags} experimentId={experimentId} />;\n        }\n    }\n\n    return (\n      <RunViewOverview\n        runInfo={runInfo}\n        tags={tags}\n        params={params}\n        latestMetrics={latestMetrics}\n        runUuid={runUuid}\n        onRunDataUpdated={refetchRun}\n        datasets={datasets}\n        registeredModelVersionSummaries={registeredModelVersionSummaries}\n        isLoadingLoggedModels={isLoadingLoggedModels}\n      />\n    );\n  };\n\n  // Use full height page with scrollable tab area only for non-xs screens\n  const useFullHeightPage = useMediaQuery(`(min-width: ${theme.responsive.breakpoints.sm}px)`);\n\n  const initialLoading = loading && (!runInfo || !experiment);\n\n  // Handle \"run not found\" error\n  if (\n    // For REST API:\n    (runFetchError instanceof ErrorWrapper && runFetchError.getErrorCode() === ErrorCodes.RESOURCE_DOES_NOT_EXIST) ||\n    // For GraphQL:\n    apiError?.code === ErrorCodes.RESOURCE_DOES_NOT_EXIST ||\n    (error && getGraphQLErrorMessage(error).match(/not found$/))\n  ) {\n    return <RunNotFoundView runId={runUuid} />;\n  }\n\n  // Handle experiment not found error\n  if (\n    experimentFetchError instanceof ErrorWrapper &&\n    experimentFetchError.getErrorCode() === ErrorCodes.RESOURCE_DOES_NOT_EXIST\n  ) {\n    return <NotFoundPage />;\n  }\n\n  // Catch-all for legacy REST API errors\n  if (runFetchError || experimentFetchError) {\n    return null;\n  }\n\n  // Catch-all for GraphQL errors\n  if (shouldEnableGraphQLRunDetailsPage() && (error || apiError)) {\n    return (\n      <div css={{ marginTop: theme.spacing.lg }}>\n        <Empty\n          title={\n            <FormattedMessage\n              defaultMessage=\"Can't load run details\"\n              description=\"Run page > error loading page title\"\n            />\n          }\n          description={getGraphQLErrorMessage(apiError ?? error)}\n          image={<DangerIcon />}\n        />\n      </div>\n    );\n  }\n\n  // Display spinner/skeleton for the initial data load\n  if (initialLoading || !runInfo || !experiment) {\n    return <RunPageLoadingState />;\n  }\n\n  return (\n    <>\n      <PageContainer usesFullHeight={useFullHeightPage}>\n        {/* Header fixed on top */}\n        <RunViewHeader\n          comparedExperimentIds={comparedExperimentIds}\n          experiment={experiment}\n          handleRenameRunClick={() => setRenameModalVisible(true)}\n          handleDeleteRunClick={() => setDeleteModalVisible(true)}\n          hasComparedExperimentsBefore={hasComparedExperimentsBefore}\n          runDisplayName={Utils.getRunDisplayName(runInfo, runUuid)}\n          runTags={tags}\n          runParams={params}\n          runUuid={runUuid}\n          artifactRootUri={runInfo?.artifactUri ?? undefined}\n          registeredModelVersionSummaries={registeredModelVersionSummaries}\n          isLoading={loading || isLoadingLoggedModels}\n        />\n        {/* Scroll tab contents independently within own container */}\n        <div css={{ flex: 1, overflow: 'auto', marginBottom: theme.spacing.sm, display: 'flex' }}>\n          {renderActiveTab()}\n        </div>\n      </PageContainer>\n      <RenameRunModal\n        runUuid={runUuid}\n        onClose={() => setRenameModalVisible(false)}\n        runName={runInfo.runName ?? ''}\n        isOpen={renameModalVisible}\n        onSuccess={refetchRun}\n      />\n      <DeleteRunModal\n        selectedRunIds={[runUuid]}\n        onClose={() => setDeleteModalVisible(false)}\n        isOpen={deleteModalVisible}\n        onSuccess={() => {\n          navigate(Routes.getExperimentPageRoute(experimentId));\n        }}\n      />\n    </>\n  );\n};\n\nexport default RunPage;\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport { LegacyForm, Input, LegacySelect } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\n\nimport './RegisterModelForm.css';\n\nconst { Option, OptGroup } = LegacySelect;\n\nconst CREATE_NEW_MODEL_LABEL = 'Create New Model';\n// Include 'CREATE_NEW_MODEL_LABEL' as part of the value for filtering to work properly. Also added\n// prefix and postfix to avoid value conflict with actual model names.\nexport const CREATE_NEW_MODEL_OPTION_VALUE = `$$$__${CREATE_NEW_MODEL_LABEL}__$$$`;\nexport const SELECTED_MODEL_FIELD = 'selectedModel';\nexport const MODEL_NAME_FIELD = 'modelName';\nconst DESCRIPTION_FIELD = 'description';\n\ntype Props = {\n  modelByName?: any;\n  isCopy?: boolean;\n  onSearchRegisteredModels: (...args: any[]) => any;\n  innerRef: any;\n};\n\ntype State = any;\n\nexport class RegisterModelForm extends React.Component<Props, State> {\n  state = {\n    selectedModel: null,\n  };\n\n  handleModelSelectChange = (selectedModel: any) => {\n    this.setState({ selectedModel });\n  };\n\n  modelNameValidator = (rule: any, value: any, callback: any) => {\n    const { modelByName } = this.props;\n    callback(modelByName[value] ? `Model \"${value}\" already exists.` : undefined);\n  };\n\n  handleFilterOption = (input: any, option: any) => {\n    const value = (option && option.value) || '';\n    return value.toLowerCase().indexOf(input.toLowerCase()) !== -1;\n  };\n\n  renderExplanatoryText() {\n    const { isCopy } = this.props;\n    const { selectedModel } = this.state;\n    const creatingNewModel = selectedModel === CREATE_NEW_MODEL_OPTION_VALUE;\n\n    if (!selectedModel || creatingNewModel) {\n      return null;\n    }\n\n    const explanation = isCopy ? (\n      <FormattedMessage\n        defaultMessage=\"The model version will be copied to {selectedModel} as a new version.\"\n        description=\"Model registry > OSS Promote model modal > copy explanatory text\"\n        values={{ selectedModel: selectedModel }}\n      />\n    ) : (\n      <FormattedMessage\n        defaultMessage=\"The model will be registered as a new version of {selectedModel}.\"\n        description=\"Explantory text for registering a model\"\n        values={{ selectedModel: selectedModel }}\n      />\n    );\n\n    return <p className=\"modal-explanatory-text\">{explanation}</p>;\n  }\n\n  renderModel(model: any) {\n    return (\n      <Option value={model.name} key={model.name}>\n        {model.name}\n      </Option>\n    );\n  }\n  render() {\n    const { modelByName, innerRef, isCopy } = this.props;\n    const { selectedModel } = this.state;\n    const creatingNewModel = selectedModel === CREATE_NEW_MODEL_OPTION_VALUE;\n    return (\n      // @ts-expect-error TS(2322): Type '{ children: (Element | null)[]; ref: any; la... Remove this comment to see the full error message\n      <LegacyForm ref={innerRef} layout=\"vertical\" className=\"register-model-form\">\n        {/* \"+ Create new model\" OR \"Select existing model\" */}\n        <LegacyForm.Item\n          label={isCopy ? <b>Copy to model</b> : 'Model'}\n          name={SELECTED_MODEL_FIELD}\n          rules={[{ required: true, message: 'Please select a model or create a new one.' }]}\n        >\n          <LegacySelect\n            dropdownClassName=\"model-select-dropdown\"\n            onChange={this.handleModelSelectChange}\n            placeholder=\"Select a model\"\n            filterOption={this.handleFilterOption}\n            onSearch={this.props.onSearchRegisteredModels}\n            // @ts-expect-error TS(2769): No overload matches this call.\n            showSearch\n          >\n            <Option value={CREATE_NEW_MODEL_OPTION_VALUE} className=\"create-new-model-option\">\n              <i className=\"fa fa-plus fa-fw\" style={{ fontSize: 13 }} /> {CREATE_NEW_MODEL_LABEL}\n            </Option>\n            <OptGroup label=\"Models\">{Object.values(modelByName).map((model) => this.renderModel(model))}</OptGroup>\n          </LegacySelect>\n        </LegacyForm.Item>\n\n        {/* Name the new model when \"+ Create new model\" is selected */}\n        {creatingNewModel ? (\n          <LegacyForm.Item\n            label=\"Model Name\"\n            name={MODEL_NAME_FIELD}\n            rules={[\n              { required: true, message: 'Please input a name for the new model.' },\n              { validator: this.modelNameValidator },\n            ]}\n          >\n            <Input\n              componentId=\"codegen_mlflow_app_src_model-registry_components_registermodelform.tsx_132\"\n              placeholder=\"Input a model name\"\n            />\n          </LegacyForm.Item>\n        ) : null}\n\n        {/* Explanatory text shown when existing model is selected */}\n        {this.renderExplanatoryText()}\n      </LegacyForm>\n    );\n  }\n}\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport { REGISTERED_MODELS_SEARCH_NAME_FIELD } from '../constants';\nimport { resolveFilterValue } from '../actions';\n\nexport function getModelNameFilter(query: any) {\n  if (query) {\n    return `${REGISTERED_MODELS_SEARCH_NAME_FIELD} ilike ${resolveFilterValue(query, true)}`;\n  } else {\n    return '';\n  }\n}\n\nexport function getCombinedSearchFilter({\n  query = '',\n}: {\n  query?: string;\n} = {}) {\n  const filters = [];\n  const initialFilter = query.includes('tags.') ? query : getModelNameFilter(query);\n  if (initialFilter) filters.push(initialFilter);\n  return filters.join(' AND ');\n}\n\nexport function constructSearchInputFromURLState(urlState: any) {\n  if ('searchInput' in urlState) {\n    return urlState['searchInput'];\n  }\n  if ('nameSearchInput' in urlState && 'tagSearchInput' in urlState) {\n    return getModelNameFilter(urlState['nameSearchInput']) + ` AND ` + urlState['tagSearchInput'];\n  }\n  if ('tagSearchInput' in urlState) {\n    return urlState['tagSearchInput'];\n  }\n  if ('nameSearchInput' in urlState) {\n    return urlState['nameSearchInput'];\n  }\n  return '';\n}\n","/*!\n * bytes\n * Copyright(c) 2012-2014 TJ Holowaychuk\n * Copyright(c) 2015 Jed Watson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = bytes;\nmodule.exports.format = format;\nmodule.exports.parse = parse;\n\n/**\n * Module variables.\n * @private\n */\n\nvar formatThousandsRegExp = /\\B(?=(\\d{3})+(?!\\d))/g;\n\nvar formatDecimalsRegExp = /(?:\\.0*|(\\.[^0]+)0+)$/;\n\nvar map = {\n  b:  1,\n  kb: 1 << 10,\n  mb: 1 << 20,\n  gb: 1 << 30,\n  tb: ((1 << 30) * 1024)\n};\n\nvar parseRegExp = /^((-|\\+)?(\\d+(?:\\.\\d+)?)) *(kb|mb|gb|tb)$/i;\n\n/**\n * Convert the given value in bytes into a string or parse to string to an integer in bytes.\n *\n * @param {string|number} value\n * @param {{\n *  case: [string],\n *  decimalPlaces: [number]\n *  fixedDecimals: [boolean]\n *  thousandsSeparator: [string]\n *  unitSeparator: [string]\n *  }} [options] bytes options.\n *\n * @returns {string|number|null}\n */\n\nfunction bytes(value, options) {\n  if (typeof value === 'string') {\n    return parse(value);\n  }\n\n  if (typeof value === 'number') {\n    return format(value, options);\n  }\n\n  return null;\n}\n\n/**\n * Format the given value in bytes into a string.\n *\n * If the value is negative, it is kept as such. If it is a float,\n * it is rounded.\n *\n * @param {number} value\n * @param {object} [options]\n * @param {number} [options.decimalPlaces=2]\n * @param {number} [options.fixedDecimals=false]\n * @param {string} [options.thousandsSeparator=]\n * @param {string} [options.unit=]\n * @param {string} [options.unitSeparator=]\n *\n * @returns {string|null}\n * @public\n */\n\nfunction format(value, options) {\n  if (!Number.isFinite(value)) {\n    return null;\n  }\n\n  var mag = Math.abs(value);\n  var thousandsSeparator = (options && options.thousandsSeparator) || '';\n  var unitSeparator = (options && options.unitSeparator) || '';\n  var decimalPlaces = (options && options.decimalPlaces !== undefined) ? options.decimalPlaces : 2;\n  var fixedDecimals = Boolean(options && options.fixedDecimals);\n  var unit = (options && options.unit) || '';\n\n  if (!unit || !map[unit.toLowerCase()]) {\n    if (mag >= map.tb) {\n      unit = 'TB';\n    } else if (mag >= map.gb) {\n      unit = 'GB';\n    } else if (mag >= map.mb) {\n      unit = 'MB';\n    } else if (mag >= map.kb) {\n      unit = 'KB';\n    } else {\n      unit = 'B';\n    }\n  }\n\n  var val = value / map[unit.toLowerCase()];\n  var str = val.toFixed(decimalPlaces);\n\n  if (!fixedDecimals) {\n    str = str.replace(formatDecimalsRegExp, '$1');\n  }\n\n  if (thousandsSeparator) {\n    str = str.replace(formatThousandsRegExp, thousandsSeparator);\n  }\n\n  return str + unitSeparator + unit;\n}\n\n/**\n * Parse the string value into an integer in bytes.\n *\n * If no unit is given, it is assumed the value is in bytes.\n *\n * @param {number|string} val\n *\n * @returns {number|null}\n * @public\n */\n\nfunction parse(val) {\n  if (typeof val === 'number' && !isNaN(val)) {\n    return val;\n  }\n\n  if (typeof val !== 'string') {\n    return null;\n  }\n\n  // Test if the string passed is valid\n  var results = parseRegExp.exec(val);\n  var floatValue;\n  var unit = 'b';\n\n  if (!results) {\n    // Nothing could be extracted from the given string\n    floatValue = parseInt(val, 10);\n    unit = 'b'\n  } else {\n    // Retrieve the value and the unit\n    floatValue = parseFloat(results[1]);\n    unit = results[4].toLowerCase();\n  }\n\n  return Math.floor(map[unit] * floatValue);\n}\n"],"names":["Prompt","_ref","when","message","block","React","UNSAFE_NavigationContext","navigator","window","confirm","getReactMdeIcon","name","_jsx","TooltipIcon","EditableNoteImpl","Component","constructor","arguments","state","markdown","this","props","defaultMarkdown","selectedTab","defaultSelectedTab","error","converter","getMarkdownConverter","handleMdeValueChange","setState","handleTabChange","handleSubmitClick","onSubmit","confirmLoading","Promise","resolve","then","catch","e","getMessageField","intl","formatMessage","id","defaultMessage","handleCancelClick","onCancel","contentHasChanged","renderActions","className","children","_jsxs","Button","componentId","type","onClick","disabled","loading","saveText","htmlType","FormattedMessage","getSanitizedHtmlContent","sanitized","sanitizeConvertedHtml","makeHtml","forceAnchorTagNewTab","render","showEditor","htmlContent","ReactMde","value","minEditorHeight","maxEditorHeight","minPreviewHeight","childProps","toolbarCommands","onChange","onTabChange","generateMarkdownPreview","md","getIcon","Alert","description","closable","HTMLNoteContent","content","theme","useDesignSystemTheme","LegacyTooltip","position","title","css","_css","color","colors","textPrimary","SvgIcon","icon","dangerouslySetInnerHTML","__html","defaultProps","EditableNote","injectIntl","RegisterModelImpl","super","form","visible","modelByName","createRegisteredModelRequestId","getUUID","createModelVersionRequestId","searchModelVersionRequestId","showRegisterModal","hideRegisterModal","_this$props$onCloseMo","_this$props","onCloseModal","call","resetAndClearModalForm","_this$form$current","_this$props$onCloseMo2","_this$props2","current","resetFields","handleRegistrationFailure","Utils","logErrorAndNotifyUser","handleSearchRegisteredModels","input","searchRegisteredModelsApi","getModelNameFilter","reloadModelVersionsForCurrentRun","runUuid","searchModelVersionsApi","run_id","handleRegisterModel","validateFields","values","modelPath","selectedModelName","SELECTED_MODEL_FIELD","_this$props$onRegiste","_this$props$onRegiste2","_this$props$onRegiste3","_this$props$onRegiste4","CREATE_NEW_MODEL_OPTION_VALUE","createRegisteredModelApi","MODEL_NAME_FIELD","createModelVersionApi","onRegisterSuccess","identity","onRegisterFailure","componentDidMount","componentDidUpdate","prevProps","prevState","renderRegisterModelForm","RegisterModelForm","innerRef","onSearchRegisteredModels","_","renderFooter","renderHelper","disableButton","footer","showButton","buttonType","tooltip","placement","Modal","width","modalVisible","onOk","okText","centered","mapDispatchToProps","RegisterModelWithIntl","RegisterModel","connect","entities","Text","Typography","styles","_ref2","_ref3","ArtifactViewImpl","activeNodeId","undefined","toggledNodeIds","requestedNodeIds","Set","viewAsTable","onToggleTreebeard","dataNode","toggled","usingLoggedModels","isExperimentLoggedModelsUIEnabled","isLoggedModelsMode","newRequestedNodeIds","has","loggedModelId","listArtifactsLoggedModelApi","listArtifactsApi","getTreebeardData","artifactNode","isRoot","Object","map","c","Error","active","fileInfo","path","getBasename","toggleState","isLoaded","getExistingModelVersions","modelVersionsBySource","normalize","getActiveNodeRealPath","renderRegisterModelButton","activeNodeRealPath","modelRelativePath","String","renderModelVersionInfoSection","existingModelVersions","ModelVersionInfoSection","modelVersion","renderPathAndSizeInfo","node","ArtifactUtils","findChild","ellipsis","copyable","is_dir","bytes","getActiveNodeSize","renderSizeInfo","designSystemThemeApi","style","display","alignItems","gap","spacing","sm","overflow","textOverflow","bold","size","renderPathInfo","whiteSpace","flex","textSecondary","CopyButton","showLabel","copyText","CopyIcon","onDownloadClick","artifactPath","location","href","getArtifactLocationUrl","renderControls","shouldShowViewAsTableCheckbox","Checkbox","isChecked","arrowPointAtCenter","DownloadIcon","renderArtifactInfo","toRender","isModelRegistryEnabled","activeNodeCanBeRegistered","activeNodeIsDirectory","padding","xs","flexDirection","justifyContent","artifactRootUri","file_size","parseInt","MLMODEL_FILE_NAME","handleActiveNodeChange","initialSelectedArtifactPath","artifactPathParts","split","err","console","pathSoFar","toggledArtifactState","forEach","part","setArtifactState","artifactState","runTags","getLoggedTablesFromTags","includes","isEmpty","NoArtifactView","useAutoHeight","height","responsive","mediaQueries","overflowX","minWidth","maxWidth","borderRight","borderDecorative","ArtifactViewTree","data","ShowArtifactPage","isDirectory","modelVersions","showArtifactLoggedTableView","ArtifactView","mapStateToProps","ownProps","_ownProps$artifactRoo","apis","getArtifacts","getArtifactRootUri","getAllModelVersions","modelVersionsWithNormalizedSource","version","source","WithDesignSystemThemeHoc","status","status_message","mvPageRoute","ModelRegistryRoutes","getModelVersionPageRoute","modelVersionLink","Link","to","target","rel","modelVersionStatusIconTooltips","ModelVersionStatusIcons","ModelVersionStatus","READY","registeredDate","formatTimestamp","creation_timestamp","DefaultModelVersionStatusMessages","_ref4","paddingTop","Empty","image","LayerIcon","ArtifactPageImpl","pollIntervalId","getFailedtoListArtifactsMsg","artifactUri","errorThrown","searchRequestId","listArtifactRequestIds","concat","s","pollModelVersionsForCurrentRun","async","searchRequest","errorMessage","toString","JSON","stringify","pollArtifactsForCurrentRun","parts","i","length","renderErrorCondition","shouldRenderError","renderArtifactView","isLoading","requests","ArtifactViewBrowserSkeleton","failedReq","errorDescription","ErrorWrapper","ArtifactViewErrorState","setInterval","POLL_INTERVAL","componentWillUnmount","clearInterval","RequestStateWrapper","requestIds","ConnectedArtifactPage","initialSelectedArtifactPathMatch","pathname","match","selectedPath","_ownProps$runTags","loggedModelPaths","getLoggedModelPathsFromTags","withRouterNext","RunViewArtifactTab","useFullHeightPage","useMediaQuery","breakpoints","paddingBottom","ArtifactPage","useRunViewActiveTab","tabParam","useParams","RunPageTabName","MODEL_METRIC_CHARTS","SYSTEM_METRIC_CHARTS","shouldEnableRunDetailsPageTracesTab","TRACES","ARTIFACTS","OVERVIEW","TABS_WITHOUT_MARGIN","EVALUATIONS","RunViewModeSwitch","experimentId","navigate","useNavigate","currentTab","removeTabMargin","setRemoveTabMargin","useState","LegacyTabs","activeKey","newTabKey","Routes","getRunPageTabRoute","getRunPageRoute","tabBarStyle","margin","TabPane","tab","LoggedModelsDropdownContent","models","onRegisterClick","renderSection","sectionModels","DropdownMenu","Group","Label","model","registeredModelSummary","first","registeredModelVersionSummaries","Item","marginRight","last","HintColumn","stopPropagation","endIcon","NewWindowIcon","absolutePath","displayedName","link","IconWrapper","RegisteredModelOkIcon","Tag","registeredModels","filter","unregisteredModels","_Fragment","Separator","RunViewHeaderRegisterModelButton","useMemo","getLoggedModelsFromTags","_ref5","orderBy","_ref6","_model$registeredMode","selectedModelToRegister","setSelectedModelToRegister","modelsRegistered","Root","modal","registeredCount","loggedCount","Trigger","asChild","ChevronDownIcon","Content","align","singleModel","registeredModelVersionSummary","marginLeft","RunViewHeader","hasComparedExperimentsBefore","comparedExperimentIds","experiment","runDisplayName","runParams","handleRenameRunClick","handleDeleteRunClick","breadcrumbs","_experiment$experimen","getCompareExperimentsPageRoute","numExperiments","getExperimentPageRoute","getExperimentPageLink","PageHeader","OverflowMenu","menu","itemName","_experiment$experimen2","RunViewStatusBox","backgroundColor","isDarkMode","green800","green100","red800","red100","blue800","blue100","RunStatusIcon","RunViewUserLinkBox","_runInfo$experimentId","runInfo","tags","user","getUser","searchRunsByUser","ExpandedJSONValueCell","structuredJSONValue","objectData","parse","wordBreak","fontFamily","ExpandableParamValueCell","toggleExpanded","isExpanded","autoExpandedRowsList","cellRef","useRef","isOverflowing","setIsOverflowing","useEffect","resizeObserverCallback","throttle","entry","scrollHeight","clientHeight","trailing","resizeObserver","ResizeObserver","observe","disconnect","ChevronRightIcon","ref","staticColumns","accessorKey","header","enableResizing","meta","paddingLeft","cell","row","original","getIsExpanded","table","options","key","_ref8","_ref9","DetailsOverviewParamsTable","params","useIntl","setFilter","paramsValues","paramsList","filterLower","toLowerCase","columns","isUnstableNestedComponentsMigrated","_ref7","useReactTable","getCoreRowModel","getExpandedRowModel","getRowId","enableColumnResizing","columnResizeMode","Title","level","border","borderRadius","general","borderRadiusBase","renderTableContent","areAllResultsFiltered","marginBottom","Input","prefix","SearchIcon","placeholder","allowClear","Table","scrollable","empty","marginTop","TableRow","isHeader","getLeafHeaders","index","TableHeader","resizable","column","getCanResize","resizeHandler","getResizeHandler","isResizing","getIsResizing","flexGrow","flexBasis","getSize","flexRender","columnDef","getContext","getRowModel","rows","getAllCells","_meta","TableCell","multiline","systemMetricsLabel","modelMetricsLabel","defineMessages","metricKeyMatchesFilter","RunViewMetricsTableSection","metricsList","keyColumn","backgroundSecondary","_runInfo$runUuid","getMetricPageRoute","_ref10","_ref11","RunViewMetricsTable","latestMetrics","metricValues","metricSegments","systemMetrics","isSystemMetricKey","modelMetrics","metrics","sum","segment","DatasetEntry","dataset","role","ExperimentViewDatasetWithContext","datasetWithTags","displayTextAsLink","RunViewDatasetBox","datasets","selectedDatasetWithRun","setSelectedDatasetWithRun","isDrawerOpen","setIsDrawerOpen","firstDataset","remainingDatasets","slice","datasetClicked","_runInfo$runName","runData","runName","digest","ExperimentViewDatasetDrawer","isOpen","setIsOpen","GET_RUN_QUERY","gql","useGetRunQuery","_data$mlflowGetRun","_data$mlflowGetRun2","apolloError","refetch","useQuery","variables","runId","skip","mlflowGetRun","run","refetchRun","apiError","RunViewParentRunBox","parentRunUuid","dispatch","useDispatch","parentRunInfoRedux","useSelector","runInfosByUuid","parentRunInfoGraphql","shouldEnableGraphQLRunDetailsPage","parentRunInfo","_parentRunInfoGraphql","info","getRunApi","ParagraphSkeleton","label","RunViewTagsBox","onTagsUpdated","visibleTagKeys","visibleTagEntities","keys","isUserFacingTag","EditTagsModal","showEditTagsModal","useEditKeyValueTagsModal","valueRequired","allAvailableTags","saveTagsHandler","existingTags","newTags","setRunTagsBulkApi","showEditModal","editTagsLabel","flexWrap","tag","KeyValueTag","enableFullViewModal","Tooltip","PencilIcon","Spinner","RunViewDescriptionBox","_tags$NOTE_CONTENT_TA","onDescriptionChanged","noteContent","NOTE_CONTENT_TAG","showNoteEditor","setShowNoteEditor","Hint","setTagApi","handleCancelEditNote","DetailsOverviewMetadataRow","borderBottom","minHeight","heightSm","RunViewRegisteredModelsBox","Overflow","modelSummary","queryFn","queryKey","RegisteredPromptsApi","getPromptVersionsForRun","RunViewRegisteredPromptsBox","_queryResult$error","queryResult","retry","usePromptVersionsForRunQuery","promptVersions","model_versions","promptVersion","getPromptDetailsPageRoute","encodeURIComponent","displayText","RunViewLoggedModelsBox","loggedModels","getModelFlavorName","flavors","shouldDisplayArtifactPaths","cursor","heightBase","ModelsIcon","RunViewSourceBox","_tags$MLFLOW_RUN_GIT_","_tags$Utils$gitCommit","_tags$Utils$sourceTyp","search","branchName","MLFLOW_RUN_GIT_SOURCE_BRANCH_TAG","commitHash","gitCommitTag","runSource","renderSource","ExperimentSourceTypeIcon","sourceType","sourceTypeTag","actionPrimaryBackgroundDefault","BranchIcon","dangerouslySetAntdProps","overlayStyle","GitCommitIcon","DetailsOverviewMetadataTable","lg","DetailsOverviewCopyableIdBox","EmptyValue","RunViewOverview","onRunDataUpdated","registeredModelVersionSummariesForRun","isLoadingLoggedModels","useLocation","parentRunIdTag","EXPERIMENT_PARENT_ID_TAG","shouldDisplayLoggedModelsBox","renderDetails","_runInfo$runUuid2","startTime","getDuration","endTime","maxHeight","useUnifiedRegisteredModelVersionsSummariesForRun","registeredModelsFromStore","modelVersionsByRunUuid","shouldEnableGraphQLModelVersionsForRunDetails","result","_queryResult$data","_queryResult$data$mod","push","transformToKeyedObject","inputArray","keyBy","transformDatasets","datasetInput","_datasetInput$dataset","_datasetInput$dataset2","_datasetInput$dataset3","_datasetInput$dataset4","_datasetInput$dataset5","_datasetInput$dataset6","_datasetInput$dataset7","_datasetInput$dataset8","_datasetInput$dataset9","_datasetInput$dataset10","_datasetInput$dataset11","_datasetInput$dataset12","_datasetInput$tags$ma","_datasetInput$tags","profile","schema","_tag$key","_tag$value","useRunDetailsPageData","_detailsPageResponse$","_detailsPageResponse$2","_detailsPageResponse$3","_detailsPageResponse$4","_detailsPageResponse$5","_detailsPageResponse$6","usingGraphQL","_detailsPageGraphqlRe12","_detailsPageGraphqlRe13","_detailsPageGraphqlRe14","_detailsPageGraphqlRe15","detailsPageGraphqlResponse","graphQLQuery","_detailsPageGraphqlRe","_detailsPageGraphqlRe2","_detailsPageGraphqlRe3","_detailsPageGraphqlRe4","_detailsPageGraphqlRe5","_detailsPageGraphqlRe6","_detailsPageGraphqlRe7","_detailsPageGraphqlRe8","_detailsPageGraphqlRe9","_detailsPageGraphqlRe10","_detailsPageGraphqlRe11","pickBy","step","timestamp","Number","metric","trim","param","inputs","datasetInputs","detailsPageResponse","useRunDetailsPageDataLegacy","runRequestId","setRunRequestId","experimentRequestId","setExperimentRequestId","tagsByRunUuid","latestMetricsByRunUuid","paramsByRunUuid","experimentsById","runDatasetsByUuid","fetchRun","useCallback","action","fetchExperiment","getExperimentApi","fetchModelVersions","runLoading","runFetchError","_state$apis","_state$apis$runReques","_state$apis2","_state$apis2$runReque","Boolean","experimentLoading","experimentFetchError","_state$apis3","_state$apis3$experime","_state$apis4","_state$apis4$experime","errors","RunNotFoundView","ErrorView","statusCode","subMessage","fallbackHomePageReactRoute","rootRoute","RunViewChartTooltipBody","_metricsForRun$metric","contextData","metricsForRun","hoverData","chartData","metricKey","isHovering","mode","singleTraceHoverData","containsMultipleRunsTooltipData","hoveredDataPoint","RunsChartsTooltipMode","MultipleTracesWithScanline","RunsMultipleTracesTooltipBody","metricEntity","metricContainsHistory","isSystemMetric","displayTimestamp","isUndefined","displayStep","valueField","RunViewMetricChartsImpl","_runInfo$runUuid4","metricKeys","chartUIState","updateChartsUIState","setSearch","compareRunCharts","compareRunSections","chartsSearchFilter","visibleChartCards","_compareRunCharts$fil","chart","deleted","fullScreenChart","setFullScreenChart","mapValues","sampledMetricsByRunUuid","metricsByRange","compact","metricsHistory","flat","tooltipContextValue","imagesByRunUuid","configuredCardConfig","setConfiguredCardConfig","reorderCharts","useReorderRunsChartsFn","insertCharts","useInsertRunsChartsFn","removeChart","useRemoveRunsChartFn","confirmChartCardConfiguration","useConfirmChartCardConfigurationFn","_runInfo$runUuid3","displayName","images","metricHistory","uuid","primary","resultChartSet","resultSectionSet","RunsChartsCardConfig","getBaseChartAndSectionConfigs","runsData","enabledSectionNames","MLFLOW_MODEL_METRIC_NAME","MLFLOW_SYSTEM_METRIC_NAME","filterMetricNames","startsWith","MLFLOW_SYSTEM_METRIC_PREFIX","isResultUpdated","updateChartAndSectionConfigs","isAccordionReordered","isTabActive","useIsTabActive","autoRefreshEnabled","shouldEnableRunDetailsPageAutoRefresh","containsLoggedImages","LOG_IMAGE_TAG_INDICATOR","usePopulateImagesByRunUuid","runUuids","runUuidsIsActive","enabled","RunsChartsFilterInput","ToggleButton","pressed","onPressedChange","RunsChartsGlobalChartSettingsDropdown","metricKeyList","globalLineChartConfig","updateUIState","RunsChartsTooltipWrapper","component","RunsChartsDraggableCardsGridContextProvider","RunsChartsSectionAccordion","startEditChart","chartCard","addNewChartCard","metricSectionId","getEmptyChartCardByType","supportedChartTypes","RunsChartType","LINE","BAR","IMAGE","groupBy","RunsChartsConfigureModal","chartRunData","paramKeyList","config","configuredCard","RunsChartsFullScreenModal","tooltipComponent","RunViewMetricCharts","persistenceIdentifier","localStore","LocalStorageUtils","getStoreForComponent","defaultChartState","xAxisKey","RunsChartsLineChartXAxisType","STEP","lineSmoothness","selectedXAxisMetricKey","persistedChartState","getItem","setItem","RunsChartsUIConfigurationContextProvider","disabledColumns","ExperimentViewTracesTableColumns","RunViewTracesTab","stableExperimentId","TracesView","experimentIds","getGraphQLErrorMessage","ApolloError","graphQLErrors","join","RunPageLoadingState","PageContainer","TitleSkeleton","Array","seed","RunPage","_runInfo$artifactUri2","renameModalVisible","setRenameModalVisible","deleteModalVisible","setDeleteModalVisible","invariant","modelMetricKeys","systemMetricKeys","comparedExperiments","activeTab","initialLoading","getErrorCode","ErrorCodes","RESOURCE_DOES_NOT_EXIST","code","NotFoundPage","DangerIcon","usesFullHeight","getRunDisplayName","renderActiveTab","_runInfo$artifactUri","RenameRunModal","onClose","onSuccess","DeleteRunModal","selectedRunIds","Option","OptGroup","LegacySelect","CREATE_NEW_MODEL_LABEL","selectedModel","handleModelSelectChange","modelNameValidator","rule","callback","handleFilterOption","option","indexOf","renderExplanatoryText","isCopy","explanation","renderModel","creatingNewModel","LegacyForm","layout","rules","required","dropdownClassName","filterOption","onSearch","showSearch","fontSize","validator","query","REGISTERED_MODELS_SEARCH_NAME_FIELD","resolveFilterValue","getCombinedSearchFilter","filters","initialFilter","constructSearchInputFromURLState","urlState","module","exports","format","formatThousandsRegExp","formatDecimalsRegExp","b","kb","mb","gb","tb","parseRegExp","isFinite","mag","Math","abs","thousandsSeparator","unitSeparator","decimalPlaces","fixedDecimals","unit","str","toFixed","replace","val","isNaN","floatValue","results","exec","parseFloat","floor"],"sourceRoot":""}